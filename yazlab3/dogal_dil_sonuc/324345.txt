armada middlewar commun servic realtim embed system evolv past sever decad small customdesign digit hardwar larg distribut process system system becom complex interoper evolv costeffect requir motiv use commercialofftheshelf compon rais challeng construct depend predict realtim servic applic develop top inexpens hardwar softwar compon minim support timeli depend guarante address challeng armada projectarmada set commun middlewar servic provid support faulttoler endtoend guarante embed realtim distribut applic sinc realtim perform applic depend heavili commun subsystem first thrust project develop predict commun servic architectur ensur qossensit messag deliveri faulttoler paramount import embed safetycrit system second thrust armada aim offload complex develop faulttoler applic applic programm focus collect modular compos middlewar faulttoler group commun replic time constraint final develop tool test valid behavior servic give overview armada project describ architectur present implement statu b introduct armada collabor project realtim comput laboratori rtcl univers michigan honeywel technolog center goal project develop demonstr integr set commun middlewar servic tool necessari realiz embed faulttoler realtim servic distribut evolv comput platform techniqu tool togeth compos environ capabl design implement modifi integr realtim distribut system key challeng address armada project includ time deliveri servic endtoend softhard realtim constraint depend servic presenc hardwar softwar failur scalabl comput commun resourc exploit open system emerg standard oper system commun servic armada commun middlewar servic motiv requir larg embed applic command control autom flight shipboard work support part research grant defens advanc research project agenc monitor us air forc rome laboratori grant f306029510044 api applic servic tool evalu channel microkernel figur 1 overview armada environ comput radar data process tradit embed applic construct specialpurpos hardwar softwar approach result high product cost poor interoper make system less evolv prone local failur recent trend therefor build embed system use commercialofftheshelf cot compon pc board ethernet link pcbase realtim oper system make possibl take advantag avail develop tool leverag mass product cost make better use compon interoper realtim applic develop point view approach creat need gener highlevel softwar servic facilit build embed distribut realtim applic top inexpens wide avail hard ware realtim oper system typic implement elementari subset realtim servic howev monolith embed higherlevel support oper system kernel advis differ applic differ realtim faulttoler requir thu cater possibl requir rang singl oper system would neither practic effici instead believ compos set servic develop subset may need exist given applic philosophi advoc use realtim microkernel equip basic realtim support prioritybas schedul realtim commun addit reconfigur set compos middlewar layer top ker nel appropri test valid tool independ develop verifi requir timeli faulttoler properti distribut middlewar armada project therefor divid three complementari thrust area lowlevel realtim commun support ii middlewar servic group commun faulttoler iii depend evalu valid tool figur 1 summar structur armada environ first thrust focus design develop realtim commun servic microkernel gener architectur introduc design commun subsystem host predict qo guarante maintain architectur independ particular commun servic illustr paper context present design realtim channel lowlevel commun servic implement simplex order virtual connect two network host provid determinist statist endtoend delay guarante senderreceiv pair second thrust project focus collect modular compos middlewar servic build block construct embed applic layer openarchitectur support modular insert new servic implement requir evolv lifespan system armada middlewar servic includ suit faulttoler group commun servic realtim guarante call rtcast support embed applic faulttoler timeli quirement rtcast consist collect middlewar includinga group membership servic time atom multicast servic admiss control schedul modul clock synchron servic armada middlewar servic also includ realtim primarybackup replic servic call rtpb ensur tempor consist replic object redund node third thrust project build toolset valid evalu timeli faulttoler capabl target system tool develop includ fault injector differ level eg oper system commun protocol applic synthet realtim workload gener dependabilityperform monitor visual tool focu toolset research portabl flexibl usabl figur 2 give overview prospect applic illustr util servic embed realtim faulttoler system applic develop honeywel subset command control facil consid radar instal set sensor use detect incom threat eg enemi plane missil battl scenario hypothes form regard ident posit threat flight trajectori comput accordingli trajectori extrapol futur deadlin impos intercept time interv estim threat trajectori reachabl variou ground defens base estim appropri resourc weapon commit handl threat eventu weapon releas intercept threat servic requir support write applic come natur oper requir exampl anticip system load commun differ system compon differ box figur 2 must occur bound time ensur bound endtoend respons threat detect weapon releas realtim commun servic comput enforc predict determinist bound messag delay given applic traffic specif critic system compon hypothesi test threat identif high depend requir best met use activ replic compon rtcast export multicast membership primit facilit fault detect fault handl consist manag activ replic task similarli extrapol trajectori identifi threat trajectori extrapol plot impact time estim comput base access risk assess mask surveil intellig rout optim schedul assign weapon sensori input hypothesi threat test comput posit weapon base releas weapon figur 2 command control applic repres critic system state backup state need maintain continu updat repres current state within toler consist error margin primarybackup replic servic implement meet tempor consist requir final test tool decreas develop debug cost distribut applic rest paper organ follow section 2 describ gener approach integr armada servic microkernel framework also present experiment testb implement environ project subsequ section focu architectur design implement key commun middlewar servic armada section 3 introduc realtim commun servic section 4 present rtcast suit group commun faulttoler servic section 5 describ rtpb realtim primarybackup replic servic section 6 briefli discuss depend evalu valid tool develop project section 7 conclud paper 2 platform servic develop context armada project augment essenti capabl realtim microkernel introduc compos collect commun faulttoler test tool provid integr framework develop execut realtim applic tool implement separ multithread server describ experiment testb implement environ common aforement servic detail descript implement approach adopt variou servic given context particular servic 21 gener servic implement approach one common aspect differ middlewar servic distribut realtim system need use intermachin commun armada servic either includ layer top commun layer provid featur requir correct oper servic client exampl rtcast implement commun protocol perform multicast integr failur detect handl commun subsystem similarli realtim channel servic implement signal data transfer protocol reserv resourc transmit realtim data along commun path sinc commun seem warrant particular attent context project develop gener realtim commun subsystem architectur architectur view way structur design communicationori servic predict oppos servic architectur describ detail section 3 illustr exampl servic realtim channel armada commun servic gener layer top ip udpip use tcp main focu reliabl oppos predict timeli realtim commun protocol hand sensit timeli guarante perhap overrid reliabl requir exampl video conferenc process control occasion loss individu data item prefer receiv reliabl stream stale data facilit develop communicationori servic commun subsystem implement use xkernel objectori network framework origin develop univers arizona hutchinson peterson 1991 extens control alloc system resourc travostino et al 1996 advantag use xkernel eas compos protocol stack xkernel commun subsystem implement configur graph protocol object allow easi reconfigur protocol stack ad remov protocol detail xkernel found hutchinson peterson 1991 follow microkernel philosophi argu section 1 servic design userlevel multithread server client servic separ process commun server via kernel use user librari librari export desir middlewar api communicationori servic gener implement protocol stack lie top kernellevel commun driver xkernel framework permit migrat multithread protocol stack execut oper system kernel use featur implement server coloc microkernel coloc improv perform elimin extra context switch note advantag server coloc defeat purpos choos microkernel monolith oper system develop platform microkernel coloc server develop user space greatli reduc develop mainten cost ii select includ need user network applic applic devic driver protocol stack server microkernel librari librari stub stub user applic applic devic driver server coloc microkernel network librari librari stub stub userlevel server configur b coloc server figur 3 servic implement kernel accord applic requir effici sensit particular applic need microkernel support kernel thread prioriti thread execut kernel space default higher thread execut user space result thread run much predict manner servic get starv overload furthermor inkernel implement xkernel platform replac thread devic driver code run interrupt context featur reduc commun latenc make server less preemptabl migrat microkernel howev sinc code execut interrupt context kept minimum reduct preeptabl concern experi coloc code figur 3a 3b illustr configur userlevel server coloc server respect exampl server migrat kernel given context rtcast servic section 4 rtcast server develop user space figur 3a reconfigur integr kernel figur 3b whether server run user space coloc microkernel client process use servic api commun servic coloc kernel extra context switch tofrom userlevel server process save automaticallygener stub interfac user librari implement servic api microkernel server process stub hide detail kernel local commun mechan programm realtim servic thu make servic code independ specif underli microkernel 22 testb implement environ followingsect describ implementationof individu servic provid common context descript outlin specif underli implement platform testb compris sever pentiumbas pc 133 mhz connect cisco 2900 ethernet switch 10100 mb pc connect switch via 10 mb ethernet chosen mk 72 microkernel oper system open group og 1 research institut provid essenti underli realtim support servic mk microkernel origin base releas 25 mach oper system cmu fullfledg realtim os mk 72 support kernel thread prioritybas schedul includ sever import featur facilit provis qo guarante exampl mk 72 support xkernel provid unifi framework alloc manag commun resourc framework known cord commun object realtim depend sy tem travostino et al 1996 found particularli use implement realtim commun servic implement approach util function facil provid og environ augment support necessari standpoint portabl although mk72 research oper system cord support also avail mainstream oper system window nt thu softwar develop cord environ easili port nt fact port current underway port oper system linux difficult time present servic develop linux support kernel thread thu imposs implement multithread protocol stack insid linux kernel linux 22 howev expect full thread support cord support may replac appropri packet filter classifi incom traffic thu modif servic may port futur version linux well multithread oper system solari 3 armada realtim commun architectur armada provid applic witha commun architectur servic request util guaranteedqo connect two host section hilight architectur compon commun servic togeth set userspecifi polici implement sever realtim commun model common qossensit commun servic model follow three architectur requir perform isol connect set connect malici behavior overload one starv resourc other ii servic differenti assign differ prioriti connect class connect iii grace degrad presenc overload develop commun librari implement prioriti semant clip provid resourcemanag mechan satisfi aforement requir export abstract guaranteedr commun endpoint endpoint call clip guarante certain throughput term number packet sent via per period implement configur buffer accommod bursti sourc one connect 8or socket may bound clip case clip set asid enough processor bandwidth memori resourc endsystem guarante aggreg specifi throughput entir connect set differ clip may differ prioriti allow higher prioriti traffic proceed first overload condit exampl traffic particular applic middlewar servic bound high prioriti clip therebi allow applic servic receiv preced servic clip associ deadlin paramet deadlin specifi maximum commun subsystem respons time handl packet via particular clip clip librari implement traffic polic mechan well default admiss control polici disabl revert pure prioritydriven schedul overridden userspecifi altern admiss control polici detail clip given present armada realtim commun servic develop unicast commun 31 realtim commun servic use clip implement guaranteedqo commun servic call realtim channel ferrari verma 1990 kandlur et al 1994 realtim channel unicast virtual connect sourc destin host associ perform guarante messag delay avail bandwidth satisfi three primari architectur requir guaranteedqo commun mehra et al 1996 mainten perconnect qo guarante ii overload protect via perconnect traffic enforc iii fair besteffort traffic realtim commun via realtim channel perform three phase first phase sourc host sender creat channel destin host receiv specifi channel traffic paramet qo requir signal request sent via one intermedi node repli deliv revers direct success establish send messag channel constitut second phase sender done use channel must close channel third phase resourc alloc channel releas figur 4 illustr highlevel softwar architectur guaranteedqo servic endhost core functionalityof commun servic realiz via three distinct compon interact provid guaranteedqo commun applic use servic via realtim commun applic program interfac rtc api rtcop coordin endtoend signal resourc reserv reclam connect setup teardown clip perform runtim manag resourc qossensit data transfer sinc platformspecif overhead must character qo guarante ensur execut profil compon ad measur parameter overhead incur commun servic particular platform make paramet avail admiss control decis control path taken architectur connect setup shown figur 4 dash line data transfer via rtc api clip indic solid line discuss salient featur architectur compon servic along interact compon provid qo guarante also describ compon use realiz particular servic model reserv applic video resourc rtcop clip rt control audio signal data transfer realtim commun api lower protocol stack layer resourc requir paramet 1 memori buffer 2 pkt per period resourc manag mechan polici qo model overhead execut queryrepli clip qo model translat local resourc execut profil admiss control polici figur 4 realtim commun servic architectur implement consist four primari architectur compon applic program interfac rtc api signal resourc reserv protocol rtcop support resourc manag runtim data transfer clip execut profil support dash line indic interact control path data path denot solid line 32 rtc applic interfac program interfac export applic compris routin connect establish teardown messag transmiss recept data transfer establish connect initi support routin tabl 1 list main routin current avail rtc api api two part top half interfac applic respons valid applic request creat intern state bottom half interfac rtcop signal ie connect setup teardown clip qossensit data transfer design rtc api base larg part wellknown socket api bsd unix connect endpoint pair ipaddr port form ip address host ipaddr unsign 16bit port port uniqu host similar inet domain socket endpoint addit uniqu endpoint data transfer applic may use sever endpoint receiv signal request applic applic will receiv realtim traffic regist signal port name servic use wellknown port applic wish creat connect must first locat correspond receiv endpoint signal initi signal data transfer routin tabl 1 counterpart socket api exampl routinertcregisterport correspond invocationof bind listen success rtcacceptconnect correspond accept similarli routin rtccreateconnect rtcdestroyconnect correspond connect close respect key aspect distinguish rtc api socket api receiv applic explicitli approv connect establish teardown regist tabl 1 routin compris rtc api tabl show util signal data transfer function constitut applic interfac tabl show function name paramet endpoint invok brief descript oper perform routin paramet invok function perform rtcinit none servic initi rtcgetparamet chan id param type queri paramet specifi realtim connect rtcregisterport local port agent function receiv regist local port agent signal rtcunregisterport local port receiv unregist local signal port rtccreateconnect remot hostport qo sender creat connect given burst size paramet remot delay endpoint return connect id rtcacceptconnect local port chan id receiv obtain next connect remot hostport alreadi establish specifi local port rtcdestroyconnect chan id sender destroy specifi realtim connect rtcsendmessag chan id buf ptr sender send messag specifi realtim connect rtcrecvmessag chand id buf ptr receiv receiv messag specifi realtim connect intent receiv signal request applic specifi agent function invok respons connect request function implement receiv applic determin whether suffici applicationlevel resourc avail connect reserv necessari resourc eg cpu capac buffer etc new connect may also perform authent check base request endpoint specifi signal request unlik establish tcp connect exampl complet transpar peer applic qosparamet pass rtccreateconnect connect establish describ linear bound arriv traffic gener process cruz 1987 anderson et al 1990 specifi maximum messag size mmax byte maximum messag rate rmax me sagessecond maximum burst size bmax messag paramet mmax rmax use creat clip correspond guarante throughput burst size bmax determin buffer size requir clip follow describ endtoend signal phase coordin endtoend resourc reserv 33 signal resourc reserv rtcop request creat destroy connect initi realtim connect ordin protocol rtcop distribut endtoend signal protocol illustr figur 5a rtcop compos primarili two rel independ modul request repli handler manag signal state interfac admiss control polici commun modul handl task reliabl forward signal messag separ allow simpler replac admiss control polici connect state manag algorithm without affect commun function note signal connect establish nonrealtim reliabl function qo guarante appli data sent establish connect signal request sent besteffort traffic request repli handler gener process signal messag interfac rtc api clip reserv reclaim resourc need process new signal request request handler invok multistep admiss control procedur decid whether suffici resourc avail new request new connect request travers node rout sourc destin request handler invok admiss control decid new connect local admit upon success admiss handler pass request next hop connect admit node rout repli handler destin node reserv requir endsystem resourc creat clip new realtim channel gener posit acknowledg revers path sourc notif receiv hop underli networklevel protocol commit network resourc link bandwidth use assum local router support acknowledg receiv sourc repli handler notifi applic connect establish creat sourc clip commun modul handl basic task send receiv signal messag well forward data packet applic protocol process perform commun modul control path process signal messag data path function simpl transport pro 2realtim commun api handler repli request handler data transfer clip system interfac resourc requestsrepli rout engin lower protocol layer request messag data modul commun admiss control modul connect link alloc comm thread messag buffer fragment clip link schedul realtim commun api transmissionrecept system interfac resourc messag lower passiv resourc comm thread schedul yieldblock packet cpu alloc rtcop structur b clip structur figur 5 intern structur interfac figur show intern function structur rtcop clip along respect interfac compon data control path repres solid dash line respect tocol forward data packet behalf applic much like udp note earlier signal messag transport besteffort traffic deliv reliabl use sourcebas retransmiss reliabl signal ensur connect consid establish connect state success instal suffici resourc reserv node along rout commun modul implement duplic suppress ensur multipl reserv instal connect establish request similar consider appli connect teardown node along rout must releas resourc free connect state consist connect state manag node essenti function rtcop rtcop export interfac rtc api specif connect establish teardown request repli select logic port connect endpoint rtc api use latter reserv signal port respons request applic exampl rtcop also interfac underli rout engin queri appropri rout initi signal new connect gener rout engin find rout support desir qo requir howev simplic use static fix rout connect sinc suffic demonstr capabl architectur implement 34 clipsbas resourc schedul data transfer clip implement necessari endsystem resourcemanag mechan realiz qossensit realtim data transfer establish connect separ clip creat two endpoint realtim channel intern clip messag queue buffer messag gener receiv correspond channel commun handler thread process messag packet queue stage packet wait transmit receiv clip librari implement endsystem key function compon illustr figur 5b qossensit cpu schedul commun handler thread clip execut continu loop either dequeu outgo messag clip messag queue fragment sourc host dequeu incom packet clip packet queue reassembl messag destin host messag must sent within given local delay bound deadlin achiev best schedul util commun handler schedul base earliestdeadlinefirst edf polici sinc oper system provid edf schedul clip implement userlevel schedul layer top oper system schedul userlevel schedul run static prioriti maintain list thread regist sort increas deadlin given time clip schedul block regist thread use kernel semaphor except one earliest deadlin consid run state run thread allow execut explicitli termin yield use primit export clip schedul block thread kernel semaphor signal thread next earliest deadlin preemption implement via clip primit invok upon send packet primit yield execut urgent thread one pend arrang implement edf schedul within singl protect domain resourc reserv commun handler implement clip execut userdefin protocol stack return clip code process messag packet ideal clip assign cpu budget prevent commun client monopol cpu sinc processor capac reserv avail oper system budget indirectli express term maximum number packet process within given period handler block process maximum number packet allow within state time period polic associ budget connect handler facilit traffic enforc handler schedul execut budget nonzero budget replenish next period invoc handler mechan ensur misbehav connect polic traffic specif qossensit link bandwidth alloc modern oper system typic implement fifo packet transmiss commun link avoid fifo queu kernel network devic clip implement dynam prioritybas link schedul bottom userlevel protocol stack schedul outgo packet priorit fashion link schedul implement edf schedul polici use prioriti heap outgo packet prevent fifo accumul outgo packet kernel eg link busi clip link schedul releas new packet notifi complet previou packet transmiss besteffort packet maintain separ packet heap within userlevel link schedul servic lower prioriti realtim clip figur 6 demonstr traffic polic traffic isol perform differenti realtim channel detail evalu found mehra et al 1998 offer load channel 1 kbs50150250deliv throughput kb measur throughput ch 1 measur throughput ch 2 specifi throughput ch 1 specifi throughput ch 2 50 100 150 200 250 300 350 offer load besteffort channel kbs50150250deliv throughput kb isol realtim channel b isol besteffort realtim figur 6 traffic isol left graph show real time channel 1 polic traffic specif disallow violat specif traffic realtim channel 1 affect qo realtim channel 2 right graph show increas besteffort load interfer realtim channel throughput 4 rtcast group commun servic previoussect introduc architectur armada realtim commun servic architectur set ground implement realtim servic qossensit commun second thrust project focus collect servic provid modular compos middlewar constructingembed applic armada middlewar divid two rel independ suit servic ffl rtcast group commun servic ffl rtpb realtim primaryback replic servic section present rtcast suit group commun faulttoler ser vice section 5 describ rtpb realtim primarybackup replic servic 41 rtcast protocol qossensit commun servic describ section 3 support multicast channel multicast import eg effici data dissemin set destin maintain replic state faulttoler system consist replic state desir membership algorithm also need rtcast complement aforement unicast commun servic mulitcast membership servic realtim faulttoler applic rtcast base around process group paradigm process group widelystudi paradigm design distribut system asynchron birman 1993 amir et al 1992 van reness et al 1994 mishra 1993 synchron kopetz grunsteidl 1994 amir et al 1995 cristian et al 1990 en viron approach distribut system structur group cooper process provid servic applic process group may use exampl provid activ replic system state rapidli dissemin inform applic collect process two key primit support process group distribut environ faulttoler multicast commun group membership coordin process group must address sever subtl issu includ deliv messag group reliabl fashion maintain consist view group membership detect handl process commun failur multicast messag atom global order consist replic state guarante rtcast especi design realtim applic realtim applic time failur may damag processor failur thu membership algorithm aggress ensur time progress process group exampl ensur atom messag deliveri rtcast requir acknowledg everi messag messag deliveri immedi without need addit round messag transmiss ensur messag receiv consist de tinat rtcast design support hard realtim guarante without requir static schedul comput priori applic task messag instead onlin schedul analysi compon perform admiss control multicast me sage envis propos multicast membership protocol part larger suit middlewar group commun servic form compos architectur develop embed realtim applic illustr figur 7 rtcast suit servic includ time atom multicast group membership servic admiss control servic first two tightli coupl thu consid singl servic clock synchron typic requir realtim protocol enforc clock synchron servic support portabl virtual network interfac layer export uniform network abstract ideal interfac would transpar handl differ network topolog differ connect time bandwidth characterist export gener network abstract upper layer network assum support unicast datagram servic final top layer provid applic program interfac realtim process group rtcast support boundedtim messag transport atom order multicast within group commun process presenc processor crash commun failur guarante agreement membership among commun processor ensur membership chang eg result processor join departur atom order respect multicast messag rtcast assum process commun environ send messag thu fail process exampl advers affect environ via hidden channel rtcast proce sender logic ring take turn multicast messag network processor turn come logic token arriv time wait last messag sender multicast heartbeat use crash detect heartbeat receiv immedi predecessor also serv logic token destin detect miss messag use sequenc number unreli unicast commun virtual network interfac realtim process group api admiss control schedul analysi time atom multicast commun group membership servic clock synchron figur 7 softwar architectur rtcast middlewar servic processor detect receiv omiss crash processor turn come check miss heartbeat elimin crash member group membership multicast membership chang messag token ring sent messag natur order defin token rotat reconstruct messag order receiv use protocol layer rtcast detect outoford arriv messag swap thu forward rtcast correct order rtcast ensur correct member reach agreement replic state formul problem one group membership sinc state process determin sequenc messag receiv processor detect messag receiv omiss take group thu maintain agreement among remain one realtim system one may argu process wait messag arriv miss deadlin anyway accept elimin suffer receiv omiss 2 distinct featur rtcast processor omit messag deliv messag soon arriv without compromis protocol semant thu exampl reliabl multicast use dissemin critic messag replic server one replica suffer receiv omiss rtcast elimin replica group deliv messag remain replica immedi contrast delay deliveri messag replica receiv approach motiv observ realtim system may better sacrific one replica group delay messag deliveri potenti caus replica miss hard time constraint final membership chang commun exclus membership chang messag use multicast mechan sinc messag multicast atom order membership chang guarante agreement membership view architectur standpoint rtcast oper trigger two differ event type name messag recept token recept timeout therefor logic 1 msg recept handler 2 state run 3 msg member 4 miss msg crash els 5 deliv msg 6 els msg differ member 7 miss msg crash els 8 check miss msg processor current last sender 9 miss msg 10 deliv current msg 11 els crash 12 els join msg nonmemb 13 handl join request 14 state join msg valid join ack 15 need join ack 16 wait addit join ack 17 els state run 18 end figur 8 messag recept handler structur two event handler one event type messag recept handler figur detect receiv omiss deliv messag order applic servic protocol control messag token handler figur invok token receiv token timeout expir detect processor crash send membership chang notif well let client process send messag processor finit token hold time 42 rtcast design implement section describ major issu design implement rt repres group commun servic thorough perform evalu servic report abdelzah et al 1996 abdelzah et al 1997 rtcast applic implement test local ethernet ethernet normal unsuit realtim applic due packet collis subsequ retransmiss make imposs impos determinist bound commun delay howev sinc use privat ethernet ie rtcast protocol exclus access medium one machin send messag given time name token holder prevent collis guarante ethernet driver alway succe transmit packet first attempt make messag commun delay determinist admiss control servic describ previous take 1 token handler 2 state run 3 processor p current membership view 4 heartbeat seen predecessor incl p 5 remov p group view 6 multicast new group view 7 send queu messag 8 mark last msg 9 send heartbeat msg 10 state join 11 send join msg 12 end figur 9 token handler advantag predict eg creat appropri clip manag endsystem resourc host make realtim guarante messag sent rtcast 421 protocol stack design rtcast protocol design modular individu servic could ad chang remov without affect rest protocol servic design separ protocol layer within xkernel hutchinson peterson 1991 protocol framework xkernel ideal choic implement rtcast middlewar servic applic requir easili met simpli reconfigur protocol stack add remov servic necessari rtcast implement use follow protocol layer admiss control admiss control schedul analysi acsa layer distribut protocol keep track commun resourc entir process group protocol transpar creat clip host run process group ensur commun throughput guarante timebound messag process support multipl either priorit perform isol process group machin creat clip correspond prioriti correspond minimum throughput specif realtim guarante need layer omit protocol stack reduc overhead commun proceed besteffort basi rtcast rtcast protocol layer encompass membership logic token ring atom order servic describ section 4 multicast transport protocol implement unreli multicast abstract independ underli network rtcast use multicast transport layer send messag group without worri whether physic medium provid unicast broadcast true multicast support detail messag actual sent network hidden higher layer multicast transport user kernel user kernel kernel ethernet driver kernel ethernet driver ip acsa rtcast mcast rtcast mcast ip asca cord userlevel server b split inkernel cord server applic applic figur 10 rtcast protocol stack implement protocol layer must modifi rtcast run differ type network figur show full protocol stack implement platform 422 integr mach kernel figur 10 show protocol stack repres core servic migrat mach kernel actual rtcast develop took place user space facilit debug final coloc within mach kernel sever perform advantag first group commun protocol high amount cpu overhead maintain group state enforc messag semant run kernel rtcast protocol run highest prioriti minim commun latenc due process time second current implement mk 72 oper system support realtim schedul capac reserv experi show process run user level starv cpu time period second would disastr rtcast predict commun run kernel protocol thread get starv significantli schedul much predict manner oper system final problem mk 72 implement xkernel thread shepherd messag protocol stack queu run differ order messag arriv network result outoford messag must buffer reorder maintain total order guarante provid protocol buffer reorder messag also delay crash detect sinc way know miss messag queu somewher protocol stack sender suffer failur run protocol kernel messag thread interrupt driven run immedi arriv network messag reorder problem occur protocol perform improv 0almost order magnitud execut kernel exampl execut userlevel minimum token rotat time averag 26 ms 57 ms 96 ms group one two three member respect run kernel measur yield token rotat time 043 ms 102 ms 155 ms found improv extend aspect protocol perform note figur suggest potenti scalabl problem larger group size hundr node problem attribut need softwar token pass integr hardwar token pass scheme fddi yield much better perform altern improv scalabl current investig approach base group composit larger process group form composit smaller one research present underway initi result show composit process group scale much better monolith one anoth import focu develop group commun middlewar design robust api would allow applic develop take advantag servic quickli easili rtcast api includ bandwidth reserv call ii process group membership manipul function iii besteffort multicast commun primit iv reliabl realtim multicast bandwidth reserv use host ensur multicast connect dedic cpu capac network bandwidth ie minimum token hold time token hold time token rotat period specifi commun bandwidth allot node node set asid enough endsystem resourc util allot commun bandwidth creat clip acsa layer correspond throughput therebi provid schedul guarante membership manipul function allow process join leav multicast group queri current group membership creat group etc two type group commun realtim multicast commun guarante endtoend respons time besteffort advantag use besteffort connect optim throughput oppos meet individu messag deadlin thu servic protocol stack faster averag eg permessag admiss control varianc queu delay higher collabor group research honeywel technolog center implement subset faulttoler realtim distribut applicationdescrib section 1 use rtcast protocol use insight gain motiv applic abl refin api provid requir function maintain simpl interfac easi program base experi applic use protocol also design higherlevel servic librari link applic use rtcast api 3 concern resourc manag faulttoler system provid higherlevel abstract protocol commun primit servic librari provid logic process node resourc pool transpar util rtcast group commun servic abstract provid conveni way applic develop reason structur redund manag failur handl polici rtcast actual work maintain replica consist 5 realtim primarybackup rtpb replic servic previou section introduc middlewar servic activ replic section present overal architectur armada realtim primarybackup replic servic first give introduct rtpb system describ servic framework final discuss implement servic believ meet object 51 introduct rtpb keep larg amount applic state consist distribut system state machin approach may involv signific overhead mani realtim applic howev toler minor inconsist replic state thu reduc redund manag overhead primarybackup replic exploit applic data semant allow backup maintain less current copi data resid primari applic may distinct toler stale differ data object suffici recent data backup safe supplant fail primari backup reconstruct consist system state extrapol previou valu new sensor read howev system must ensur distanc primari backup data bound within predefin time window data object may distinct toler far backup lag behind object state becom stale challeng bound distanc primari backup consist compromis minim overhead exchang messag primari backup 52 servic framework import issu design replic servic consist semant one categori consist semant particular relev primarybackup replic realtim environ tempor consist consist view seen perspect time continuum two type tempor consist often need ensur proper oper primarybackup replic realtim data servic system one extern tempor consist object extern world imag server interobject tempor consist differ object event primarybackup system said satisfi extern tempor consist object timestamp server later predetermin time timestamp client real data word order provid meaning correct servic state primari server must close reflect actual world consist also need backup backup success replac primari primari fail consist restrict place backup may tight primari must within toler rang intend applic interobject tempor consist maintain object pair tempor tempor distanc two neighbor updat object j respect observ primari backup although use practic applic extern tempor consist concept easi see true interobject tempor consist illustr notion interobject tempor consist consid airplan take time bound acceler plane lift plane air runway limit length airplan keep acceler runway indefinit without lift primarybackup replic realtim data servic interobject tempor consist constraint object pair place backup differ place primari 53 rtpb implement tempor consist model realtim primarybackup rtpb replic servic develop zou jahanian 1998 practic version system implement model built follow compos model rtpb servic implement independ userlevel xkernel base server mk 72 base platform system includ primari server backup server client applic resid machin primari client continu sens environ period send updat primari client access server use librari util mach ipcbas interfac primari respons back data backup site limit inconsist data two site within requir window follow assumpt made implement ffl link failur handl use physic redund network partit avoid ffl upper bound exist commun delay primari backup miss messag deadlin treat commun perform failur ffl server assum suffer crash failur figur show system architectur xkernelprotocol stack replic server bottom five layer rtpb ethdrv make xkernel protocol stack top level stack realtim primarybackup rtpb protocol serv anchor protocol xkernel protocol stack provid interfac xkernel base server connect rest protocol stack xkernel uniform protocol interfac underli transport protocol udp sinc udp provid reliabl deliveri messag need use explicit acknowledg necessari top two layer primarybackup host client applic primari host interact backup host underli rtpb protocol two ident version client applic resid primari backup host respect normal client version primari run osf mach kernel osf mach kernel ethernet backup rtpb api udp ip primari rtpb api udp ip xkernel path rtpb server rtpb server figur 11 rtpb architectur server protocol stack backup take case primari failur also activ backup client version bring recent state client applic interact rtpb system mach api interfac develop system interfac enabl client creat destroy manipul queri reliabl object ie backedup server specif rtpb creat destroy creat object destroy object rtpb system rtpb regist regist object system rtpb updat rtpb queri updat queri object final list return list object alreadi regist rtpb system detail admiss control updat schedul failur detect recoveri appear recent report zou jahanian 1998 54 rtpb perform follow graph show rtpb respons time client request tempor distanc primari backup graph depict function number object admit system four differ client write rate 100 300 700 1000 millisecond graph show fast respons time client request rang 200 400 mi crosecond mainli due decoupl client request process updat backup graph b show rtpb keep backup close primari term tempor distanc correspond data copi replic object graph distanc rang 10 110 millisecond well within rang toler realtim applic two graph show rtpb inde provid fast respons client request maintain backup close primari system state number object accept primary10003000cli respons time microsecond window ms window ms window ms window ms 1000 2000 3000 4000 5000 number object accept primary5001500averag maximum distanc respons time client b primarybackup distanc figur 12 rtpb perform graph 6 evalu tool third thrust armada project provid tool valid evalu timeli fault toler capabl target system two tool develop date orchestra messagelevel fault inject tool valid evalu commun middlewar protocol cogent network traffic workload gener follow two subsect describ two tool briefli 61 orchestra armada project primarili concern develop realtim distribut middlewar protocol commun servic ensur distribut system commun protocol meet prescrib specif grow challeng confront softwar develop system engin meet challeng particularli import applic strict depend timeli constraint orchestra fault inject environ use perform fault inject commun protocol distribut applic orchestra base simpl yet power framework call scriptdriven probe fault inject emphasi approach experiment techniqu intend identifi specif problem protocol implement rather evalu system depend statist metric fault coverag eg arlat et al 1990 henc focu develop fault inject techniqu employ studi three aspect target protocol detect design implement error ii identifi violat protocol specif iii obtain insight design decis made implementor orchestra approach fault inject layer insert commun protocol stack protocol test messag exchang protocol particip pass fault inject layer path tofrom network time messag sent orchestra run script call send filter messag manner receiv filter invok messag receiv network destin target protocol script perform three type oper messag ffl messag filter intercept examin messag ffl messag manipul drop delay reorder duplic modifi messag ffl messag inject probe particip introduc new messag system orchestra toolset mk 72 platform base portabl fault inject core develop cordsbas xkernel framework provid opengroup tool implement xkernel protocol layer place level xkernel protocol stack tool use perform experi group interprocess commun gipc servic open group middlewar realtim channel servic develop part armada project detail orchestra found sever recent report eg dawson et al 1996 dawson et al 1997 62 cogent control gener network traffic order demonstr util armada servic necessari evalu rang oper condit mani protocol develop reli commun subsystem import evalu rang realist background traffic gener traffic fairli difficult sinc traffic characterist vari wide depend environ servic deploy end weve develop cogent control gener network traffic cogent network synthet workload gener evalu system network perform control reproduc fashion base simpl clientserv model allow user flexibl model network sourc order evalu variou aspect network distribut comput implement c lexyacc front end current version tool take high level specif distribut workload gener highli portabl c code client server specifi user select number distribut use model varieti network sourc poisson paxson floyd 1994 paxson 1994 log normal paxson floyd 1994 pareto leland et al 1994 crovella bestavro 1996 garret willing 1994 log extrem paxson 1994 tool gener necessari compil distribut script build run distribut workload cogent also implement java gener gener code java base portabl java implement simplifi compil distribut workload consider also plan address cpu issu order model common activ end host well anoth featur ad abil client server run tracedriven mode run web server tcpdump mccann jacobson 1993 log file final implement addit sourc model order keep current literatur 7 conclus paper present architectur current statu armada project conduct univers michigan collabor honeywel technolog center describ number commun middlewar servic develop context project illustr gener methodolog adopt design integr servic modular compos armada middlewar realiz set server top microkernelbas oper system special attent given commun subsystem sinc common resourc middlewar servic develop propos gener architectur qo sensit commun also describ commun servic implement architectur current redesign exist command control applic benefit armada middlewar applic requir bound time endtoend commun delay guarante commun subsystema well faulttoler replic backup servic provid rtcast group commun membership support primarybackup replic servic test tool orchestra help assess commun perform verifi requir commun semant control workload gener use cogent assist creat load condit interest may difficult exercis via regular oper applic servic tool design independ underli microkernel commun subsystem choic experiment platform base larg rich protocol develop environ provid xkernel cord better portabl extend commun subsystem provid socketlik api also investig scalabl servic develop scale larg embed system may depend way system construct smaller unit look appropri way defin gener structur system compon compos larg architectur compon certain desir properti global preserv develop token oper system composit enabl build predict analyt semant model larger system properti individu constitu note 1 open group formerli known open softwar foundat osf 2 lower commun layer may support bound number retransmiss 3 api servic librari rtcast protocol avail httpwwweecsumichedurtclarmadartcastapihtml r lightweight multicast realtim process group tr xkernel process group approach reliabl distribut comput ttpa protocol faulttoler realtim system selfsimilar natur ethernet traffic extend version empir deriv analyt model widearea tcp connect analysi model gener selfsimilar vbr video traffic totem singler order membership protocol selfsimilar world wide web traffic experi six commerci tcp implement use softwar fault inject tool faulttoler advanc autom system realtim commun multihop network test faulttoler realtim distribut system via protocol fault inject rtcast structur commun softwar qualityofservic guarante realiz servic guaranteedqo commun microkernel oper system realtim primarybackup rtpb replic tempor consist guarante design perform horu lightweight group commun system