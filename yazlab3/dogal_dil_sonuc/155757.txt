templatedriven interfac numer subroutin paper describ set interfac numer subroutin type short often onelin descript allow one solv problem applic domain includ leastsquar data fit differenti equat minim root find integr approach templatedriven program make easi build interfac simpl one take hour construct day suffic build complex program describ b introduct numer subroutin packag one oldest effect approach softwar use expert familiar good librari rapidli combin test robust compon use softwar effect expert howev larg librari difficult casual user suppos instanc programm desir find root nonlinear equat usual entail look appropri routin modifi sampl program compil program link appropri librari test possibl debug code interpret output find answer process easili take hour two rice 1989 p 2 summar problem user must write code target program languag creat input output data structur invok procedur code usual lengthi compar invoc librari procedur mani solut propos problem gill murray picken wright 1979 describ principl construct subroutin librari easi use larg environ matlab provid eleg interfac sophist softwar librari environ excel expert novic user requir mani programmeryear build wish make easi individu programm quickli build effect interfac softwar librari paper describ set program provid interfac port subroutin librari describ fox 1984 program solv popular form common numer prob lem instanc dialog first find root function sinx interv 3 4 find root x interv 01 09 maria fernandez current depart comput scienc princeton univers princeton nj 08544 electron address jlbresearchattcom mffprincetonedu bwkresearchattcom nlsresearchattcom dollar sign system prompt behind scene root program use templat write compil execut fortran program call appropri subroutin refer approach templatedriven program undertook construct similar interfac part port librari follow design goal interfac access novic yet power enough conveni experienc user problem specif succinct interfac easi build hour dozen line code day two hundr line paper illustr techniqu sever major part port librari section 2 introduc templatedriven approach build interfac section 3 describ leastsquar data fit detail section 4 survey sever problem domain section 5 describ complex problem domain differenti equat applic templatedriven program describ section 6 conclus offer section 7 2 templatedriven program section introduc templatedriven approach build interfac studi implement root program saw earlier program call port function dzero find zero function specifi interv document function librari illustr use function small exampl gener exampl templat program call doubl precis dzero extern f stop doubl precis function fx doubl precis f x return templat three paramet exp lo hi surround atsign root program read three argument command line substitut templat produc fortran program compil execut fortran program write answer straightforward implement approach mani system cours tailor implement comput environ numer routin port librari call routin fortran program interfac implement awk bodi awk implement minim root program begin dotemplateroottplt junkf subarr systemf77 junkf lport 2junkerr aout exit aho kernighan weinberg 1988 describ awk program languag first three line read commandlin argument fourth line call dotempl function instanti templat roottplt fortran file junkf fifth line compil program execut object code write answer dotempl function pass name templat file name output file substitut array namevalu pair trivial implement function dotemplatetemplatefil outfil subarr getlin templatefil subarr print 0 outfil appendix describ complet function instanti templat minim program correctli handl correct program implement 9line templat 14 line awk complet root program care error check command line precis three argument fortran compil success report error messag complet root program includ templat code error check templat interpret requir 40 line line librari templat function root program easi implement templatedriven awk program hard implement directli fortran one possibl fortran implement pars express interpret run time anoth choic write compil fortran program within fortran neither choic particularli appeal implement parcel job right tool awk program interpret templat unix shell call fortran compil compil express port librari suppli effect solver although weve use tool conveni home system similar tool could use environ implement essenti idea simpl concis interfac use templatedriven program 3 leastsquar regress datafit problem given set x pair assum model equat vector real goal find vector p minim sum squar residu min librari offer sever routin variou form task base excel algorithm denni gay welsch 1981 wide known nl2sol provid access algorithm program call l2fit least squar fit illustr program file contain data travel salesman tour point set randomli distribut unit squar x valu number point valu length certain tour point reason believ tour length grow c real number synonym model type follow command ten vax8550 cpu second later program write comput valu b c alphabet order second line side effect comput l2fit produc troff output file l2fitout display figur 1 command line l2fit troff s06 lxi abxc datatourlend least squar regress type unweight input data file datatourlend input express abxc canon paramet final 0630579 0733034 0499881 standard error 012083 00166733 000240624 algorithm termin x rel function converg 100 1000 100001050 circl input xy pair line least squar fit 100 1000 10000 circl residu f xp figur 1 l2fit output tsp data text top figur 1 summar comput command line type user repeat indispens search pile l2fit run case lxi flag request graph plot logarithm x scale data file datatourlend two flag ad command line shown earlier prepar l2fitout file inclus troff document troff appli appropri document product program s06 shrink graph 60 default size final valu paramet display along standard error multipli 196 give 95 confid interv top graph display input data fit function residu bottom graph quit wellbehav appear decreas valu x grow roughli normal distribut two graph togeth give us confid tour length grow next command therefor new l2fitout file includ paper show comput valu b quit close old valu standard error decreas 0121 0044 b decreas 00167 00010 graph essenti unchang exampl typic user view session l2fit l2fit provid follow servic behind scene use templat write fortran program call appropri port routin compil program check fortran compil statu find error input express execut program read interpret output leastsquar routin valu extract directli other requir process instanc standard error squar root diagon covari matrix perform certain straightforward data process task check line input file contain two numer field count number paramet express determin larg make vector p sort x valu draw function output graph use anoth templat prepar summari page l2fitout templat use troff languag typeset grap languag graphic display data describ bentley kernighan 1986 perform minor translat among variou languag use variabl input express replac p1 fortran program comput valu grap output fortran exponenti oper grap oper eqn oper sup properli exchang grap log function return baseten logarithm replac natur logarithm function mechan job make much easier faster use leastsquar fit routin port importantli l2fit support better data fit automat gener graphic display along numer answer figur contain second exampl l2fit output case x valu number object search tree valu correspond averag number node visit search theori suggest logarithm growth one possibl tri function form ten observ x valu w flag call weight regress x valu assign mean valu togeth weight invers proport sampl standard deviat x primari graph show best fit equat x accur descript data note small varianc larger x valu give greater weight fit better region weight residu reason dispers mean show great deal structur data comput paramet littl mean pictur show model poor second experi fit model c data show data accur describ 192 260x 039 appendix describ l2fit detail l2fit unix system filter may combin tool system instanc one may desir fit data exponenti model accomplish command command line l2fit troff s06 w lx ablogx 1 1 datakdnodesd least squar regress type weight input data file datakdnodesd input express ablogx canon paramet final 15621 0281858 standard error 0484768 00440454 algorithm termin x rel function converg 100 1000 10000 1000001418 circl input xy pair line least squar fit 100 1000 10000 100000 5circl weight residu f xpstddevx figur 2 l2fit output search tree data mathemat model underli leastsquar regress assum residu error independ chosen normal distribut error normal logarithm scale howev one take logarithm variabl perform regress command print log1 log2 datafil l2fit lxi awk program take logarithm field input file awk program use mani common task data analysi filter subset data reexpress data peopl use l2fit perform singl fit singl data set extrem built script perform dozen l2fit regress combin singl troff output file singl program cover possibl case data fit l2fit miss desir featur instanc one might want specifi fortran routin function fit underli nl2sol program easili handl function mani variabl l2fit interfac restrict singl independ variabl x interest user use l2fit similar problem flag leav temporari file may use templat solv complex problem appendix describ implement l2fit detail simpl version l2fit perform leastsquar regress calcul paramet prepar graphic summari implement 50line awk program 40line fortran templat complet l2fit 330line awk program use 45line fortran templat also use 60line troff grap templat produc output 4 survey problem domain section survey templatedriven interfac port routin sever problem domain start program use format lower bound upper bound int program perform numer integr numer approxim 1 e 1x dx default error toler adjust input flag saw root program earlier invoc find root x interv 01 09 want insight function plot interv command show x exp1x1logx 1 9 produc file showout contain pictur like show mani option l2fit logarithm scale output suitabl troff input save temporari file text label etc well option chang number point function plot sophist version show plot multipl equat x data file relat smooth program comput smooth function input x data set output set x smoothx pair produc pictur smooth function sideeffect purpos numer function valu use plot feval program function evalu comput valu feval given singl fortran express read sequenc x valu input print correspond output valu program unix system input termin type controld feval program paper design use interact min program perform multivari minim region specifi upper lower bound variabl first appli favorit univari function interv variabl minim name b c etc l2fit rang given inequ b5 c10 also work first output valu real valu function mini mize second valu function real substanti input file use long format field given separ line problem 5 hock schittkowski 1981 min first four line comment fifth line contain express minim next two line give bound last two line specifi start valu two variabl file name hock5 invok command five program sketch section straightforward implement templatedriven awk program share librari awk function contain 150 line code shorter implement l2fit also use librari beyond librari code feval take 6 line awk root int implement line includ 10line fortran templat show take 110 line 30line troffgrap templat min take 180 line 50line fortran templat 5 differenti equat simpl problem domain seen far simpl descript turn differenti equat elementari problem difficult describ problem descript complic even though often reli heavili convent abbrevi appropri domain goal section present detail program rather give flavor succinct descript complic mathemat object start consid solut ordinari differenti equat ode explicit form interv start stop f vectorvalu function time solut vector xt given initi condit xt start problem typic uniqu solut exam ple ode system solut ode c solv numer command ode var sc ode sc cs x 0 1 0 1 interfac use ode solver port librari field command group namevalu phrase phrase consist one field usual identifi first field phrase ode name underli numer softwar also name interfac var assign name c depend variabl ode determin compon f ode system solv case x initi condit depend variabl xt start time interv command convert 60 line ratfor fortran preprocessor dialect 140line awk program awk script ode interfac initi written coupl hour addit hour ad control initi time step error recoveri etc solv complic problem consid broad class partial differenti equat pde one space variabl semilinear diverg form x ut x vector pde variabl f vectorvalu function argument etc boundari condit form b l b r vectorvalu function start consid heat equat temperatur variabl equat time rang space rang 0 x 1 initi condit t0 boundari condit tt initi boundari condit conflict solut pde approxim erfcx2t thu default initi timestep e e machin round error roughli 510 9 vax archi tectur first plot unit spike width roughli evolut system final solut shown 105the code automat gone 2 mesh point 33 enough model nasti function first time step default 01 accuraci solut final relax equilibrium valu 1 x time need graph produc command sketch field command describ phrase poss program name partial ordinari differenti equat space smooth spline name deriv post partial ordinari differenti equat space time var assign singl pde variabl name name must upper case af equat given form f letter specifi differenti x txtt state partial respect x bc specifi boundari condit left right separ charact left condit tt right tt phrase 0 1 give rang next phrase give rang x u specifi initi condit u0 underli port softwar gener necessari jacobian inform partial deriv f bc respect depend variabl u u etc finitediffer method thu user need provid inform crucial success interfac specifi partial deriv cumbersom user user need exact instead approxi mate deriv interfac use mapl comput symbol char et al 1988 describ mapl although descript heat equat less transpar naiv user much succinct tradit approach problem specif translat 170 line ratfor awk program perform translat 220 line long origin written afternoon sever addit halfhour session sinc ad bell whistl abl set storag limit chang integr method built interfac sever kind differenti equat solver softwar underli poss adapt pde solver one space variabl base adapt mesh spline fitter fix mesh pde solver post dynam determin mesh use obtain solut desir accuraci anoth program solv pde use fix mesh base extens post softwar anoth interfac use continu code solv problem becom difficult paramet chang interfac solv stiff ordinari differenti equat implicit form iod solver port librari benvenuti et al 1991 use interfac solv number problem includ driftdiffus energi balanc fluid dynam model semiconductor devic behavior experi built significantli sophist interfac port pde solver figur 3 describ pde four variabl use semiconductor devic model gracious suppli bill coughran specif use notat dconx denot conx allow pass complet inform partial deriv underli solver wherea earlier code alway use finitediffer deriv complet figur 4 show pde describ origin interfac togeth help unix shell name paramet program process descript figur 3 construct use languag develop tool describ kernighan pike 1984 chapter 8 serv interfac three differ relat port routin handl ode implicit ode pde program implement 160 line lex lexic analysi 1070 line yacc pars 2100 line c 250line fortran templat file could probabl shorten half code style use awk program addit handl syntact structur shown program perform extens error check instanc identifi line number sourc file fortran syntax error interfac also ensur variabl equat appropri type equat also give use error messag earlier interfac may pass faulti equat fortran tem plate error report compil problem pde pdevar pot con temp vel potenti concentr temperatur veloc precis doubl doubl precis solut error 1d2 1d2 scale boltzmann constant scale effect mass scale mobil scale elementari charg scale ambient temperatur scale satur veloc voltag appli right scale background dope init pot logab n vx2d2 init con n init temp t0 init vel 0 figur 3 descript pde tradeoff awk yacc implement languag awk best suit fast implement particularli execut speed result product primari concern awk conveni string process symbolt manag also good handl keyword valu pair weak pars anyth complic contrast yacc intend languag richer grammat structur especi nest construct yaccbas program semant action implement c also execut much faster error detect recoveri also better price use yacc implement time significantli longer 6 templatedriven program templatedriven program appli far beyond interfac numer function obviou extens nonnumer function given effici sort function make sort pipe use templat c program templat could also provid pipelik interfac function domain regularexpress pattern match random number gener cryptolog data compress mani applic howev effect call function singl c program c concentr scale boltzmann constant scale effect mass scale mobil scale elementari charg scale ambient temperatur scale satur veloc scale background dope voltag appli right taupm mu t0qt kp15muc poss var pctv af kp bc plogabsn cn tt0 vx errpar 1e2 1e2 figur 4 poss descript pde figur 3 without use templat templat effect object must process compil exampl seen far paper deal fortran express possibl build interpret express tree run time easier pass express compil via templat studi program use templat studi runtim cost variou c express templat repeatedli evalu express tight loop includ mathh doubl d1 d2 d3 d4 d5 int n exp complet schema also includ declar initi variabl type int float interact session result ctime program set 40 micsloop 04u 00 0r 300 micsloop 30u 00 4r 410 micsloop 41u 00 5r first line use ctime keyword set assign variabl d2 d3 nonzero valu subsequ pair line contain express type user follow averag cost output time command time program mean perfect optim could move comput time loop ignor cach nevertheless found program use limit domain apart applic though ctime program illustr power templatedriven pro gram complet program line 20 line templat 20 line primari awk func tion 20 line support awk function copi program templat instanti error messag report wrote ctime program coupl hour convert fortran ftime ten minut coupl hour built version time c construct across half dozen type machin easili reach network home machin templatedriven style made easi construct variant 7 conclus interfac describ provid easi access major area port librari aim handl common case cover high percentag user high percentag total cpu time use port routin although mani user novic pleasantli surpris numer expert also seem make extens use interfac templatedriven interfac easi build hour day dont requir week invest time build one usual return interest first applic believ build interfac easili pay numer routin test debug qualiti softwar improv result interfac avail quickli answer question function behavior time complex routin gener broad short test case code sever interfac avail netlib receiv index collect instruct get want type echo send index templat mail netlibresearchattcom semisymbol natur awk interfac chang way build numer routin fortran exampl solut twodimension pde coupl variabl import variabl coupl nonlinear lowertriangular manner variou iter method may costeffect compar default direct factor scheme interfac could ask user state whether problem triangular add complex user may lead error easi awk program determin whether given express contain specifi variabl therebi comput triangular structur equat solv program describ oper independ batch program interact cooper eleg way take output one anoth integr interfac philosophi scientif comput tool propos coughran gross 1989 remain import open problem acknowledg grate help comment rick becker bill coughran eric gross colin mal low daryl pregibon margaret wright sever anonym refere r typeset graph eval uation influenc convect energi hbt use fulli hydrodynam model philosophi scientif comput tool adapt nonlinear leastsquar algorithm design structur fortran program librari optim composit librari softwar part problem solv environ tr grapmyampersandmdasha languag typeset graph awk program languag philosophi scientif comput tool design structur fortran program librari optim adapt nonlinear leastsquar algorithm unix program environ test exampl nonlinear program code ctr tzvetan drashanski sanjiva weerawarana anupam joshi ranjeewa weerasingh elia n housti softwar architectur ubiquit scientif comput environ mobil platform mobil network applic v1 n4 p421432 dec 1996