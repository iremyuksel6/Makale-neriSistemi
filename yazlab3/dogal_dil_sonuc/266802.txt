pathbas next trace predict trace cach propos mechan provid increas fetch bandwidth allow processor fetch across multipl branch singl cycl date predict multipl branch per cycl meant pay penalti predict accuraci propos next trace predictor treat trace basic unit explicitli predict sequenc trace predictor collect histori trace sequenc path make predict base histori basic predictor enhanc hybrid configur reduc perform loss due cold start alias predict tabl return histori stack introduc increas predictor perform save path histori inform across procedur callreturn overal predictor yield 26 reduct mispredict rate compar aggress previous propos multiplebranchpredict method b introduct current superscalar processor fetch issu four six instruct per cycl number averag basic block integ program obviou design reach higher level instruct level parallel becom necessari fetch one basic block per cycl recent year sever propos put forward 3412 one promis trace cach 910 dynam sequenc instruct contain embed predict branch assembl sequenti trace save special cach fetch unit trace cach oper best understood via exampl figur 1 show program control flow graph cfg node basic block arc repres potenti transfer control figur arc correspond branch label indic taken taken n path sequenc abd repres one possibl trace hold instruct basic block b would sequenc instruct begin basic block next two branch taken taken respect basic block contigu origin program would store contigu block trace cach number trace extract cfg four possibl trace 1 abd 2 acd 3 efg 4 eg cours mani trace could also chosen cfg fact trace necessarili begin end basic block boundari increas possibl also note trace cach instruct may appear one trace exampl block e g appear twice list trace howev mechan build trace use heurist reduc amount redund trace cach begin end basic block boundari good heurist f g figur associ trace cach trace fetch unit fetch trace cach cycl time fashion necessari predict next trace straightforward method one use 910 predict simultan multipl branch within trace arm last pc preced trace multipl predict fetch unit access next trace exampl trace 1 abd recent fetch trace multipl branch predictor predict next three branch outcom ttn next trace implicitli acd paper take differ approach next trace predict treat trace basic unit explicitli predict sequenc trace exampl refer list trace recent trace trace 1 next trace predictor might explicitli output trace 2 individu branch predict ttn implicit propos studi next trace predictor collect histori trace sequenc make predict base histori similar condit branch predict predict made use histori branch outcom howev trace typic two successor often mani consequ next trace predictor keep track sequenc trace identifi identifi contain multipl bit propos basic predictor add enhanc reduc perform loss due cold start procedur callreturn interfer due alias predict tabl propos predictor yield substanti perform improv previous propos multiplebranchpredict method six benchmark studi averag mispredict rate 26 lower propos predictor aggress previous propos multiplebranch predictor 2 previou work number method fetch multipl basic block per cycl propos yeh et al 12 propos branch address cach predict multipl branch target address everi cycl cont et al 3 propos interleav branch target buffer predict multipl branch target detect short forward branch stay within cach line method use convent instruct cach fetch multipl line base multipl branch predict fetch block instruct differ line select align combin lead consider delay follow instruct fetch complex logic delay primari pipelin trace cach intend remov trace cach 910 combin block instruct prior store cach read block fed pipelin without pass complex steer logic branch predict form fundament part next trace predict either implicitli explicitli hardwar branch predictor predict outcom branch base previou branch behavior heart branch predictor pattern histori tabl pht typic contain twobit satur counter 11 simplest way associ counter branch instruct use bit pc address branch typic least signific bit index pht 11 counter valu two three branch predict taken otherwis branch predict taken correl predictor increas accuraci branch predict outcom branch tend correl outcom previou branch 813 correl predictor use branch histori regist bhr bhr shift regist usual updat shift outcom branch instruct one taken zero taken global correl predictor singl bhr updat branch bhr combin bit possibl zero branch pc address either concaten use exclusiveor function form index pht correl predictor pht entri associ branch instruct branch instruct context specif bhr valu bhr alon use index pht predictor gag predictor 13 exclusiveor function use combin equal number bit bhr branch pc address predictor gshare predictor 6 gshare shown offer consist good predict accuraci map instruct pht entri essenti implement simpl hash function detect avoid collis alias occur two unrel branch instruct hash pht entri alias especi problem correl predictor singl branch may use mani pht entri depend valu bhr thu increas content order support simultan fetch multipl basic block multipl branch must predict singl cycl number modif correl predictor discuss propos support predict multipl branch franklin dutta propos subgraph orient branch predict mechan use local histori form predict encod multipl branch yeh et al 13 propos modif gag predictor multiport predictor produc multipl branch predict per cycl rotenberg et al 10 also use modifi gag trace cach studi recent patel et al 9 propos multipl branch predictor tailor work trace cach predictor attempt achiev advantag gshare predictor provid multipl predict predictor use bhr address first instruct trace exclusiveor togeth index pht entri pht modifi contain multipl twobit satur counter allow simultan predict multipl branch predictor offer superior accuraci compar multiport gag predictor quit achiev overal accuraci singl branch gshare predictor nair propos pathbas predict form correl branch predict singl branch histori regist predict histori tabl innov inform store branch histori regist outcom previou branch truncat pc address make predict bit address histori regist well bit current pc address concaten form index pht henc branch predict use knowledg sequenc path instruct led give predictor specif inform prior control flow takennot taken histori branch outcom jacobson et al 5 refin pathbas scheme appli next task predict multiscalar processor adapt multiscalar predictor form core pathbas next trace predictor present 3 pathbas next trace predictor consid predictor design specif work trace cach predict trace explicitli implicitli predict control instruct within trace next trace predictor replac convent branch predictor branch target buffer btb return address stack ra low latenc capabl make trace predict everi cycl show also offer better accuraci convent correl branch predictor 31 name trace theori trace identifi pc trace would obvious expens cheaper practic method use pc valu first instruct trace combin outcom condit branch embed trace mean indirect jump intern trace use trace maximum length 16 instruct access trace cach use follow method assum 36 bit identifi identifi start pc six bit encod six condit branch limit six branch somewhat arbitrari chosen observ length 16 trace almost never six branch import note limit branch requir simplifi simultan multipl branch predict case trace predictor use explicit branch predict 32 correl predictor core next trace predictor use correl base histori previou trace identifi previou trace repres path histori use form index predict tabl see figur 2 entri tabl consist identifi predict trace pc branch outcom twobit satur counter predict correct counter increment one predict incorrect counter zero predict trace replac actual trace otherwis counter decrement two predict trace entri unchang found incrementby1 decrementby2 counter give slightli better perform either one bit convent twobit counter histori regist predict trace id trace id cnt hash id hash id hash id hash id gener hash function figur correl predictor path histori maintain shift regist contain hash trace identifi figur 2 hash function use outcom first two condit branch trace identifi least signific two bit two least signific bit start pc next two bit upper bit form take outcom addit condit branch outcom exclusiveor next least signific bit start pc beyond last condit branch valu zero use remain branch outcom bit histori regist updat specul new predict case incorrect predict histori back state bad predict predict tabl updat last instruct trace retir specul updat bit back id width bit figur 3 index gener mechan ideal index gener mechan would simpli concaten hash identifi histori regist form index unfortun sometim practic predict tabl rel small index must restrict limit number bit index gener mechan base method develop intertask predict multiscalar processor 5 index gener mechan use bit hash trace identifi form index low order bit hash trace identifi use bit use recent trace collect select bit trace may longer allow index case collect bit fold onto use exclusiveor function form index 5 dolc name convent develop specifi specif paramet index gener mechan first variabl depth number trace besid last trace use form index three variabl number bit older trace number bit last trace number bit current exampl shown figur 3 collect bit trace identifi twice long index fold half two halv combin exclus case bit may fold three part may need fold 33 hybrid predictor index predict tabl read entri unrel current path histori predict almost certainli incorrect occur particular path never occur tabl entri overwritten unrel path histori due alias observ signific realist size tabl alias usual import branch predict even randomli select tabl entri typic 50 chanc correct case next trace predict chanc correct random tabl entri low address issu oper second smaller predictor parallel first figur 4 secondari predictor requir shorter learn time suffer less alias pressur secondari predictor use hash identifi last trace index tabl predict tabl entri similar one correl predictor except 4 bit satur counter use decrement 8 mispredict reason larger counter discuss end section correl tabl histori regist predict trace id cnt hash id hash id hash id hash id hash function figur 4 hybrid predictor decid predictor use given predict tag ad tabl entri correl predictor tag set low 10 bit hash identifi immedi preced trace time entri updat ten bit tag soffici elimin practic unintend alias predict made tag check hash identifi preced trace match correl predictor use otherwis secondari predictor use method increas likelihood correl predictor correspond correct context use method also allow secondari tabl make predict context limit ie startup condit hybrid predictor natur reduc alias pressur somewhat modifi slightli alias pressur reduc 4bit counter secondari predictor satur predict use importantli correct correl predictor updat mean trace alway follow successor secondari predictor captur behavior correl predictor pollut reduc number updat correl predictor therefor chanc alias rel larg counter 4bit use avoid give opportun use correl predictor unless high probabl trace singl successor 34 return histori stack rh accuraci predictor increas new mechan return histori stack rh field ad trace indic number call contain trace end return number call decrement one path histori updat call new trace copi recent histori made call copi push onto special hardwar stack trace end return contain call top stack pop substitut part histori one two recent entri current histori within subroutin preserv entri stack replac remain older entri histori five fewer entri histori recent hash identifi kept five entri two recent hash identifi kept histori regist hash id hash id hash id hash id pop figur 5 return histori stack implement rh subroutin call return histori contain inform happen call well knowledg last one two trace subroutin found rh significantli increas overal predictor accuraci reason increas accuraci control flow program subroutin often tightli correl behavior call without rh inform call often overflow control flow within subroutin tri achiev care balanc histori inform call versu histori inform within call differ benchmark optim point vari found configur use one two entri subroutin provid consist good behavior predictor use return address stack ra requir inform instruct level granular trace predictor tri avoid rh partli compens absenc ra help initi predict return subroutin significantli long forc pre call inform histori regist henc determin call routin therefor return would much harder without rh 4 simul methodolog 41 simul studi predictor perform trace driven simul simplescalar tool set use 1 simplescalar use instruct set larg base mip major deviat delay branch replac convent branch use gnu c compil target simplescalar function simul simplescalar instruct set use produc dynam stream instruct fed predict simul work consid predictor isol use immedi updat predict next trace made predictor updat actual outcom next predict made also simul execut engin allow updat perform take execut latenc account model 8way outoford issu superscalar processor 64 instruct window processor 128kb trace cach 64kb instruct cach 4port 64kb data cach processor 8 symmetr function unit support specul memori oper 42 trace select studi use trace maximum instruct length contain six branch limit number branch impos name convent trace control instruct indirect target embed trace must end trace mean trace shorter maximum length mention earlier instruct indirect target embed allow trace uniqu identifi start address outcom condit branch use simpl trace select heurist sophist trace select heurist possibl would significantli impact behavior trace predictor studi relat trace select trace predict beyond scope paper 43 benchmark present result six specint95 benchmark compress gcc go jpeg m88ksim xlisp result base run least 100 million instruct tabl summari benchmark input number instr avg trace length trace compress 400000 queen 7 first 100 million 124 1393 5 perform 51 sequenti branch predictor refer first determin trace predict accuraci could achiev take proven control flow predict compon predict control instruct sequenti sequenti predict branch explicitli predict time predict outcom previou branch known use comparison although realiz would requir multipl access predict singl trace requir knowledg branch address within trace best multipl branch predictor date attempt approxim behavior conceptu sequenti predictor use 16bit gshare branch predictor perfect branch target buffer branch pcrel absolut address target 64k entri correl branch target buffer branch indirect target 2 perfect return address predictor predictor ideal immedi updat simul mechan one predict within trace incorrect count one trace mispredict configur repres aggress ideal predictor predict accuraci ideal sequenti predict given tabl 2 mean trace mispredict rate 121 show later propos predictor achiev level predict accuraci significantli better achiev ideal sequenti predictor result section refer trace predict accuraci ideal sequenti predictor sequenti mispredict rate trace tend lower obtain simpli multipli branch mispredict rate number branch branch mispredict tend cluster trace mispredict multipl branch within trace often mispredict xlisp except hard predict branch tend differ trace aggress target predict mechan none benchmark show substanti target mispredict tabl predict accuraci sequenti predictor benchmark 16bit gshare branch mispredict number branch per trace mispred tion trace compress 92 21 179 gcc 80 21 140 go 166 18 245 jpeg 69 10 67 xlisp 32 19 65 52 perform unbound tabl determin potenti pathbas next trace predict first studi perform assum unbound tabl studi uniqu sequenc trace identifi map tabl entri ie alias consid vari depth trace histori depth number trace besid recent trace combin index predict tabl depth zero identifi recent trace use studi histori depth zero seven figur 6 present result unbound tabl mean mispredict rate 80 rh predictor maximum depth comparison sequenti predictor base 16bit gshare predictor predict condit branch sequenti benchmark propos pathbas predictor better ideal sequenti predictor averag mispredict rate 34 lower propos predictor case gcc go predictor less half mispredict rate ideal sequenti predictor e correl hybrid rh sequenti depth histori mispredict rate correl hybrid rh sequenti go14182226 depth histori mispredict rate correl hybrid rh sequenti depth histori mispredict rate correl hybrid rh sequenti depth histori mispredict rate correl hybrid rh sequenti depth histori mispredict rate correl hybrid rh sequenti figur 6 next trace predict unbound tabl benchmark hybrid predictor higher predict accuraci use correl predictor alon benchmark static trace see larger advantag hybrid predictor contain uniqu sequenc trace tabl size unbound hybrid predictor import alias import make predict correl predictor entri cold four six benchmark ad return histori stack rh increas predict accuraci furthermor four improv benchmark see signific increas due rh two benchmark hurt rh see decreas benchmark compress predictor better without rh compress inform subroutin thrown away rh import inform subroutin save xlisp extens use recurs minim overhead use unusu control flow backup quickli point recurs without iter perform return behavior confus return histori stack number call correspond return howev hard determin much perform loss rh xlisp caus problem much caus loss inform control flow within subroutin 53 perform bound tabl consid finit size predictor tabl correl predictor signific compon respect size studi correl predictor tabl 2 14 2 15 2 16 entri size consid number configur differ histori depth configur index gener function chosen base trialanderror although better configur doubt possibl believ differ would signific 214 entri entri entri infinit sequenti depth histori mispredict rate 214 entri entri entri infinit sequenti depth histori mispredict rate 214 entri entri entri infinit sequenti depth histori mispredict rate 214 entri entri entri infinit sequenti depth histori mispredict rate 214 entri entri entri infinit sequenti depth histori mispredict rate 214 entri entri entri infinit sequenti figur 7 next trace predict use rh maximum depth 128 depth suffici handl benchmark except recurs section xlisp predictor littl use anyway perform result figur 7 three benchmark stress finites predictor gcc go jpeg predictor deviat unbound tabl pronounc deviat differ tabl size expect deviat becom pronounc longer histori uniqu sequenc trace identifi use therefor alias go largest number uniqu sequenc trace identifi appar suffer alias pressur first histori depth increas miss rate goe histori depth continu increas number sequenc compet finit size tabl increas alias detriment effect alias eventu start counter gain go deeper histori point domin caus neg effect increas histori depth smaller tabl size sooner effect alias start becom problem import focu behavior benchmark two larger benchmark gcc jpeg gener benchmark probabl rel small work set compar realist program see realist tabl predictor achiev high predict accuraci case predictor achiev miss rate significantli ideal sequenti predictor benchmark predictor better sequenti predict small 2 14 entri tabl jpeg even case achiev perform close sequenti probabl closer realist implement gshare modifi multipl branch per cycl throughput predictor mean mispredict rate 100 95 89 maximum depth configur 2 14 2 15 2 tabl respect significantli 121 mispredict rate sequenti predictor 26 lower 2 predictor tabl 3 index gener configur use depth dolc thu far simul result use immedi updat real processor histori regist would updat predict trace histori would correct predictor back due mispredict tabl entri would updat last instruct trace retir tabl 4 impact real updat benchmark mispredict ideal updat mispredict real updat compress 58 58 go 93 93 jpeg 35 36 24 21 xlisp 47 48 make sure make signific impact predict accuraci ran set simul execut engin simul configur execut engin discuss section 41 predictor model 2 16 entri 7368 dolc configur tabl 4 show impact delay updat appar delay updat signific perform predictor one case m88ksim delay updat actual increas predict accuraci delay updat effect increas amount hysteresi predict tabl case increas perform 55 costreduc predictor cost propos predictor primarili function size correl predictor tabl size correl predictor tabl number entri multipli size entri size entri 48 bit 36 bit encod trace identifi two bit counter plu 10 bit tag much less expens predictor construct howev observ trace cach access trace identifi read predict tabl must hash form trace cach index practic size trace cach index rang 10 bit rather store full trace identifi hash cach index store tabl instead hash index hash identifi fed histori regist figur 2 hash function move input side predict tabl hash trace identifi place tabl modif affect predict accuraci signific way reduc size trace identifi field 36 bit bit full trace identifi still store trace cach part entri read part trace cach access full trace identifi use execut valid control flow impli trace correct 6 predict altern trace along predict next trace altern trace predict time altern trace simplifi reduc latenc recov determin predict incorrect implement may allow processor find fetch altern trace instead resort build trace scratch altern trace predict implement ad anoth field correl predictor new field contain identifi altern predict predict correl predictor incorrect altern predict field updat satur counter zero identifi predict field move altern field predict field updat actual outcom satur counter nonzero identifi actual outcom written altern field figur 8 show perform altern trace predictor two repres benchmark graph show mispredict rate primari 2 16 entri tabl predictor well rate primari altern mispredict larg percent mispredict predictor caught altern predict compress 23 mispredict caught altern gcc slightli less half notabl altern predict alias effect quickli domin benefit histori requir much histori make predict two like trace benefit histori significantli smaller two reason altern trace predict work well first case branch heavili bias may two trace similar likelihood second two sequenc trace alias predict entri one sequenc displac move other like predict altern slot predict made displac sequenc trace secondari predictor wrong altern like correct depth histori mispredict rate primari altern depth histori mispredict rate primari altern figur altern trace predict accuraci 7 summari propos next trace predictor treat trace basic unit explicitli predict sequenc trace predictor collect histori trace sequenc make predict base histori addit basic predictor propos enhanc reduc perform loss due cold start procedur callreturn interfer predict tabl predictor yield consist substanti improv previous propos multiplebranchpredict method averag predictor 26 lower mispredict rate aggress previous propos multiplebranch predictor acknowledg work support part nsf grant mip 9505853 us armi intellig center fort huachuca contract dapt6395c0127 arpa order d346 view conclus contain herein author interpret necessarili repres offici polici endors either express impli us armi intellig center huachuca us govern r evalu futur microprocessor simplescalar tool set target predict indirect jump optim instruct fetch mechan high issu rate control flow predict treelik subgraph superscalar processor control flow specul multiscalar processor combin branch predictor dynam pathbas branch correl improv accuraci dynam branch predict use branch correl critic issu regard trace cach fetch mechan trace cach low latenc approach high bandwidth instruct fetch studi branch predict strategi increas instruct fetch rate via multipl branch predict branch address cach twolevel adapt branch predict tr twolevel adapt train branch predict improv accuraci dynam branch predict use branch correl increas instruct fetch rate via multipl branch predict branch address cach optim instruct fetch mechan high issu rate dynam pathbas branch correl control flow predict treelik subgraph superscalar processor trace cach target predict indirect jump studi branch predict strategi control flow specul multiscalar processor ctr trace processor proceed 30th annual acmiee intern symposium microarchitectur p138148 decemb 0103 1997 research triangl park north carolina unit state independ trace processor proceed 32nd annual acmiee intern symposium microarchitectur p415 novemb 1618 1999 haifa israel juan c mour domingo bentez dolor rexach emilio luqu wide effici trace predict use local trace predictor proceed 20th annual intern confer supercomput june 28juli 01 2006 cairn queensland australia michael behar avi mendelson avinoam kolodni trace cach sampl filter acm transact comput system toc v25 n1 p3e februari 2007 quinn jacobson jame e smith trace preconstruct acm sigarch comput architectur news v28 n2 p3746 may 2000 ryan rakvic bryan black john paul shen complet time multipl branch predict enhanc trace cach perform acm sigarch comput architectur news v28 n2 p4758 may 2000 bryan black bohuslav rychlik john paul shen blockbas trace cach acm sigarch comput architectur news v27 n2 p196207 may 1999 oliverio j santana alex ramirez josep l larribapey mateo valero lowcomplex fetch architectur highperform superscalar processor acm transact architectur code optim taco v1 n2 p220245 june 2004 young michael smith better global schedul use path profil proceed 31st annual acmiee intern symposium microarchitectur p115123 novemb 1998 dalla texa unit state jare stark mariu ever yale n patt variabl length path branch predict acm sigplan notic v33 n11 p170179 nov 1998 bryan black brian mueller stephani postal ryan rakvic noppanunt utamaphethai john paul shen load execut latenc reduct proceed 12th intern confer supercomput p2936 juli 1998 melbourn australia paramjit oberoi gurindar sohi parallel frontend acm sigarch comput architectur news v31 n2 may zhang rajiv gupta whole execut trace proceed 37th annual ieeeacm intern symposium microarchitectur p105116 decemb 0408 2004 portland oregon yoav almog roni rosner naftali schwartz ari schmorak special dynam optim highperform energyeffici microarchitectur proceed intern symposium code gener optim feedbackdirect runtim optim p137 march 2024 2004 palo alto california sangjeong lee penchung yew augment trace cach highbandwidth valu predict ieee transact comput v51 n9 p10741088 septemb 2002 oliverio j santana ayos falcn alex ramirez mateo valero branch predictor guid instruct decod proceed 15th intern confer parallel architectur compil techniqu septemb 1620 2006 seattl washington usa pedro marcuello antonio gonzlez cluster specul multithread processor proceed 13th intern confer supercomput p365372 june 2025 1999 rhode greec karthik sundaramoorthi zach purser eric rotenburg slipstream processor improv perform fault toler acm sigarch comput architectur news v28 n5 p257268 dec 2000 kapil vaswani matthew j thazhuthaveetil n srikant programm hardwar path profil proceed intern symposium code gener optim p217228 march 2023 2005 karthik sundaramoorthi zach purser eric rotenberg slipstream processor improv perform fault toler acm sigplan notic v35 n11 p257268 nov 2000 roni rosner micha moffi yiannaki sazeid ronni ronen select long atom trace high coverag proceed 17th annual intern confer supercomput june 2326 2003 san francisco ca usa trace cach microarchitectur evalu ieee transact comput v48 n2 p111120 februari 1999 michel co dee b weikl kevin skadron evalu trace cach energi effici acm transact architectur code optim taco v3 n4 p450476 decemb 2006 roni rosner yoav almog micha moffi naftali schwartz avi mendelson power awar select dynam optim trace acm sigarch comput architectur news v32 n2 p162 march 2004 jame r laru whole program path acm sigplan notic v34 n5 p259269 may 1999 zhang rajiv gupta whole execut trace applic acm transact architectur code optim taco v2 n3 p301334 septemb 2005 lucian codrescu scott will jame meindl architectur atla chipmultiprocessor dynam parallel irregular applic ieee transact comput v50 n1 p6782 januari 2001 alex ramirez oliverio j santana josep l larribapey mateo valero fetch instruct stream proceed 35th annual acmiee intern symposium microarchitectur novemb 1822 2002 istanbul turkey ahmad zmili christo kozyraki blockawar instruct set architectur acm transact architectur code optim taco v3 n3 p327357 septemb 2006 kevin skadron pritpal ahuja margaret martonosi dougla w clark improv predict procedur return returnaddressstack repair mechan proceed 31st annual acmiee intern symposium microarchitectur p259271 novemb 1998 dalla texa unit state kevin skadron pritpal ahuja margaret martonosi dougla w clark branch predict instructionwindow size cach size perform tradeoff simul techniqu ieee transact comput v48 n11 p12601281 novemb 1999 mahjur h jahangir h gholamipour perform trace local refer perform evalu v60 n14 p5172 may 2005 shashidhar mysor banit agraw timothi sherwood nisheeth shrivastava subhash suri profil adapt rang proceed intern symposium code gener optim p147158 march 2629 2006 matt yourst kanad ghose increment commit group nonatom trace process proceed 38th annual ieeeacm intern symposium microarchitectur p6780 novemb 1216 2005 barcelona spain hao poyung chang mariu ever yale n patt increas instruct fetch rate via blockstructur instruct set architectur intern journal parallel program v26 n4 p449478 august 1998