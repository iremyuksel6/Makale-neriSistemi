sage graphic architectur scalabl advanc graphic environ sage new highend multichip render architectur singl sage board render excess 80 million fulli lit textur antialias triangl per second sage bring high qualiti antialias filter video rate hardwar first time achiev concept frame buffer replac fulli doublebuff sampl buffer 1 16 nonuniformli place sampl per final output pixel video output raster sampl subject convolut 5x5 programm reconstruct bandpass filter replac tradit ramdac reconstruct filter process 400 sampl per output pixel support radial symmetr filter includ neg lobe full mitchellnetravali filter sage board compris four parallel render subunit support two video output channel multipl sage system tile togeth support even higher fill rate resolut perform b overview sage block diagram seen figur 1 diagram expand extern buse intern fifo intern multiplex loadbalanc switch overal data flow requir sort may easili seen system level sage interchip connect typic unidirect point topoint sourcesynchron digit interconnect top half sage diagram fairli similar sortlast architectur command load balanc perform across parallel transform raster block follow sortlast tree sched chip interfac frame buffer sage howev frame buffer replac sampl buffer contain 20 million sampl output side sampl buffer sage introduc entir new graphic hardwar pipelin stage replac ramdac sampl tree follow parallel convolv chip appli 55 programm reconstruct bandpass filter raster sam ple convolv chip respons antialias separ vertic column screen finish pixel emit convolv video raster order 32 command distribut top pipelin master chip perform dma host fetch opengl command graphic data stream dma engin bidirect contain mmu applic data resid anywher virtual memori lock applic data region necessari geometr primit stream vertex data distribut loadbalanc way four parallel render pipelin 33 render transform light setup raster render pipelin consist two custom chip plu sever memori chip first custom chip majc multiprocessor tremblay et al 2000 second raster chip perform setup raster textur draw mani previou architectur sortmiddl follow taxonomi molnar et al 1994 parallel transform light setup pipelin recombin stream oneprimit atatim distribut draw stage architect sage certain bandwidth advantag motiv choic sortlast architec ture averag pixel size applic triangl shrink size setup data becom larger actual sampl data triangl also improv effici allow raster chip gener sampl triangl rather fraction occur interleav raster majc chip contain special vertex data handl circuit support two fulli programm vliw cpu cpu program implement classic graphic pipelin stage tran form clip check clip face determin light geometr primit setup oper special vertex data circuitri handl vertex strip mesh connect data cpu see stream nonredund vertex data time thu redund light comput avoid vertex reus asymptot reduc requir vertex process oper 12 vertex per triangl process vertex mesh format use support sampl buffer programm nonuniform sampl posit hardwar fill algorithm must extend beyond simpl scanlin interpol gener plane equat evalu need ensur correctli sampl render geometr primit furthermor sampl fill rate run 8 time faster raster fill nonsupersampl machin keep aggreg equival commod dram bandwidth sage eight 3dram memori interleav excess 80 gigabyt per second raster chip raster textur triangl line dot sampl buffer current sampl densiti also perform imag function tradit rasterop window oper majc raster pipelin render 20 million lit textur supersampl triangl per second raster chip dedic 256 megabyt textur memori support 256 megabyt user textur memori four time bandwidth singl pipe one gigabyt textur memori applic use opengl target textur extens common case volum visual ap plicat textur triangl raster chip first determin pixel touch even fraction triangl appli layer mipmap option anisotrop filter textur pixel determin irregular sampl posit within triangl interpol color z alpha channel data sampl point output stream sampl rgbaz packet screen pixel xy address sampl index impli sam ple subpixel locat within pixel raster chip two extern output buse first stage rout sampl data sampl memori perform sampl leav raster chip 34 sortlast raster chip lie network compris two sched chip rout sampl produc raster output pixel interleav sampl buffer sampl arriv sched chip input fifo raster chip rout appropri second stage fifo base destin memori interleav output second stage fifo control load balanc switch memori interleav switch act like traffic light busi intersect traffic one sourc allow flow unimped time sourc block programm hysteresi flow host dma bu master dram mcode majc dram mcode majc dram mcode majc dram mcode dram dram dram dram textur raster textur raster textur raster textur majc raster sched sched buffer rout convolv 6 swath line buffer convolv 6 swath line buffer convolv 6 swath line buffer convolv 6 swath line buffer figur 1 sage block diagram thick box custom chip red box fifo green circl load balanc switch sampl data differ raster chip ensur good cach local within 3dram memori third layer fifo sched chip final sampl prewrit queue front singl memori interleav interleav group 4 3dram chip connect prewrit queue sched chip snoop queue perform 3dram cach prefetch schedul sampl write sampl buffer parallel raster sampl stream merg togeth sched chip also place special control token enforc variou renderord constraint exampl algorithm make use stencil buffer requir least two passeson prepar stencil buffer special pattern anoth pass sampl write condit enabl presenc special stencil pattern clearli stencil write first pass must complet second pass sampl write allow go forward given interleav given sched chip encount special synchron token mark hard order constraint eg boundari two pass sampl raster process three raster input also encount stop synchron token occur sampl gener primit enter sage system synchron token process first pass exampl okay allow pend sampl enter system synchron token proceed opengl driver know gener order token unord render mode see command transit order render mode immedi follow command chang back unord render mode complex situat support complex special token gener driver control 3dram chip sched chip also respond request convolv chip stream sampl sent 3dram video output pin parallel convolv chip gener video output 35 sampl buffer sampl buffer consist 32 3dram chip organ eight independ interleav four chip input side four 3dram share singl set control address data line one four set memori interleav pin sched chip output side 3dram output 40bit sampl doubl pump 20 video output pin pin individu wire rout chip total 640 wire enter lower rout network logic sampl buffer organ two dimension raster list sampl list length pixel screen number sampl listord sampl impli subpixel locat raster convolv chip contain ident sampleloc tabl access sampl index space alloc within sampl buffer subpixel locat sampl memori interleav persampl adjac sampl list differ 3dram packag unlik firstgener 3dram compon new 3dram use sage contain intern 21 multiplex driven sam ple window id samplebysampl doublebuff occur insid 3dram chip thu final rgb alphawindow control bit emerg 40bitpersampl output packet size sampl buffer enough support 12801024 doublebuff sampl z sampl densiti 8 19201200 sampl densiti 4 high sampl densiti requir correspondingli high render bandwidth sampl buffer achiev new gener 3dram deer et al 1994 3dram perform zbuffer compar alpha buffer blend intern tradit zbuffer readmodifywrit oper simplifi oper import oper clear sampl buffer new frame render also potenti advers affect high sampl densiti greatli acceler 3dram chip initi sampl 1280x1024x8 sampl raster take less 200 usec less 2 76hz frame time 36 sampl raster deliveri 640 output sampl buffer feed array 10 rout chip rout chip 2bit slice router function rout chip connect 2 output data pin 32 3dram redirect data four convolv chip attach need convolv chip fed contigu vertic swath pixel interleav sampl buffer sampl read sampl buffer quarter scan line wide one pixel high burst direct one four convolv chip detail discuss convolv section job rout chip absorb burst intern fifo dribbl back destin convolv chip 37 convolut clut video time final four convolv chip perform reconstruct band limit filter raster stream sampl produc pixel fed next convolv chip final video output convolv chip replac digit portion ram dac contain color lookup gamma tabl well video time gener cursor logic genlock interfac convolv chip contain da convert instead convolv video output digit support variou exist emerg digit video interfac two high qualiti extern da convert svideo interfac sage video daughter board support analog video devic tradit graphic hardwar taxonomi refer section display howev renderman term imag pipelin may accur descript new function next sever section describ convolut process detail start discuss previou attempt implement video rate antialias 4 convolut introduct decad user batch photorealist render softwar abl obtain high qualiti antialias imag eri usual mean variou supersampl algorithm ever realtim hardwar system cost constraint preclud deploy simplist approxim algorithm fill rate limit make realtim gener enough sampl challeng restrict hardwar polygon fill algorithm preclud subpixel spatial variant sampl memori cost bandwidth limit prohibit use doublebuff supersampl frame buffer final comput cost realtim antialias reconstruct filter limit hardwar implement box tent filter inferior softwar reconstruct filter variou altern stochast supersampl tri year attempt avoid high hardwar cost date attempt limit gener render seen much use realtim generalpurpos graphic hardwar system use confin applic whose structur could adequ constrain flight simul video game nonuniform supersampl approach taken number render effect perform applic use multipass algorithm user programm sampl mask pattern includ motion blur depth field anisotrop textur filter subject support sampl densiti paper directli address featur rather focus basic backend architectur requir support filter supersampl buffer 51 previou work softwar antialias rich detail histori mainstream approach recent year evalu imag function multipl irregularli space sampl point per pixel follow appli reconstruct filter resampl lowpass filter origin refer stochast supersampl basic idea trade visual annoy alias artifact jaggi less visual percept nois glassner 1995 contain excel survey discuss mani variant approach implement year pioneer commerci softwar implement approach pixar photorealist renderman cook et al 1987upstil 1990 previou work hardwar 52 flight simul backtofront sortingbas algorithm realtim antialias requir flight simul hardwar sever decad howev earli work field took advantag known scene structur usual abil constrain render primit backtofront algorithm scale well averag scene complex grow hundr million polygon per frame 53 percentag coverag algorithm system exampl akeley 1993winner et al 1997 employ polygon antialias algorithm base store extra inform per pixel polygon fragment cover fraction pixel principl algorithm class produc higher qualiti result even supersampl techniqu exact area contribut polygon fragment final visibl pixel known practic hardwar system afford maintain limit amount shape inform limit number polygon fragment within pixel scene consist small number larg polygon polygon much greater area pixel vast major pixel either complet cover one two poli gon occlus edg silhouett would jaggi remov care even corner case two polygon one continu surfac land within one pixel often merg back singl polygon case howev today typic polygon shrink toward micro polygon algorithm rapidli becom confus caus unaccept visibl artifact 54 multipass stochast accumul buffer first attempt support gener full scene antialias independ render order nearrealtim hardwar multipass stochast accumul buffer deer et al 1988haeberli akeley 1990 approach render scene multipl time differ subpixel initi screen offset combin sampl increment filter accumul buffer final display howev multipl pass overhead filter imag copi reduc perform system order magnitud still ad substanti cost deeper pixel accumul buffer result techniqu support multipl vendor never found much use interact applic also subpixel sampl posit correl pix el final qualiti match softwar system supersampl architectur implement subset gener supersampl antialias algorithm akeley 1993 montrym et al 1997 implement one eight sampleperpixel render singlebuff sampl buffer sampl render complet sampl within pixel averag togeth transfer output pixel buffer video display combin reconstruct lowpass filter thu 11 box filter requir multipli 1x1 region support also elimin need neighbor pixel commun filter qualiti match batch softwar render result appreci better supersampl proven good enough use flight simul virtual set applic among other eyl al 1997 implement supersampl render 11 weight filter lower end simpl process antialias begin show game chip tarolli et al 1999 appear implement 22 singl buffer supersampl buffer clear box filter support nvidia geforce3 support sampl densiti either 2 4 either 11 box filter 33 tent filter domin 2001 result qualiti better antialias still far qualiti batch photor softwar frame rate howev suffer almost linearli proport sampl densiti opengl 13 specif contain support supersam pling context appli filter render buffer display buffer swap 6 sage supersampl issu 61 programm nonuniform sampl pattern import compon highqual supersampl base antialias algorithm use care control sampl pattern local period today best pattern constrain random perturb uniform grid softwar algorithm afford luxuri cach ten thousand pixel area worth precomput sampl pattern onchip hardwar much sever space constrain sage support pattern ram 64 2x2 pixel x 16 sampl 6bit x 6bit subpixel offset en tri howev effect nonrep size pattern extend 128x128 pixel use 2d hardwar hash function permut access pattern entri effect hash function seen figur 5 larg color dot correspond sampl tabl small easili changeabl realtim framebyfram basi support tempor perturb sampl pattern note sage system sampl tabl frame current display store convolv chip sampl tabl frame current render store raster chip tabl static system softwar must ensur updat appropri time boundari 7 convolv chip architectur detail one primari way architectur differ previou system attempt comput antialias pixel render side frame buffer far sampl buffer concern output display devic capabl display supersampl back end reconstruct filter pipelin convert stream supersampl antialias pixel fli full highresolut video rate peak data rate requir support impress frame buffer output 16 billion sampl per second approxim 8 gigabyt per second data realtim highqual filter much data beyond capabl today silicon singl chip thu find way spread convolut process firehos data across multipl chip seen figur 1 convolut pipelin split four chip chip assign differ vertic swath screen sampl reconstruct filter 55 support vertic swath must overlap horizont neighbor 2 pixel half filter width final video stream assembl video pass chip chip chip insert portion scan line aggreg stream last chip deliv complet video stream option second video stream also emerg last chip 55 filter size also impli sampl potenti use 25 differ pixel comput avoid refetch sampl offchip 6 swathlin worth sampl data cach convolv chip ram consum half activ area chip intern architectur chip shown figur 2 video gener process chip start gener raster convolut center output pixel center locat across swath convolut center locat move sampl data transfer swathlin buffer 55 filter processor array schemat filter processor shown figur 3 filter processor respons sampl one pixel sampl buffer 55 array access sampl may contribut singl output pixel filter processor comput contribut sampl total convolut partial result 25 filter processor sum form unnorm convolut result nonuniform nonloc repeat properti good sampl pattern feasibl cach precomput convolut filter coeffici instead filter processor contain circuitri dynam comput cu kern kernelx sampl pattern 5x5 region sampl adr hash funct convolut center raster locat gener sumcoeff 1sumcoeff filter processor array rgba swap rgba 1video video figur 2 convolut chip architectur color 6 swathlin buffer timingrgba coeff invers filter 2 find 1st r h er kern rang check figur 3 filter processor detailx 14 filter filter coeff icient sumcoeff tom filter coeffici arbitrari sampl locat also contain multiplieraccumul actual weight sampl filter coeffici comput proce follow first sampl locat rel convolut center comput subtract sampl xy locat gener sampl pattern ram convolut center xy locat squar sum delta xy compon result squar radial distanc sampl locat convolut center squar distanc scale squar invers filter radiu result greater uniti forc zero filter coeffici next squar distanc encod 3bit expon 5bit mantissa 1 hidden bit floatingpoint represent 8bit floatingpoint number use index ram tabl squar distanc vs filter coeffici numer linear point view squar floatingpoint encod nearli cancel result accur rel equallyspac filter coeffici seen plot synthes filter valu vs distanc figur 4 filter coeffici output tabl sign 14bit floatingpoint number use weight rgba sampl valu multipli result convert back 27bit fixedpoint number direct set sum tree separ run sum appli filter coeffici similarli calcul thu hardwar place two restrict reconstruct filter must radial symmetr convolut space filter radial cross section quantiz 256 valu note nonuniform video andor screen space scale ellipt filter physic display space support separ filter theoret advantag radial filter radial filter less complex implement hardwar technic filter weight averag filter handl filter normal perform floatingpoint reciproc oper sum filter coeffici normal multipli r g b unexpect advantag use dynam normal simul error compar exact solut came well expect slight error coeffici gener produc similar bia normal valu mostli cancel remain numer error coeffici gener less perceptu effect equival correct coeffici incorrect estim sampl distanc center filter error sampl posit sampl quit repres true underli imag vicin visibl error antialias output due sampl miss signific chang underli imag eg black white contribut imag output error due error comput filter coeffici valu quit small comparison hyperaccur filter preserv quantiz present origin sampl sometim call contour mitig con tour dither 12bit rgba sampl comput render 10bit rgba valu actual store sampl buffer con 13 13 mitchellnetravali filter filter weight bare visibl jaggi curv quantiz error filter radiu 10 20 figur 4 numer accuraci filter represent volut reconstruct dither sampl valu effect revers dither achiev 12 bit accuraci per rgba compon 71 video output two simultan potenti asynchron video raster gener parallel partit four convolv chip two subset video stream emerg digit video port last convolv chip swap circuit shown figur allow convolv chip add result either incom stream pass unmodifi also postprocess swap shown one use second channel abl read antialias imag back comput outer ring bu shown figur 1 without option host comput would way get copi antialias imag use perform antialias render intend later reus reflect map etc convolv video time circuit run either sync master sync slave genlock extern sync sourc two video stream subregion window system render system think singl display use tile two lowerresolut projectorsdisplay altern two video sourc two separ potenti asynchron imag region potenti differ sampl densiti 72 video resiz key benefit sage architectur video resolut determin convolut hardwar render hardwar thu hardwar use antialias also provid extrem high qualiti video rescal better filter qualiti possibl extern scaler oper origin sampl pixel sage correctli perform filter linear light space one use gener ntsc video arbitrari zoom pan subregion higher resolut display might use document softwar program import use system realtim guarante conserv fill rate actual size imag render dynam reduc interpol back fix video output size flight simul use 12801024 video format might actual render 960768 load get heavi save nearli half fill time system describ montrym et al 1997 also support dynam video resiz use simpl tent filter perform filter nonlinear postgamma light space 73 fulli antialias alpha channel sage sampl filter algorithm oper rgb channel also store doublebuff alpha enabl exampl virtual set applic mean sage automat gener high qualiti soft key signal blend antialias edg virtual object front physic object well blend variabl transpar render object front physic object programm choic reconstruct filter left end user gener found mitchellnetravali famili cubic filter mitchel netravali 1988 use high qualiti softwar render work well hard ware choic reconstruct filter subject compo nent user prefer smoother filter banish jaggi expens slight blur imag user desir filter preserv sharp risk artifact also displaydevicespecif aspect choic reconstruct fil ter get close endus look crt vs flat panel lcd display slightli differ filter need gener use exot filter use help simul appear special imag devic 81 effect neg lobe one price must paid use high qualiti reconstruct filter occasion artifact ring fring due presenc neg lobe filter hardwar clamp neg color compon zero also keep histogram frequenc extent occurr histogram data use dynam reduc neg lobe reconstruct filter artifact sever 9 legaci compat issu sever legaci compat issu sage must address mani handl properti associ window id tag part sampl one exampl support applic program assum nonlinear light space andor pseudo color space nonlinear light space typic particular gamma space sage support applic provid pseudo color direct color nonlinear true color lut specifi window id properti sampl sage lut appli sampl convolut cours 3d render perform linear light space bypass preconvolv lut preprocess ensur sampl input antialias convolut process linear light space convolut process gener linear light space pixel pixel convert proper nonlinear light space eg gamma cor rection particular display devic attach system pixel antialias proper emul 2d window system render legaci applic requir accur emul jaggi solut disabl filter pixel via special properti window id tag pixel window instead tag sampl typic ly one closest convolut center chosen output place convolut result thu possibl screen simultan support antialias nonantialias window filter 55 extent care must taken ensur unfilt pixel contribut sampl nearbi filter pixel case exampl nonantialias window occlud antialias window dynam filter normal circuit come rescu simpli dont appli filter coeffici alias pixel within 55 window antialias pixel still get unit volum ker nel approach also use elimin artifact visibl video border place tradit approach ad extra nonvis strip 2 pixel around full screen legaci issu includ proper support tradit antialias line also subject supersampl filter goal allow much possibl exist applic move full scene antialias oper minim sourc code chang 101 imag figur 5 imag sage debug simul show detail sampl pattern sampl densiti dere intens dot correspond comput sampl valu rgb green line triangl tessel boundari faint red grid line pixel boundari 11 triangl shown 12segment radius3 pie wedg one slice miss sage nativ output environ display next set imag digit photo function sage hardwar drive crt screen figur 6 10 shot portion 12801024 crt display show portion object honeybe differ sampl count reconstruct filter figur 6 show one uniformli space sampl per pixel reconstruct filter figur 7 10 render use sampl densiti 8 figur 7 10 use 44 mitchellnetravali 13 13 filter figur 4 figur 8 use diamet 4 cylind filter show consider blur figur 9 use laplacian filter show enhanc edg figur 10 wider approxim 800800 pixel shot bee 102 comparison renderman sage develop pixar photorealist renderman use verifi qualiti antialias algo rithm custom renderman shader written mimic differ light algorithm employ scene descript camera paramet sampl rate reconstruct filter use gener imag render result imag expect numer ident everi pixel primarili differ sampl pattern use well differ numer accuraci employ prman use full 32bit ieee floatingpoint arithmet intern control also ran prman sampl densiti 256 numer compar hardwar 16 sampl render prman fewer 1 pixel differ valu 6 contribut singl sampl howev varianc seen 16sampl 256 sampl prman imag explain visual result gener expert observ could determin imag render system 103 data rate comput requir doublebuff sampl buffer support 8 supersampl 12801024 imageri requir storag 20 million sampl approxim eighth gigabyt includ singlebuff z 76 hz video display overhead fragment effect design peak video output bandwidth 16 billion sampl per second 8 gigabyt per second note render fill data rate sever time larger support interest depth complex scene full frame rate a55 filter sampl densiti 4 requir 2544 floatingpoint multiplyadd per output pixel 800 oper per pixel similar number oper need gener filter coeffici per pixel peak video output rate 250 mhz total oper count per second exce 04 teraflop number gener special hardwar import note much greater number flop consum gener purpos comput run equival softwar antialias algorithm equival work 104 scalabl sage chip set design scale perform two chip render subsystem parallel pipelin render system combinatori variat chip configur allow sage architectur describ paper first implement sage chipset base system addit current sage board necessari hook scale comput system level support even higher fill rate reso lution perform includ abil function sync slave synchron signal stereo frame pariti render buffer flip well special featur enabl architectur sage convolv chip sage uniqu respect one also tile multipl commod pc solut togeth sage one start much power build block high geometri fill rate larg textur store alreadi perform high qualiti supersampl antialias sage complex multichip machin detail textur render ing light pick textur readback context switch etc reimplement sage often somewhat differ done short paper chose focu major effect antialias algorithm architectur detract area 3d graphic hardwar implement push envelop well complet sage prototyp hardwar run opengl render full scene antialias arbitrari filter describ paper board shown figur 11 13 conclus new high end architectur implement 3d graphic render sage describ perform goal 80 million lit textur antialias triangl per second met also achiev goal produc hardwar antialias system whose imag numer perceptu indistinguish imag gener antialias portion lead softwar render achiev use hardwar doublebuff sampl buffer onthefli videoout spatial filter capabl implement nonuniform supersampl cubic reconstruct filter acknowledg thank dean stanton dan rice program proofread ing photo composit thank clayton castl help video record thank entir sage develop team without sage would possibl r realityengin graphic cours note cs448a triangl processor normal vector shader vlsi system high perform graphic fbram new form memori optim 3d graphic principl digit imag synthesi accumul buffer hardwar support highqual render reconstruct filter comput graphic sort classif parallel render majc architectur renderman companion hardwar acceler render antialias use modifi abuff algorithm figur 5 sampl pattern densiti 16 figur 6 bee figur 7 bee figur 8 bee figur 9 bee figur 11 photo prototyp sage board tr rey imag render architectur accumul buffer hardwar support highqual render realiti engin graphic sort classif parallel render pixelflow infiniter hardwar acceler render antialias use modifi abuff algorithm triangl processor normal vector shader reconstruct filter computergraph principl digit imag synthesi majc architectur ctr david zhang moham kamel georg baciu introduct integr imag graphic technolog kluwer academ publish norwel 2004 whit j kajiya fulli procedur graphic proceed acm siggrapheurograph confer graphic hardwar juli 3031 2005 lo angel california philipp beaudoin pierr poulin compress multisampl effici hardwar edg antialias proceed 2004 confer graphic interfac p169176 may 1719 2004 london ontario canada woolley david luebk benjamin watson abhinav dayal interrupt render proceed symposium interact 3d graphic april 2730 2003 monterey california gregori johnson juhyun lee christoph burn william r mark irregular zbuffer hardwar acceler irregular data structur acm transact graphic tog v24 n4 p14621482 octob 2005 timo aila vill miettinen petri nordlund delay stream graphic hardwar acm transact graphic tog v22 n3 juli acm transact graphic tog v25 n2 p375411 april 2006