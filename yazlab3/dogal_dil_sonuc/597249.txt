fundament schedul perform video tape librari robot tape librari popular applic high storag requir video server studi throughput tape librari system design new schedul algorithm socal relief compar olderstraightforward one like fcf maximum queue length mql unfair one bypass roughli equival shortest job first propos algorithm incorpor age mechan order attain fair prove certain assumpt minim averag startup latenc extens simul experi show relief outperform competitor fair unfair alik 203 improv throughput reject ratio b introduct even though secondari storag devic base magnet disk becom cheaper increas storag capac remark rate still satisfi econom storag requir videobas databas mani demand applic videoondemand digit librari teleteach video broadcast etc tertiari storag particular tape librari offer econom solut exampl tape storag even consid highend tape librari product ampex dst812 robot librari cost less 3 centsmb highend disk array product maximum strategi gen5 product cost centsmb furthermor figur cover capit cost includ high mainten cost disk storag report work partial support esprit long term research project herm project number 9141 costa georgiadi peter triantafil depart electron comput engin technic univers crete crete greec email address fgeorgiadpetergcedtucgr z peter triantafil contact person x depart comput scienc carnegi mellon univers pittsburgh usa email address christoscscmuedu materi base upon work support nation scienc foundat grant iri9625428 dms9873442 iis9817496 iis9910606 defens advanc research project agenc contract n6600197c8517 addit fund provid donat nec intel opinion find conclus recommend express materi author necessarili reflect view nation scienc foundat darpa fund parti 7mb 17 consid storag 12 databas contain thousand video cost less 400000 highend tape librari chosen eg price ampex dst812 four drive 256 50gb tape 4000000 highend disk array chosen eg price 8 maximum strategi gen5 array store 17tb ii mediums compani report will spend 125000 annual mass storag system one see robot nearlin tape librari desir reason tape librari market grow annual pace 34 17 howev robot tape librari access time remain 3 order magnitud slower diskbas storag due costli robot exchang tape posit oper reason mani demand applic involv abovement storag level hierarch storag server higher fastest level disk storag act cach lowest slowest robot tape librari fact sever realworld product applic digit tv broadcast digit video effect reli upon storag technolog infrastructur 8 sinc tape librari level slowest perform improv transfer data level improv consider overal storag hierarchi perform goal paper twofold first studi central issu schedul retriev request tertiarystorageresid video object second perform fundament tertiari storag robot tape librari video databas 11 tape librari technolog overview tape librari typic consist robot arm tape drive larg number tape cartridg robot mechan loadsunload tape fromto shelv tofrom drive tape technolog employ either linear helic scan record 1 9 linear tape track parallel tape axi read batch either one direct eg serpentin drive helic scan tape track angl tape axi rotat drum read track tape move one direct addit great variabl storag capac tape cartridg typic valu rang gb 330gb total access time tape librari consider high search within tape proce best pace 16gb plu startup cost second mani vendor report robot delay less second least smallercapac tape bring total access cost ten second current tape drive product offer transfer rate 20mb compress 12 problem applic requir video databas high storag requir exampl singl mpeg2 90minut video typic requir least 23gb storag read mpeg2 video tape take 100 second 20 minut depend tape drive perform capabl video access follow skew distribut thu multicast batch singl read video request may prove benefici howev due vcrtype interact request may differ part video prohibit multicast thu workload type consid final request serv within certain time threshold ie nearvideoondemand applic user drop algorithm ensur low startup latenc lucki request expens high dropoutreject ratio realworld use effici schedul algorithm must achiev high throughput respect reject ratio constraint systemlevel issu librari three differ type resourc request compet tape tape drive robot servic request simultan resourc alloc necessari request possess tape want copi replic well possess tape drive mayb robot arm tape alreadi load simultan resourc alloc make effici schedul formid task problem hand therefor twofold first devis effici schedul algorithm appropri complex environ examin perform second studi resourc form bottleneck circumst done allevi bottleneck second problem address examin impact length servic time number tape drive number robot employ set paramet creat bottleneck either robot drive resourc approach experiment analyt first develop optim schedul algorithm simplifi problem set adapt algorithm environ experiment studi compar perform algorithm other found literatur studi gener perform characterist video tape librari section 2 overview relat work section 3 descript tape librari model provid detail descript three schedul algorithm present section 4 section 5 contribut formal problem formul optim schedul algorithm call relief section 6 explain could tape replic incorpor schedul algorithm section 7 present result deriv experi final overview work present section 8 relat work despit fact tape librari storag recogn econom mass storag medium applic video server ii suffer high access time iii current employ mani realworld video deliverymanipul product iv enjoy high market growth rate knowledg report studi effici schedul video tape librari acces experiment investig perform issu video tape librari environ effici schedul algorithm relat work mostli concentr model perform characterist tape drive tape librari product 1 9 13 14 compar studi use tertiari storag multimedia 1 2 7 store elev video block tertiari playback 5 18 cach digit librari document secondari storag 15 stripe analyt model tape librari fcf schedul 6 12 algorithm optim data placement tertiari librari 3 schedul random access tradit data singl serpentin modifi serpentin tape 10 11 16 author contribut schedul algorithm video tertiari librari use sever drive compet one robot arm queu delay could otherwis caus hiccup 3 tape librari simul model one distinguish oper tape librari compon robot arm tape drive oper robot arm perform three fundament task load unload move oper load oper consist grab tape cartridg shelf put drive unload oper consist grab tape drive put back shelf load unload requir arm movement shelf drive perform four oper name medium load medium eject tape searchrewind tape read playback tape librari consist three key resourc tape drive robot arm tape content three resourc caus queu delay queu delay tape occur request tape serv even though may avail drive robot desir tape alreadi use serv anoth request robot queu delay occur avail robot arm request requir one final queu delay drive occur avail drive use wait request notic case simultan resourc occup request may wait tape avail empti tape drive possibl free robot arm desir tape alreadi load model simul close queu network tape librari librari consist tape drive r robot arm tape robot consid similar mean everi oper robot perform also perform everi robot time tape drive also consid similar model tape contain singl video object done simplic sinc allow us bypass deal issu effici placement video object within tape declust issu etc research issu right everi time object access time spent drive transfer data depend object size drive transfer rate video object access tape rewind perform denot sum transfer rewind time term access time access measur second multicast environ simplic assum request transfer time ie video size unicast environ case sinc wish model random access within video case robot invoc requir follow oper take place drive unload old tape idl drive simultan move robot arm toward drive robot unload tape robot movement placement old tape shelf robot movement unload new tape shelf final robot movement drive load new tape whole procedur describ take practic constant time found independ rel locat tape 1 term mount time mount also measur second implicitli assum drive becom idl ie request requir access tape remain drive place offlin ie move away drive request anoth tape host drive must use 1 model user behavior ie way user issu request librari associ object access probabl p request tape playback made accord access probabl object assum standard practic relat work video probabl distribut follow zipf distribut found close reflect user prefer expon control skew distribut greater expon skew distribut typic expon valu found literatur rang 073 2 1 4 note hierarch storag video server primari secondari storag act cach tertiari secondari storag cach absorb request popular video definit affect skew zipf distribut howev experi shown reasonablys secondari storag cach storag capac 5 tertiari back store requir bandwidth servic request popular video thu request receiv tape librari continu follow quit skew distribut signific percentag total request submit video server see appendix unicast environ request best case wait access second order servic request tape must first brought onlin total servic time less access mount second natur time includ queu delay tape drive robot multicast environ request may piggyback anoth sinc singl possibl robot access singl drive access request video serv thu total cost amort piggyback request queu system model depict figur 1 use queue incom request wait servic queue term wait idl drive queue widq drive becom idl schedul algorithm pick request group queue serv sinc robot involv may requir 1 tape drive actual unload tape idl long period time howev minor issu sinc schedul primari concern system heavi load queue select request wait robot arm becom avail queue term wait idl robot queue wirq wirq requir number drive greater number robot robot 1 robot 2 robot r idl robot queue drive 1 drive 2 drive drive subsystem robot subystem reject idl drive queue figur 1 queu system librari model mention request librari requir simultan resourc alloc request requir first tape resourc second drive resourc assign may requir robot resourc desir tape alreadi load onto assign drive two main type event librari arriv new request complet servic request essenc system oper follow arriv new request ffl request enter widq complet request idl drive ffl drive tape declar avail lock ffl schedul algorithm appli request widq select request must avail tape ffl idl drive select tape lock ffl request queu robot necessari case upon complet robot servic take mount time playback start request wait past certain timeout exit system system reject also simplic paper assum request wirq serv fcf basi tabl 1 show system paramet typic valu tabl 1 system problem paramet paramet explan valu number drive 5 r number robot 1 2 number tape 300 access drive access time 2 60 230 sec mount mount time robot drive loadunload 25 sec ro replic overhead 0 20 storag space access probabl th video zipf uniform skew paramet zipf 0271 0271 timeout request reject 5 20 1 min mean number request th video per time unit tp throughput requestshour achiev algorithm mpl multiprogram level number user 20 200 request schedul algorithm request video tape librari next outlin three basic schedul algorithm fcf schedul schedul algorithm pick request closest head queue ie alreadi tape drive oldest one whose tape avail ie use anoth request algorithm serv refer point comparison purpos bypass schedul similar shortest job first younger request allow bypass older request need costli robot access bypass select queue oldest request tape alreadi load idl drive request exist bypass behav fcf bypass tri minim costli robot oper multicast environ bypass schedul allow request queue wait video select request piggyback onto select request bypass unfair algorithm suffer starvat thu becom use incorpor age mechan avoid starvat paper studi bypass without age note perform upper bound perform use bypassbas algorithm age maximum queue length mql schedul mql suitabl environ multicast allow algorithm partit wait queue number queue one tape schedul time select serv queue greatest length motiv increas much possibl amort benefit gain multicast algorithm studi similar context name effici batch polici video request found perform well 4 mql also suffer starvat mpeg2 video bandwidth 4mb 80 minut 4800 second need 48004 mbits24gb storag tape drive transfer data rate 12mbsec retriev video 24gb12mbs200 second 5 formal approach 51 formal problem formul goal find tape request serv drive becom avail answer pick request maxim relief ratio next give definit justif first studi structur problem consid queue set given one server eg io channel tape drive abl broadcastmulticast data item eg video movi ii request distinct video item iii ith video item servic length l time unit iv ith video item access probabl p v request item arriv mean rate assum access probabl p remain constant time want find often schedul multicast item want find cycl time c item minim averag wait time ie startup latenc request notic cycl time c integ multipl unit time measur time unit begin one broadcast item begin next broadcast theorem 1 singl multicast server item access probabl p ith item optim cycl time c ith item given c proof averag wait time w given percentag time unit server engag video l c assum server never idl ie util 1 percentag sum 1 thu want minim eq 1 subject constraint eq 2 use lagrang multipli theori use eq 2 get qed 52 propos schedul algorithm relief initi schedul problem crucial observ eq 3 impli assupt mean arriv rate constant ii mean arriv rate item get sinc constant eq 4 becomes2 c intuit c account averag number request serv everi broadcast ith item cumul wait time cumul relief enjoy broadcast ith item divid l give us amount relief enjoy per unit time broadcast item let call relief ratio ith itemtap cumul wait time relief schedul access probabl p unknown singl multicast server choos object maximimum relief ratio justif follow eq 6 impli optim choic cycl c 1 relief ratio item start broadcast item constant equal item clearli mean relief ratio item higher relief ratio everi item second start broadcast ith item item j higher relief ratio clearli relief ratio would increas wait broadcast thu would increas inequ relief ratio item j goe principl eq 6 way assur best achiev maximum possibl relief next l servic time unit fact access probabl constant time relief inde optim automat lead optimallength cycl corollari 1 relief heurist optim access probabl p constant time even unknown us proof sketch server automat pick ith object result optim cycl time theorem 1 qed propos schedul algorithm base previou proof relief ratio key choos next request serv relief algorithm attempt improv perform minim averag startup latenc video request achiev calcul everi request queue total wait time b servic time comput relief ratio request servic time intuit select request either long wait time andor requir small servic time thu essenc algorithm pick request result greatest wait time relief smallest resourceoccup time multicast request video form request group algorithm select group highest group relief ratio group relief ratio comput sum wait time member group divid servic time whole group addit novelti relief algorithm note age mechan schedul algorithm typic found adhocli base sound formal argument 6 video tape replic singl copi object might result maximum drive util satisfi startup delay see consid follow scenario librari ten tape drive bypass relief mql schedul disciplin use suppos video access probabl 09 mean around 90 request pend hot object drive small number request pend probabl idl drive follow observ aris natur anoth replica hot object one idl drive could util perform system would improv lead us notion object replic distinct object might number replica furthermor logic choic maintain mani replica object access probabl induc way two object access probabl ratio equal hold ratio number replica equal 0 0 total number tape use store replica refer 0 term replic overhead use fraction exampl librari 100 20 replic overhead 0 20 tape use replic total 0 120 tape system replic appli basic schedul algorithm regardless multicast algorithm alreadi describ need tune far algorithm describ singl copi tape algorithm select particular group request request must one avail tape desir tape alreadi use activ drive algorithm select anoth request repeat process request select avail tape replica algorithm select group request serv long one replica desir tape avail 7 perform result simplic investig system resourc drive robot affect perform primari perform metric system throughput reject turn section focus perform comparison schedul algorithm use primari perform metric reject ratio system throughput reject ratio constraint sinc meaning metric realworld applic number distinct tape therefor object set singl robot arm consid system r 1 unless otherwis state robot mount time mount set 25 second drive access time access set 200 second unless otherwis state use notat ro replic overhead ro 02 mean cartridg store replica object use zipf distribut state model access probabl distribut object 71 impact drive access time number robots130150170190210 throughput r1 d5 unicast ro0 theta0271 averag startup latenc r1 d5 multicast ro0 theta0271 b figur 2 drive access time impact figur 2a 2b show throughput function mpl relief unicast multicast environ first thing notic throughput unicast drop access time increas easili explain sinc request take time servic forc wait one stay longer queue interestingli enough multicast relief algorithm affect drive access time latter less 100 second happen multicast throughput system much greater compar unicast make robot resourc even sever bottleneck situat ceas occur averag case one drive wait get load time ie time elaps two consecut media exchang drive ie drive access time robot arm enough time load rest drive access gamma 1 mount r 8 accord formula minimum access time robot bottleneck mount r equal 100 second graph last observ suggest criterion extra robot arm requir orand drive need access valu system resourc well util figur 3 weshowhow increas one number robot affect abovement graph throughput d5 taccess60 unicast ro0 theta0271 relief figur 3 impact number robot unicast multicast scheme consider improv throughput addit note robot longer bottleneck exampl access 60 see consider perform improv ad second robot arm 72 impact number drive figur 4a 4b 4c show throughput increas proport number drive happen number request system larg enough none drive idl therefor duplic number drive doubl throughput reduc startup latenc half howev limit number drive beyond perform system improv proport number drive even improv see figur 4a 4b graph 10 due fact singl robot arm becom bottleneck result drive underutil thing hold bypass fcf mql polici although shown100200300 throughput r1 taccess80 zipf multicastro0 theta0271 relief r1 taccess50s110 zipf unicast ro0 theta0271 relief r1 taccess50s110 uniform unicast ro0 theta0271 relief b c figur 4 effect number drive system perform figur 4b 4c one wit skew access frequenc better perform relief disciplin happen relief well bypass skew distribut select request higher probabl find desir video onlin hand although shown fcf mql algorithm almost improv observ skew distribut use fcf polici benefit skew distribut first request pick widq idl drive emerg video releas probabl last occur increas slightli uniform distribut replac zipf one 73 perform comparison schedul algorithm unicast use access 200sec suffici away point robot bottleneck seen section 71 731 reject ratio first perform metric concern reject ratio defin fraction reject request request submit system reason run associ request timeout request schedul yet reject figur 5 show result two differ timeout valu two main observ 1 fcf mql relief similar perform justifi sinc three algorithm unicast environ tend choos request head widq reason show graph perform relief bypass 2 two fundament observ regard perform reject ratio bypass relief bypass benefit number reject high either low timeout valu high mpl valu happen bypass reject request reenter system get anoth chanc lucki request load tape b relief natur fair algorithm tri evenli distribut wait time among request establish wait time mpl increas wait time approach surpass reject timeout lead smaller reject ratio relief smaller mpl valu two observ explain bypass closer relief timeout valu 5 minut high mpl valu timeout 20 minut import thing note howev small timeout valu 20 min high mpl valu bigger timeout valu eg timeout valu 20 minut mpl greater reject ratio unaccept result subsect signific util help video storag system establish admiss control request admit system given reject ratio constraint violat reject r1 d5 taccess170s230 unicast ro0 theta0271 bypass tout20min bypass tout5min figur 5 effect timeout valu relief bypass 732 throughput reject ratio constraint given real video storag system high reject ratio request would intoler focu throughput variou schedul algorithm given admiss control video server admit maximum number request servic without exceed certain threshold valu reject ratio tabl show result obtain follow first determin graph previou subsect algorithm maximummpl valu reject ratio constraint 01 satisfi subsequ turn graph show throughput algorithm function mpl shown space reason determin correspond throughput algorithm maximum mpl valu tabl 2 d5 access 200sec 0271 20min rr 01 ro0 unicast fcf 19 6414 bypass see relief achiev highest maximummpl valu slightli better throughput compar mql consider better throughput compar fcf howev slightli wors throughput bypass particular relief achiev 147 higher throughput mql 5017 higher throughput fcf 151 lower throughput bypass 74 perform comparison schedul algorithm multicast 741 reject ratio02061 reject r1 d5 taccess200 tout20min multicast ro0 theta0271 bypass fcf reject r1 d5 taccess200 tout20min multicast ro0 theta0271 bypass fcf mql b figur reject ratio two differ zipf access distribut figur 6 show reject ratio algorithm timeout equal 20 minut two differ zipf distribut see figur 1 fcf exploit multicast capabl henc highest averag startup latenc natur lead greater reject ratio 2 bypass hand allow multicast fcf specif exploit like mql relief bypass mainli concern pick request group requir robot exchang that perform mql relief 3 relief algorithm better reject ratio perform mql mpl valu greater 40 better perform due fact design relief aim reliev system much wait miseri possibl per servic time unit 4 also see skew access distribut reject ratio valu smaller algorithm except fcf ii differ reject ratio relief mql start smaller mpl valu 742 throughput reject ratio constraint tabl 3 show result obtain case tabl 2 tabl 3 d5 access 200sec 0271 20min rr 01 ro0 multicast improv max mpl other 48 22184 bypass 42 17404 2746 see relief achiev higher maximum mpl valu throughput valu 8 impact tape replic figur 7a 7b show throughput relief function mpl unicast three differ dvalu r2 gamma0271 chose r2 saw earlier throughput improv increas number drive stay one robot conclus drawn studi follow first three conclus hold mql bypass algorithm also metric reject ratio throughput without timeout reason space reason show perform relief timeout unicast also report import find 1 although shown slight improv evidenc less skew access distribut improv due fact replic increas probabl select request find avail tape thu allow algorithm optim greater extent 2 skew distribut perform improv signific see figur 7a 7b addit improv due greater drive util exampl skew distribut drive one replica per tape result drive underutil 3 multicast environ shown graph replic help biggest contributor improv far multicast featur 4 interest subtl behavior throughput system better replic unicast lower aggreg drive util 10 5 latter turn due fact 10 request chanc servic drive request typic induc robot exchang workload request serv 5 conclus also support signific lower reject ratio observ d10 throughput r2 taccess170s230 unicast ro0 theta0271 relief throughput r2 taccess170s230 unicast ro02 theta0271 relief b figur 7 impact replic 9 conclud remark studi perform behavior robot video tape librari varieti workload access distribut access time unicastingmulticast varieti schedul algorithm mql bypass relief major contribut ffl problem definit along nuanc skew tapeaccess probabl unicast ingmulticast simultan resourc alloc replic perform metric etc ffl design relief novel fair schedul algorithm nearoptim proof contrast schedul algorithm use adhoc mechan achiev fair ffl extens experiment show relief outperform competitor 203 compar fcf 27 compar bypass 37 compar mql throughput reject ratio note bypass mql unfair starvationbound ffl condit robotarm tape resourc becom bottleneck eq 8 ongo work includ studi taperepl scheme studi tape librari schedul algorithm applic r tertiari storag evalu new applic challeng tertiari storag multimedia server principl optim place data tertiari storag librari dynam batch polici ondemand video server multimedia repositori person comput hierarch storag system analysi stripe techniqu robot storag librari studi use tertiari storag multimedia system role data storag broadcast futur model perform characterist serpentin tape drive random io schedul onlin tertiari storag system schedul noncontigu tape retriev analyt perform model robot storag librari perform measur tertiari storag devic benchmark tape system perform vertic data migrat larg nearlin document archiv base markov chain predict costeffect nearlin storag server multimedia system untangl tape storag cost ondemand data elev hierarch multimedia storag server tr ctr peter triantafil r harpantid pateraki high perform data broadcast system mobil network applic v7 n4 p279290 august 2002