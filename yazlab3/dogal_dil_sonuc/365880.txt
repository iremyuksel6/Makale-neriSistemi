exact analysi exact chang introduc kpayment problem given total budget n unit problem repres budget set coin k exact payment total valu n made use k disjoint subset coin goal minim number coin given n k allow actual payment made onlin name without need know payment request advanc problem motiv electron cash model coin long bit sequenc typic electron wallet limit storag capac kpayment problem addit applic resourceshar scenariosour result includ complet character kpayment problem follow first prove necessari suffici condit given set coin solv problem use character prove number coin solut kpayment problem least k hnk hn denot nth element harmon seri condit also use effici determin k maxim number exact payment given set coin allow worst case secondli give algorithm produc n k solut minim number coin case denomin avail algorithm find coin alloc k1hnk1 coin upper lower bound best possibl final show gener algorithm case denomin avail b introduct consid follow everyday scenario want withdraw n unit money bank teller ask would like let us assum need exact chang ie given payment request p n abl choos subset coin whose sum precis p let us assum would like withdraw n unit least possibl number coin case answer depend estim mani payment go make worst case may make n payment 1 unit forc take n coin denomin 1 extrem may need make singl payment p case even dont know p advanc log coin sometim suffici explain later articl provid complet analysi gener question call kpayment problem smallest set coin enabl one satisfi k exact payment request total valu n motiv payment system physic electron transact requir payment exact amount forc shop provid chang custom possess exact chang simpli shift problem custom shop number coin particularli import electron cash see eg 2 3 electron coin inher long bit sequenc handl comput intens typic smartcard use store small memori space comput power 7 anoth interest applic problem aris context resourc share concret consid commun link whose total bandwidth n link share timemultiplex fix schedul assign timeslot say cell atm line differ connect typic schedul small time slot sinc assign big slot small request entail underutil import note howev inher fix overhead associ time slot eg header atm cell would therefor desir multiplex schedul time slot variou size accommod set request least number slot similarli withdraw scenario improv upon trivial n unitslot solut achiev know mani connect might run parallel know bound k number restrict longliv connect problem design schedul natur reduc kpayment problem kpayment problem definit formal problem follow two paramet budget denot n number payment denot k problem find 1 number icoin also call coin denomin denot c follow two requir satisfi budget complianc kpartit sequenc k payment request denot n exist way exactli satisfi payment use coin exist nonneg integ repres number icoin use jth payment problem thu broken two part follow coin alloc problem partit n coin given n k ie determin c coin dispens problem given c actual make payment possibl variant kpayment problem first mani system denomin avail exampl know system 3coin even electron cash realm denomin may expens resourc denomin requir distinct pair secretpubl key central author see eg 1 8 thu interest variant alloc problem restrict denomin version set possibl solut restrict c given allow denomin set also one may consid onlin coin dispens problem algorithm requir dispens coin payment request without knowledg futur request offlin version valu k payment assum known first coin dispens result turn coin dispens problem easi greedi strategi work even onlin set result concern coin alloc problem sometim refer part problem kpayment problem basic result simpl necessari suffici condit sequenc c 1 coin solv alloc problem theorem 31 use character prove theorem 36 lower bound khnk k lnnk number coin solut n k h n denot nth element harmon seri lower bound best possibl sens met equal infinit mani n ks theorem 38 character use effici determin maxim number k given collect coin solv k payment problem corollari 39 next major result effici algorithm find solut n k use least possibl number coin first deal case denomin allow theorem 41 case number coin never theorem 47 similarli lower bound upper bound best possibl gener theorem 48 final use idea slightli refin way extend algorithm gener case restrict denomin set theorem 51 relat work best knowledg current work first formul gener kpayment problem henc first analyz one relat classic combinatori problem kpartit question mani way natur number n repres sum k posit integ problem less structur kpayment problem use deriv lower bound howev bound suboptim see section 2 postagestamp problem also close relat cast term postag stamp problem find set denomin allow pay request valu use h coin n maxim postagestamp problem view invers 1payment problem one payment make number coin given goal find denomin set given size maxim budget remark postagestamp problem consid difficult problem even small number denomin see eg 10 11 4 anoth relat question chang make 6 problem repres given budget least number coin given allow denomin set gener changemak weakli nphard kozen zak 5 verma xu 14 studi question denomin set allow one use greedi strategi optim chang make organ section 2 introduc notat give preliminari observ briefli discuss suboptim result section 3 prove character k payment problem lower bound number coin solut section 4 present analyz optim algorithm unrestrict denomin case section 5 extend algorithm case restrict denomin final section 6 give short overview applic result electron cash notat simpl result section develop intuit kpayment problem present simpl upper lower bound number coin requir notat shall use throughout articl summar figur 1 solut c clear context remaind articl fix n k arbitrari given posit integ note may assum without loss gener k n sinc payment request valu 0 ignor let us rough analysi kpayment problem alreadi mention case trivial solv take c better solut possibl sinc c 1 k would satisfi k payment valu 1 case quit simpl least integ 1 solv coin denomin given request p satisfi use coin correspond one binari represent p howev immedi clear one gener solut arbitrari n k consid arbitrari n usual techniqu round next power 2 paramet problem specif total budget ffl k number payment ffl set allow denomin unrestrict case quantiti relat solut specif number coin denomin aka icoin convent budget alloc use coin denomin less formal ffl largest denomin coin formal alway quantiti relat make payment refer respect quantiti payment made standard quantiti convent h figur 1 glossari notat seem appropri kpayment problem ask teller bank round amount withdraw conveni us let us ignor point moment consid problem gener k allow make dubiou assumpt may enlarg n one simpl solut would duplic solut 1payment k time let payment use dedic set coin specif mean alloc k 1coin k 2coin k 4coin k 2 dlog 2 coin result approxim k log 2 n coin guarante base simplist construct pay k payment know payment must valu n howev total budget alloc solut fact kn thu seem solv kpayment problem state limit valu payment place sum rather individu valu asid remark one corollari work specif theorem 31 coin dispens done use greedi strategi see binari construct coin alloc inde solv gener kpayment problem precis highest possibl denomin use mani icoin possibl 4 dispens j icoin figur 2 greedi algorithm coin dispens p amount paid assum power 2 coin alloc algorithm alloc k coin denomin clearli number coin k log 2 sum n coin dispens made greedili point largest possibl coin use descript greedi dispens algorithm present figur 2 howev one note perhap surprisingli result also indic binari algorithm right gener 1 best algorithm describ section yield factor improv ie roughli 30 fewer coin let us reconsid question gener n algorithm infinit mani valu k n gener arbitrari n k easi find solut n 0 dispens payment valu remain set coin coin alloc total budget n use k addit payment sinc origin set solv 1payment problem close section simpl lower bound number coin requir solut kpayment problem bound base count argument sketch number distinct possibl payment request allow observ algorithm must dispens differ set coin respons request follow number coin solut must least log 2 n 1 argument extend gener k use observ number distinct respons algorithm disregard order least p k n number way repres n sum k posit integ use standard bound partit see eg 13 sinc number respons exponenti number coin one conclud number coin omegagamma k lognk 2 3 problem character section first prove simpl condit necessari suffici set coin correctli solv kpayment problem use result obtain sharp lower bound number coin solut kpayment problem final outlin effici algorithm given set coin determin maxim k solut kpayment problem pleas refer figur 1 notat 31 necessari suffici condit theorem 31 solv kpayment problem ki theorem proven seri lemma necess proof hard intuit hardest case payment request equal interest part suffici proof start upper bound largest denomin solut lemma 32 solv kpayment problem dnke proof contradict suppos dnke consid k payment valu bnkc dnke total sum n clearli none payment use mcoin sinc c 1 definit total budget avail payment n gamma contradict follow lemma slightli stronger condit theorem 31 use version proof theorem 36 lemma 33 solv kpayment problem ki proof let bnkc ki n consid k payment valu payment done coin denomin henc ki turn suffici start show condit theorem 31 hold singl payment valu n satisfi greedi algorithm lemma 34 let p payment request suppos j 1 2 p satisfi greedi algorithm use coin denomin j less proof prove induct j claim hold j p base case henc least p 1coin use pay amount total sum induct step assum claim hold j p consid j 1 let number j 1coin dispens greedi algorithm name let r denot remaind payment algorithm dispens j 1 note 2 trivial hold dispens j 1coin need show 1 hold well consid two case c j1 use 1 get done case c j1 sinc algorithm greedi must case r 1 hand 2 j j henc j r done case follow lemma key invari preserv greedi algorithm interest note algorithm proce larger coin smaller one induct proof goe opposit direct recal prime quantiti refer valu payment done lemma 35 ki hold greedi algorithm dispens amount tm 0 hold proof induct claim trivial assum claim hold amount dispens use coin denomin name j smallest remain denomin larger note j well defin sinc name largest remain coin next note sinc coin denomin whose sum use algorithm observ sinc algorithm greedi sinc least one jcoin use algorithm must case total amount dispens use coin denomin smaller j less j ie use eq 1 get final use assumpt appli complet proof character proof theorem 31 necess condit follow directli lemma 32 33 suffici assum ik consid sequenc k request total valu n lth request serv greedi algorithm induct applic lemma 35 0 moreov lemma 34 amount total remaind paid long complet proof 32 lower bound number coin use theorem 31 deriv lower bound number coin solut kpayment problem theorem 36 number coin solut kpayment problem least first prove littl lemma use theorem 47 lemma 37 number j proof proof theorem 36 lemma 37 lemma 33 bnkc ki lower bound theorem 36 best possibl gener shown follow theorem theorem 38 natur number infinit mani n exist solut kpayment problem budget n exactli kh bnkc coin proof choos natur number km case solut solv kpayment problem theorem 31 total number coin precis kh bnkc 33 determin k given set consid invers problem given set coin c coin denomin question mani payment make use coin ie find k note k well defin say k 0 payment request satisfi set k never total budget theorem 31 directli appli answer question effici impli follow simpl corollari corollari 39 let given coin alloc solv kpayment problem k min fbt ic mg 4 optim algorithm unrestrict denomin present coin alloc algorithm find minim solut kpayment arbitrari n k assum denomin avail first prove optim algorithm give upper bound number coin alloc section 5 gener algorithm handl restrict set denomin algorithm given arbitrari integ n k 0 algorithm present figur 3 find optim coin alloc intuit algorithm work scan possibl denomin least number icoin suffic make ki number coin c thu approxim ith harmon element multipli k budget exhaust remaind ad simpli singl addiotin coin 41 optim alloc theorem 41 let denot solut produc alloc solv kpayment problem use least possibl number coin allocaten 4 denomin order add icoin dont overflow 9 n add remaind figur 3 algorithm optim solut kpayment problem unrestrict denomin proof follow lemma 43 lemma 45 import properti algorithm state follow loop invari lemma 42 whenev alloc execut line 4 follow assert hold ii proof line 4 reach execut line 13 execut loop line 58 former case lemma hold trivial suppos line 4 reach iter loop denot 0 valu variabl last execut loop line 7 8 execut hold trivial execut henc hold loop execut also note l kigammat 0 1 therefor iii hold true execut loop final prove ii hold execut loop line 78 execut ii hold trivial suppos line 78 execut case line mean therefor line 7 c l kigammat henc l kigammat 0 done use lemma 42 theorem 31 correct easili proven introduc notat facilit separ handl remaind valu c variabl line 9 execut lemma 43 solv kpayment problem proof lemma 42 conjunct line 910 code upon complet algorithm ii lemma 42 sinc line 4 10 largest denomin denomin therefor theorem 31 solv kpayment problem prove optim take work first deal coin alloc line 9 reach show even remaind nonzero additin coin alloc line 10 solut produc alloc still optim end fix arbitrari solut kpayment problem use follow addit notat ffl number icoin ffl u budget alloc use coin denomin less u ffl n largest denomin coin formal note definit follow hold 0 c lemma show alloc optimalignor remaind lemma 44 c proof contradict suppos l smallest index ie use eq 2 l henc eq 3 l c impli integr l c sinc iii lemma 42 ld l ic ie u l kl contradict theorem 31 sinc l n prove optim even consid remaind lemma 45 proof consid two case n use lemma 44 fact n 1 definit n get c done case suppos n let prove lemma show first note sinc lemma 44 use eq 3 get hand sinc u therefor follow eq 2 consid two subcas reduc nb done subcas otherwis proof lemma 45 complet 42 number coin alloc alloc theorem 41 prove number coin solut produc alloc optim give tight bound number term n k nice interpret bound say worst penalti n k nice equival requir extra payment ie solv 1payment problem nice n k remark know direct reduct prove result first prove upper bound slightli sharper gener bound lemma 32 lemma 46 largest denomin coin gener alloc satisfi l n proof iii lemma 42 1i particular ii lemma 42 use also eq 5 get 1 integr l n theorem 47 number coin solut produc alloc k proof iii lemma 42 integr conjunct lemma 37 46 impli c therefor upper bound given theorem 47 best possibl gener proven follow theorem theorem 48 natur number infinit mani n solut kpayment problem budget n requir least k coin proof choos natur number divis 2 3 n k algorithm produc largest denomin c follow number coin case precis 5 gener restrict set denomin turn attent restrict denomin case set given set natur number requir solut c get optim algorithm arbitrari set denomin allow solut 1 follow idea algorithm alloc ensur least number coin treatment remaind complic motiv add remaind least possibl number coin also make sure invari maintain main loop broken restrict remaind alloc use denomin alreadi consid fact remaind alloc precis changemak problem solvabl dynam program ming allow denomin set 5 14 greedi strategi work main algorithm allocategener given figur 4 complet also includ figur 5 descript dynam program algorithm optim changemak allocategener analysi use follow addit notat ig largest allow denomin smaller ig smallest denomin larger prove allocategener correct number coin alloc optim remark gener argument similar unrestrict case somewhat refin theorem 51 let denot solut produc allocategener solv kpayment problem allow denomin use least possibl number coin proof follow lemma 53 58 use loop invari captur import properti algorithm lemma 52 whenev allocategener execut line 4 follow assert hold ii proof line 4 reach execut line 13 execut loop line 510 former case lemma hold trivial 1 observ problem solvabl 1 2 1coin certainli satisfi payment request valu 1 1 allow trivial solut n 1coin work k allocategeneralizedn k 4 largest den smaller next one l j 8 l kj gammat check budget exhaust 9 c l kj gammat add coin els goto 12 13 0 fd j 2 ig add remaind without greater denomin figur 4 algorithm optim solut kpayment problem allow denomin latter case let 0 denot valu variabl last execut loop line 9 10 execut hold trivial execut hold loop execut whether line 9 10 execut l kj gammat 0 thu iii true execut loop final show ii hold execut loop line 8 execut line 11 execut ii hold trivial otherwis line 910 execut c l kj gammat henc l kj gammat 0 correct allocategener proven next lemma follow convent section 4 denot alloc produc allocategener line 12 denot c valu correspond c respect lemma 53 solv kpayment problem allow denomin proof lemma 52 conjunct line 1214 code upon complet algorithm highest denomin alloc algorithm ii lemma 52 fact makechang use coin higher denomin line 13 1 therefor theorem 31 solv kpayment problem makechangerd 2 6 r downto 1 7 8 9 gamma j return r figur 5 dynam program algorithm find least number coin whose sum r unit use denomin set array multiset turn prove optim algorithm analysi proce similarli section 4 first show alloc coin remaind ie line 12 execut optim prove handl remaind optim well proof complic fact order ensur correct allocategener alloc remaind use denomin alreadi consid main loop henc immedi clear remaind alloc optim remaind section fix arbitrari competitor solut defin notion analog defin solut produc allocategener ffl number icoin ffl u budget alloc use coin denomin less u ffl n largest denomin coin formal facilit treatment remaind fix arbitrari subsulot solv kpayment problem budget possibl sinc solut budget n also solut budget smaller n use follow addit definit jd analog largest denomin largest denomin alloc line 12 allocategener henc final defin definit 0 c start prove allocategener produc optim solutionignor remaind lemma 54 1 c proof suppos l smallest index ie use l henc eq 7 impli integr l c l iii lemma 52 therefor sinc l u ld l id ic u contradict theorem 31 sinc l corollari 55 n proof suppos lemma 54 u contradict fact u next prove solut use denomin larger largest one use lemma 56 n proof consid two case suppos first line 12 reach test condit line 4 henc remaind alloc dynam algorithm note n maxn therefor n maxm done case suppos next line 12 reach line 11 case sinc henc suppos contradict n least one coin denomin alloc henc n get eq 8 contradict theorem 31 sinc follow remaind alloc optim choic subsolut corollari 57 c proof lemma 56 amount must alloc use denomin use statement therefor follow optim dynam program use makechang prove optim full solut lemma 58 proof corollari 57 suffici prove number coin least much n done lemma 54 remain consid case similarli lemma 45 defin notat suffici show lemma 54 use eq 7 get u id also sinc u u c ic henc b thu eq 6 get requir 6 exact payment electron cash section discuss issu exact payment model electron cash ecash briefli model bank set user set shop withdraw deposit protocol involv bank user shop payment protocol involv shop user requir user anonym given coin imposs infer user withdrew even shop bank collabor hand ident user reveal user pay coin model implement electron wallet call smart card sever limit capac storag comput 7 way implement exact payment ecash simplest way use multipl coin case result present paper explain coin withdrawn anoth approach divis coin 9 8 12 arbitrari portion coin spent long sum exceed valu coin expect size divis coin comput resourc time commun requir manipul greater nondivis coin intermedi approach present 12 composit coin divis set prescrib set subcoin subcoin use payment deposit divid although size composit coin grow linearli number constitu subcoin c subcoin typic size composit coin 500 size still smaller size arbitrarili divis coin suffici small number subcoin result paper particularli use composit coin one get reason bound k number exact payment composit coin better arbitrarili divis coin respect certain rang n k current technolog techniqu 12 better k acknowledg thank mike sak richard stanley yishay mansour help discuss eric bach bring postag stamp problem attent rakesh verma provid us copi 14 agn chan valuabl suggest comment r untrac offlin cash wallet observ blind signatur untrac payment untrac electron cash construct distribut loop network optim bound changemak problem knapsack problem algorithm comput implement cryptograph smart card effici divis electron cash scheme univers electron cash postag stamp problem 3 denomin associ base postag stamp problem effici electron notion techniqu cours combinator optim greedi chang make tr