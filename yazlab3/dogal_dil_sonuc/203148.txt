approxim analysi readerwrit queue analyz perform queue serv reader writer reader serv concurr writer requir exclus servic approxim analyz firstcomefirstserv fcf readerwrit queue deriv simpl formula comput wait time capac assumpt poisson arriv exponenti servic extend analysi handl onewrit queue queue includ writeintent lock simpl analys present use rulesofthumb design concurr system b introduct analys databas oper system concurr control algorithm handl case exclus access practic howev mani concurr control algorithm use share exclus lock share lock import increas concurr reduc serial delay paper describ queue model reader writer access share resourc reader place r read lock writer place w write lock number r lock may held simultan one w lock may place given time addit r w lock incompat held simultan queu disciplin manag lock access fair reader starv writer vice versa common fair criterion fcf lock ff arriv lock fi grant ff grant fi fcf lock queu mechan obey follow protocol job servic finish first job queue reader grant access reader first writer first job writer grant lock writer addit queue empti reader servic reader arriv grant lock reader see figur 1 call type lock queue fcf readerwrit queue fcf rw queue short also analyz variat fcf rw queue variat call onewrit queue one writer queue time reader arriv rate much larger writer arriv rate onewrit queue mani applic exampl analysi commun driver 15 use onewrit queue model queue writeintent lock ruw queue ruw queue incom stream consist r u lock r lock compat u lock u lock compat u lock occasion upgrad w lock exclus ruw queue model writeintent lock often use concurr data structur 3 multigranular lock 4 model develop predict expect wait time r w u lock addit model predict probabl w lock queue determin whether resourc serv offer load sever analys read write access share resourc context databas perform 23 17 6 exampl tay 23 handl readonli request modifi formula probabl lock conflict assum queu share data rare problem queu share data model context replic databas assum k copi file two differ copi file may read simultan coffman et al 7 analyz satur queue write request preempt current reader 8 coffman gelenb plateau analyz queue except reader may begin read copi file soon written baccelli coffman 2 analyz preemptiv queue poisson arriv nelson iyer 18 analyz nonpreempt queue job arriv poisson process fcf order read oper receiv exponenti distribut servic write oper receiv phase distribut servic exponenti distribut exampl phase distribut nelson iyer analysi thought exact analysi approxim fcf rw queue reader writer receiv fcf servic k reader may serv simultan analysi requir iter step involv multipl k k matric courcoubeti et al 10 1 analyz queu system k queue ordinari custom requir servic one queue lock custom requir servic queue simultan thomasian nicola 24 26 25 use vacat server model studi optim control readerwrit queue courcoubeti reiman 9 use system k queue ordinari lock custom studi optim control readerwrit queue reiman wright 20 19 provid exact analysi stabil first queue system describ paper permit arbitrari reader writer servic time permit writer arriv process arbitrari renew process author also provid lower upper bound lock wait time heavi traffic approxim paper two main contribut first contribut simpl formula predict capac wait time fcf rw queu system formula provid simpl rule thumb design concurr system 12 11 second contribut paper analysi onewrit queue ruw queue best knowledg queu system treat approxim fcf rw queue difficulti analyz readerwrit queue two differ class custom receiv differ type servic writer tractabl two class receiv exclus fcf servic therefor approxim readerwrit queue fcf queue aggreg custom writer togeth reader immedi ahead queue aggreg custom arriv rate w servic time equal servic time writer plu servic time reader immedi ahead need calcul servic time reader enter queue enter writer previou writer two case either enter writer find anoth writer queue writer queue anoth writer queue enter writer must wait reader enter writer arriv otherwis writer must wait reader surviv yet finish servic writer enter use follow symbol definit analysi reader arriv rate reader servic rate probabl writer queue writer util expect time serv aggreg custom writer reader arriv previou writer current writer must wait expect time writer must wait reader arriv previou writer previou writer still queue upon arriv current writer expect time writer must wait reader arriv previou writer previou writer finish current writer arriv expect wait time writer expect wait time reader time serv n reader r number reader arriv second time writer find anoth writer queue number surviv reader servic time time custom spend receiv servic servic period total time custom spend queue servic timewait time main result section theorem 1 probabl writer queue ae w satisfi r r result need perform analysi time n concurr reader serv reader serv concurr rate r dt pr r n proof model situat puredeath process let state k condit k reader left let p k probabl system state k time system state k time reader die rate k r model p 0 descript system lead follow system differenti equat dpn dt gamman r pn dt dt initi condit pn solut differenti equat r 1p k1 xe krx dx solut recurr last differenti equat tell us dp0 dt corollari 1 1i 3 proof dt r r last step applic combinatori ident found 21 page 4 ffl tool calcul expect time need serv reader front writer w anoth writer queue w enter need calcul number reader enter queue enter writer previou writer suppos time writer arriv let random variabl r number reader arriv second reader poisson arriv rate r distribut calcul distribut number reader arriv arriv two writer find uncondit distribut r need know distribut probabl interarriv period last least second given arriv writer find least one writer queue probabl interarriv period last least second servic period wait time plu servic time previou writer last least second let tw random variabl repres interarriv time writer find queue util dt prtw dt printerarriv time delta prpreviou writer still queue k normal constant suppos alreadi know expect servic time aggreg custom 1 probabl writer queue ae model aggreg queue mm1 queue know servic period distribut wait time servic time 13 probabl previou writer serv second dt use distribut tw get dt prt w tdt r 1r r r ra ra lead lemma 2 expect time serv reader front writer arriv queue alreadi contain writer r proof random r use r calcul uncondit expect r r ar order solv sum appli abel transform 16 page 36 deltax k r let k n1 k k use wellknown expans ln1 substitut valu substitut w ae w multipli lead constant get r r r next must calcul expect wait time serv reader case writer enter queue find reader queue use expect valu alreadi calcul reader may left queue writer enter queue calcul distribut number reader queue writer arriv intract instead distribut calcul expect number reader still queue consid three point time respect particular writer w enter queue find writer queue occas point previou writer enter queue occas b point previou writer left queue occas c point w enter queue see figur 2 reader arriv departur independ consid expect number surviv reader ab bc separ need know length interv ab bc arriv distribut memoryless length bc exponenti distribut paramet w find approxim distribut length ab way found approxim distribut tw probabl ab last least second probabl previou writer servic period last least second writer interarriv time least second dt consid survivor bc first probabl reader enter queue time reader enter queue second c surviv probabl therefor expect number surviv reader bc second long uncondit distribut n bc r becom r 1r wr next consid survivor ab expect number survivor ab expect number reader arriv ab surviv bc suppos probabl surviv bc p k reader arriv ab expect number survivor n ab r k p equal kp remov depend n ab r k p k need know distribut number arriv ab sinc distribut ja bj distribut u w number reader arriv ab distribut r k0 kp ra ra interv bc second long probabl surviv use get uncondit distribut n ab r get r 1r expect number survivor w arriv order calcul expect wait time assum number surviv reader geometr distribut mean 1 r number surviv reader calcul mean manner lemma 2 get lemma 3 expect time serv reader front writer find writer queue arriv r know expect servic time aggreg custom use fact ae valu r e r u get r r prove theorem 1ffl find ae w find root ae w equat done iter nonlinear equat solv packag queue stabl ae w 1 correct ae w found tri solv queue mm1 queue arriv rate w servic rate 1aw system expect wait time ae waw wait time aggreg custom wait time reader writer must also wait reader ahead finish corollari 2 aggreg queue model mm1 queue expect wait time reader writer custom 201 mg1 model also consid server network exponenti stage probabl ae w servic expect 1w second expect r u second probabl servic expect 1w second expect r e second laplac transform servic time server given ae w r expect wait time mg1 queue given 13 pg190 x servic time server valu x 2 found differenti laplac transform twice evalu zero give corollari 3 aggreg queue model mg1 queue expect wait time reader writer custom e 21 maximum throughput theorem 1 use predict maximum throughput corollari 4 maximum throughput w r w r satisfi e r 1w gamma1 w proof theorem 1 solv r ffl note stabil condit deriv 20 19 applic find maximum throughput queue proport reader writer constant corollari 5 r maximum writer arriv rate corollari 5 impli increas reader servic rate better increas writer servic rate opposit true theorem 1 also use find arriv rate ae 22 comparison experi rw queue simul built experi run six hundr thousand sampl taken result simul compar analyt result tabl 1 show comparison mm1 model simul analyt calcul ae w therefor r u r e usual close result simul match best r w becom wors r much larger w seen figur 4 mm1 model give good predict expect lock wait time r w r increas wait time predict mm1 model tend becom pessimist seen figur 3 tabl 2 show comparison mg1 model simul r ae w mg1 model better approxim mm1 model rate reader arriv close rate writer arriv aggreg custom servic distribut approxim well exponenti distribut rate reader arriv becom larg contribut reader servic time becom greater servic time distribut better approxim hyperexponenti distribut rule thumb choos best model use follow rule thumb r w 5 use mg1 model otherwis use mm1 model figur 5 6 show maximum writer reader arriv rate decreas increas reader writer arriv rate respect graph show cutoff point writer arriv rate reader arriv rate may increas almost arbitrarili writer arriv rate decreas larg due fact r e r u depend logarithm r increas aggreg custom servic time requir exponenti increas reader arriv rate 3 onewrit queue section analyz readerwrit queue one writer ever queue protocol onewrit queue fcf rw queue fcf reader serv concurr assum writer arriv rare compar reader let us calcul eww expect wait time w lock need know distribut number r lock front w lock w lock enter queue w lock arriv rare distribut number r lock queue approach steadyst mm1 distribut n r number r lock queue w lock arriv 13 let ww n wait time w lock n r lock queue w lock enter corollari 1 r combin 17 corollari 1 uncondit distribut ww r 5 find formulax exponenti integr algebra obtain g 1 x cant expect simplifi close form combin 18 19 get theorem 2 expect wait time w lock onewrit queue let us next calcul expect wait time r lock r lock wait w lock queue ahead r lock arriv w lock servic r lock wait renew time w lock servic sinc assum exponenti distribut servic time expect renew time 1w probabl r lock arriv w lock servic w w r lock arriv w lock wait probabl eww one w lock queue time r lock wait servic time w lock 1w plu remain time serv reader ahead w lock renew time w wait time distribut 13 given first moment wait time distribut 2 second moment alreadi calcul first moment eww need calcul second moment lemma 1 distribut time n reader finish servic dt pr r n use distribut number reader 17 distribut ww dt next find second moment ijo dt io ir io order simplifi sum let us express recurs relat sinc first sum simpli g ngamma1 21 second sum therefor problem reduc find simpler form gn function simpl differ suggest consid v x exponenti gener function gn tri find relationship lead solut deriv oper let us calcul differ exponenti gener function assum dv dx x linear differenti equat appli formula solut first order linear differenti equat 22 dv dx r p dx z qe r p gammar e x x order find valu constant c evalu v 0 find function g 2 x also transcendent function hope simplifi v x use formula v x 24 formula renew time 21 get lemma 4 expect residu time ww calcul r 1 ww calcul ew r give theorem 3 expect wait reader onewrit queue throughput onewrit queue limit arriv rate alway writer queue expect length time w lock queue 1w eww use theorem 2 get corollari 6 throughput onewrit queue limit proof arriv rate servic rate equal one alway w lock queue therefor arriv rate must less equal servic rate ffl 31 asymptot function g 1 x g 2 x transcendent function simplifi familiar function power seri form arent complet satisfactori calcul either g 1 g 2 grow slowli maximum term power seri grow rapidli even rel small valu x 35 limit precis algorithm calcul function fortun g 1 g 2 simpl asymptot represent function g 1 x relat exponenti integr exponenti integr 14 x e gammat dt follow asymptot expans 14 x use first asymptot expans use r 0 x bound e 1 x therefor approxim g 1 x error less e gammax x use asymptot form g 1 x get asymptot formula g 2 x integr zero remov singular therefor break interv integr 0 x two part 0 x first interv integr power seri represent g 1 x get valu g 2 second interv integr asymptot form r x constant c 2 9891 evalu use power seri g 2 evalu g 2 error bound x dx e gammax x 2 dx 4 readerwriteupgradewrit queue section use result section 3 analyz readerwriteupgradewrit queue ruw queue use three type lock read writeupgrad write lock abbrevi sa r u w lock respect w denot arriv rate r u lock r u respect assum proport u lock upgrad w lock denot servic rate r w lock r w respect servic time u lock depend wait time w lock assum r ae u u lock rare upgrad w lock result r ae w writer arriv rare assumpt result previou section appli assumpt safe queue appli concurr btree algorithm exampl 3 11 r lock block w lock u lock may block w lock anoth u lock w lock come convers request current u lock block r lock current servic thu r lock block u lock block w lock convers lead us consid strategi model ruw queue two queue one r w lock one u lock rw queue r lock serv simultan w lock enter queue w lock must wait preced r lock finish servic obtain control queue r lock enter queue w lock must wait w lock finish servic u queue u lock receiv fcf servic u lock servic might upgrad w lock w lock block u lock therefor rw queue u queue coupl increas servic time u lock expect servic period wait time servic time w lock list wait time three type lock w wait time w lock time preced r lock finish r wait time r lock prw lock waitingw servicetim surviv rs finish prw lock servicetim w finish servic u wait time u lock wait time custom fcf queue arriv rate u servic time servic period c probabl u lock convert w lock u expect time servic u lock lock upgrad w lock u expect time servic u lock upgrad w lock therefor input paramet queue r u r u u u theorem 2 give expect wait w lock theorem 3 give expect wait r lock need done calcul expect wait u lock expect servic time singl u lock therefor util u lock queue ae model u lock queue mm1 queue 13 theorem 4 expect wait time u lock ruw queue sinc w lock gener u lock throughput ruw queue limit servic u lock corollari 7 throughput ruw queue limit u g1 rr r 41 comparison experi ruw queue built experi run six hundr thousand sampl taken tabl 3 show comparison analyt simul result sinc onewrit queue ruw queue similar comparison appli onewrit queue also comparison show analyt model predict wait time well accuraci analyt model improv reader arriv rate increas conclus develop simpl yet accur model fcf readerwrit queue perform present formula predict share resourc capac wait time read write lock arriv rate produc desir system load formula simpl enough use rule thumb system design extend analys handl onewrit queue writeupgrad lock present formula predict lock wait time estim capac share resourc lock queue analyz paper use mani area concurr data structur 11 commun channel 15 r construct stationari regim queue lock concurr oper btree concurr control recoveri databas system introduct theori infinit seri model parallel access share data optim number copi distribut databas optim control queu system simultan servic requir stabil queu system concurr servic lock perform concurr data structur algorithm framework perform analysi concurr btree algo rithm queue system calcul special function gamma function spider system ltd differ equat probabilist model databas lock solut analysi replic databas stabil latenc concurrentx exclusivey perform analysi concurrentread exclusivewrit combinatori ident differenti equat applic histor note lock perform central databas analysi threshold polici schedul reader writer analysi threshold polici schedul reader writer perform evalu threshold polici schedul reader writer tr