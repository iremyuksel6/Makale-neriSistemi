workload character relat databas environ relat databas workload analyz redwar develop character workload db2 environ appli studi product db2 system structur queri languag sql trace twohour interv imag copi databas catalog obtain result workload studi summar structur complex sql statement makeup runtim behavior transactionsqueri composit relat view discuss result obtain provid import inform need build benchmark workload evalu altern design tradeoff databas system b introduct relat databas system grow increasingli popular throughput respons time requir becom ever stringent 1 clear need understand workload system better design 26 workload implic softwar hardwar design exampl queri optim often make assumpt uniform distribut attribut valu access path select 7 8 presenc data skew certain attribut valu popular other uniform assumpt lead nonoptim access path select degrad perform 9 furthermor access plan queri often gener execut time reduc run time overhead 7 howev frequent occurr input variabl whose valu determin run time predic sql statement would support adapt approach access plan select 10 although debitcredit type bank workload often cite compar transact process system 11 workload simplist consequ examin workload applic environ better reflect gener function capabl relat system import us evalu variou design issu databas system thu taken object paper use relat databas workload analyz redwar develop ibm research studi paper structur complex sql statement makeup behavior transactionsqueri composit relat view db2 like environ sql statement quit complex studi sql statement composit analyz percentag sql statement type construct like group order subqueri aggreg function etc number predic claus distribut predic type operand type number column select claus analyz number relat group order claus respect also investig view definit similarli analyz transact statist gather includ number sql statement type execut number tupl scan retrievedupdatedinserteddelet number page access elaps time transact invoc provid necessari inform build benchmark workload evalu altern design tradeoff databas system appli redwar examin product db2 system run account type applic petroleum compani environ larg number transact queri databas gener report besid batch updat refresh databas also onlin updatesinsertsdelet sql trace collect two hour interv peak period imag copi db2 catalog also obtain note although workload differ environ may vari account type workload investig provid reallif exampl product db2 workload major applic environ differ debit credit serv good testb redwar relat databas system like db2 provid quit lot inform workload store databas catalog provid variou type inform relat applic plan sql statement db2 sql statement precompil databas request modul dbrm one dbrm compil bound applic plan contain set intern control structur repres compli form origin sql statement dbrm built 12 refer commit point plan transact certain inform avail run time indic execut behavior sql statement mani tupl scan averag qualifi tupl retriev shall explain methodolog develop redwar inform scatter catalog tabl runtim trace record combin meaning way get insight sql statement structur transact behavior note best knowledg prior work develop softwar tool studi structur complex sql statement makeup behavior transactionsqueri composit relat view distinguish work other 3 4 6 section 2 relev workload inform avail db2 briefli discuss describ methodolog employ redwar obtain process inform section 3 section 4 appli redwar db2 environ present workload analysi paper conclud section 5 inform db2 maintain set thirti tabl refer db2 catalog 13 catalog tabl contain inform tabl space db2 effici manag storag multipl tabl store singl tabl space tabl view column index applic plan etc shall mention relev studi sql statement transact sysstmt tabl contain one row describ text sql statement also contain inform statement number name applic plan order multipl row describ sql statement indic sequenc number sysview tabl contain name view one row describ text view statement sysplan tabl give inform applic plan systabl provid descript tabl view number column total number row avail view percentag page contain row tabl etc sysindex tabl contain one row everi index syskey tabl one row column index key indic numer posit column row index key respect syscolumn give inform column db2 also extens runtim trace facil 13 14 collect kind per formanc account statist data trace facil invok db2 start trace command variou paramet command specifi inform trace perform trace one specif request detail event trace eg subsystem relat event sql relat event buffer manag io request detail lock inform sort detail etc purpos studi shall concentr sql relat event provid class 3 perform trace sql trace record provid inform start time end time sql statement statement type eg select fetch delet open close etc statement number etc also collect run time statist tupl scan retrievedupdatedinserteddelet db2 consist variou compon relat data servic rd data manag dm 15 rd respons materi extern view data store data dm manag store data provid access data tupl first scan dm appli search argument refer sargabl predic simpl predic form column comparison oper valu 7 reject tupl pass rd rest predic appli certainli overhead reduc reject unqualifi tupl dm level sql trace provid detail inform number tupl scan dm number dm qualifi tupl rd qualifi tupl number page scan etc 16 17 explain methodolog use redwar analyz sql statement sever issu need address first consid case sql statement involv view view virtual tabl exist physic view appear sql statement replac execut plan gener definit 12 word simpl retriev statement view may fact complex join statement disguis secondli db2 cursor concept associ embed sql construct 12 contrast cobol pli like program languag deal one record time sql statement result set record cursor concept introduc address issu cursor defin embed sql statement one issu fetch statement fetch one record time base cursor fetch statement thu artifici construct littl analyz data manipul sql statement structur howev run time statist fetch statement reflect correspond sql statement assum applic retriev qualifi tupl final sql statement defin catalog sysstmt tabl dynam sql 12 construct run time would appear catalog provid class 3 perform trace runtim 13 14 workload analyz consist two part ffl sql analyz analyz sql statement catalog inform ffl trace analyz process trace gather variou run time statist use inform provid integr comprehens pictur workload catalog tabl start process sysview tabl analyz sql statement sysstmt view inform incorpor sql statement analysi view defin term view sever expans substitut may requir express view term base tabl obtain summari inform time tabl name encount claus sql first check whether view ye inform obtain view analysi retriev incorpor sql statement analysi exampl assum follow view 12 defin sysview tabl sciti pciti select sciti pciti usual supplier part p shipment sp relat use 12 view tri creat supplier citi part citi pair relat shipment sysstmt tabl assum follow statement process statement need realiz relat citypair view simpl retriev statement one predic fact three way join involv predic whether sysview sysstmt sql statement span multipl row first sort catalog tabl row relat sql statement contigu develop sql analyz collect structur inform sql statement analysi concentr sql statement data manipul data manipul sql statement classifi five type 1 singleton select 2 updat 3 delet 4 insert involv cursor wwo updat sql statement type collect statist number relat involv number column select number predic appear whether subqueri appear whether aggreg function use also examin often construct like order group includ predic classifi accord type 13 basic quantifi null like exist basic predic use compar two valu take form express follow comparison oper anoth express subqueri without quantifi predic compar valu collect valu form basic predic type except second operand subqueri preced predic anoth way compar valu collect valu exist predic test exist certain row predic use compar valu rang valu wherea like predic use search string certain pattern null predic test null valu aggreg function use also classifi accord type avg max min sum count countdistinct trace analyz consist two phase first phase trace analyz filter dynam sql statement send sql analyz structur analysi describ analyz static dynam statement sql analyz provid trace analyz structur inform eg whether particular statement impli join oper view involv second phase trace record examin collect run time statist statist gather either per plan per statement basi select particular planid connectionid authorizationid also possibl identif static sql statement run time record statement number appear trace record well catalog tabl sysstmt dynam statement uniqu number gener phase 1 make identif possibl phase 2 fetch need use cursor name identifi correspond sql statement program parameter provid varieti report differ extent detail also made attempt analyz number tupl scan qualifi tupl retriev especi interest case sql retriev type statement join index scan use access tupl number tupl scan per qualifi tupl impli effici access path toward end trace analyz need inform sql analyz find whether larg index scan interpret result retriev select predic caus perform join present inform obtain appli redwar studi db2 workload mention follow subsect examin tabl characterist transact plan descript sql statement structur view definit transact runtim behavior tabl characterist characterist relat first examin environ consist 323 base tabl 567 view tabl 1 present averag number column row maximum number column row base tabl also shown averag number maximum number column view averag number column base tabl view 329 view deriv dynam run time statist number row avail catalog among base tabl 384 index 331 one index 170 two index 96 three index 19 four index averag number index per tabl 103 index gener base multipl column fig 1 show distribut column width byte base tabl view averag column width 95 byte maximum column width 4006 byte column width less byte applic plan descript 305 applic plan defin catalog averag number sql statement appear transact plan 17 wherea maximum number statement appear 551 present distribut number statement appear fig 2 see 90 applic plan contain less 20 sql statement 516 plan less 5 sql larg number sql statement tabl 2 sql statement classifi accord type static sql statement catalog dynam sql statement run time trace consid 5381 static sql statement 459 dynam sql statement note dynam statement gener invoc plan count differ statement static sql close 30 sql statement data manipul type statement select delet updat insert statement among sql statement 759 select 47 delet 77 updat 117 insert select includ singleton select cursor select also larg number open close fetch statement construct use retriev tupl cursor select statement anoth 8 statement relat prepar execut dynam sql statement note statement includ declar tabl declar statement declar cursor dynam sql 96 data manipul type statement among sql statement 968 select 14 delet 09 updat 09 insert among data manipul sql statement 47 ie 29 static sql statement ie 186 dynam sql statement refer view refer one view sql statement structur next examin structur characterist data manipul type sql static sql tabl 3a show aggreg statist statement type column label c select mean select cursor column label sselect mean singleton se lect total number statement sql type given parenthes aggreg statist includ percentag statement claus group order subqueri construct percentag join queri indic take view definit consider also indic percentag multiplerecord insert statement insert statement select claus percentag cursor select updat percentag delet updat cursor control percentag select queri involv union note insert statement multiplerecord insert statement claus claus group order subqueri construct thu statist except one insert select insert column present rel mutiplerecord insert instead insert furthermor tabl 3a x mean applic tabl 3b show similar statist dynam sql note definit dynam select must associ cursor percentag dynam sql claus appear low one frequent execut plan gener dynam sql claus refer small tabl tabl 4a show distribut number column select claus insert consid multiplerecord insert ie select claus also includ averag maximum valu number relat claus shown tabl 4b one relat appear claus join oper occur indic tabl 4b join mainli twoway join 3way 4way join tabl 4c show distribut number predic claus static sql 90 claus less 5 predic one predic gener preval occasion larg number 10 predic may occur dynam sql seem larger tail distribut distribut number column order claus shown tabl 5 number statement order construct indic parenthes group construct occur 8 select cursor 28 insert static sql among 75 one column 25 two column select cursor 100 one column insert tabl 6 show distribut predic type clearli basic predic type use often static sql first operand predic alway column name wherea second operand gener 90 time host variabl shown tabl 7 dynam sql first operand alway column name second operand equal like either constant paramet specifi execut time aggreg function use dynam sql use occasion static sql exampl count occur 6 time cursor select max 34 time singleton select sum 76 time insert 2 time cursor select view definit next consid view definit among 567 view 4 defin term view two one view two two view structur characterist analyz similar way base tabl omit transact runtim behavior examin execut behavior sql statement transact 2 hour trace interv 24364 static sql statement 125428 dynam sql statement execut averag respons time per static sql statement 27 msec per dynam sql statement msec 2438 transact plan invoc 34 differ plan among 8856 readonli transact tabl 8 show execut sql statement distribut base sql statement type static sql dynam sql distinguish preparec prepar select cursor preparenc prepar statement type none updat cursor control indic updatenc creat drop use ts ix denot target tabl space tabl index respect next consid transactionplan execut frequenc 7 popular transact plan get hundr execut two hour period half plan get less ten execut averag number execut per plan measur interv 717 transact respons time less second occasion larg transact respons time hundr second averag transact respons time 45 second furthermor 80 transact execut issu less 10 sql statement averag number sql statement occur per transact execut lot larger 614 due occasion transact execut larg number repeat fetch statement make averag behavior transact shown tabl 9 statement type number execut mean respons time per execut number row process examin number row tabl space scan number row tabl scan respect present invoc cursor select statement consist open cursor fetch close cursor regard openclos pair represent invoc cursor select tabl 410 averag 069 cursor select invoc compris 80 fetch scan type indic kind scan perform data manag index indx tabl space seqd work file seqw averag number row qualifi dm rd number row insertedupdateddelet averag number page scan per sql execut also present type scan sql execut scan type get invok still averag taken execut statement type execut invok particular scan type fetch singleton select type statement execut result one rd qualifi tupl number rd column reflect fraction correspond scan type execut 72 execut use index scan averag 106 076072 tupl examin per rd qualifi tupl 28 execut use tabl space scan averag 3607 examin per qualifi tupl fetch 20 execut use index scan averag 4532 tupl examin per qualifi tupl 77 execut use tabl space scan averag 6479 tupl examin per qualifi tupl 3 use work file scan averag 114767 tupl examin per qualifi tupl thu see singleton select cursor select show differ run time behavior tabl 9 filter factor predic dm rd calcul exampl index scan dm select one tupl everi 401 9064226 tupl examin base sargabl predic rd select one tupl everi 113 226020 dm qualifi tupl page scan column deriv averag two hundr page need access per transact execut number relat involv sql statement execut find 95 access one relat almost 5 howev fetch result tupl fourway join oper next consid effect select variat optim access path select within trace period situat singl fetch statement 1000000 row ie almost entir tabl examin use index scan averag 87 oper use index examin less 10 row find qualifi tupl 996 examin less 100 row remain 04 howev lead long search final examin execut behavior cursor select statement ie number fetch execut cursor select found close 87 time less 10 tupl satisfi predic time around 018 10000 tupl qualifi particular environ studi follow observ made tabl includ base tabl view averag 329 column averag column width 94 byte base tabl averag 14 k row maximum around row half tabl one two index nearli 40 index close 90 transact readonli major applic plan contain sql statement less 10 applic execut averag 60 sql repeat execut fetch substanti variat number fetch execut even differ invoc transact plan averag two hundr page access per transact execut workload thu consider complex show variat transact execut time im transact workload examin 18 almost 85 sql statement execut dynam statement index scan preval 72 singleton select tabl space scan preval 77 cursor select account 90 sql statement execut number tupl examin index scan get qualifi tupl vari occasion million half maximum tabl size clearli indic effect select variat optim access path select analyz structur data manipul sql statement sql involv group subqueri aggreg function etc order appear one fifth static sql statement claus consist averag 2 5 predic depend statement type maximum 22 static sql predic almost alway input variabl second operand dynam sql paramet appear second operand half time 5 sql execut fetch result join type queri 5 conclus paper relat databas workload analyz redwar present object studi structur complex sql statement makeup behavior transact composit tabl view appli studi db2 product environ sql trace two hour interv peak period imag copi databas catalog obtain result obtain provid import inform need build benchmark workload evalu altern design tradeoff databas system acknowledg author indebt yh lee contribut earli stage studi grate union texa petroleum provid db2 workload also would like thank l dalton degrang g flatow lakshmi shibamiya p seling j wolf help advic r select write workload character pipelin model parallel system db2 workload analysi workload character synthet workload gener applic studi workload character tightli coupl loos coupl system workload character access path select relat databas manag system implic certain assumpt databas perform evalua tion effect parallel join adapt select access plan join method architectur high volum transact process guid db2 ibm system plan administr guid databas 2 perform monitor gener inform distribut concurr control analysi data share tr relat databas select write workload character pipelin model parallel system workload character synthet workload gener applic implic certain assumpt databas perform evauat architectur high volum transact process access path select relat databas manag system effect parallel join ctr philip yu arif merchant analyt model comparison stripe strategi replic disk array ieee transact comput v44 n3 p419433 march 1995 w w chu ieong transactionbas approach vertic partit relat databas system ieee transact softwar engin v19 n8 p804812 august 1993 mingl lo mingsyan syan chen c v ravishankar philip yu optim processor alloc support pipelin hash join acm sigmod record v22 n2 p6978 june 1 1993 said elnaffar methodolog autorecogn dbm workload proceed 2002 confer centr advanc studi collabor research p2 septemb 30octob 03 2002 toronto ontario canada p yu dan perform evalu transact process coupl architectur handl system dynam ieee transact parallel distribut system v5 n2 p139153 februari 1994 mingsyan chen mingl lo philip yu honesti c young use segment rightdeep tree execut pipelin hash join proceed 18th intern confer larg data base p1526 august 2327 1992 ms chen p yu combin joint semijoin oper distribut queri process ieee transact knowledg data engin v5 n3 p534542 june 1993 mingsyan chen huii hsiao philip yu appli hash filter improv execut bushi tree proceed 19th intern confer larg data base p505516 august 2427 1993 surajit chaudhuri prasanna ganesan vivek narasayya primit workload summar implic sql proceed 29th intern confer larg data base p730741 septemb 0912 2003 berlin germani jialang seng bing yao alan r hevner requirementsdriven databas system benchmark method decis support system v38 n4 p629648 januari 2005 alberto caprara matteo fischetti dario maio exact approxim algorithm index select problem physic databas design ieee transact knowledg data engin v7 n6 p955967 decemb 1995 chen p yu graph theoret approach determin join reduc sequenc distribut queri process ieee transact knowledg data engin v6 n1 p152165 februari 1994 mingsyan chen huii hsiao philip yu appli hash filter improv execut multijoin queri vldb journal intern journal larg data base v6 n2 p121131 may 1997 emil jovanov veljko milutinov ali r hurson acceler nonnumer oper use hardwar support order tabl hash algorithm ieee transact comput v51 n9 p10261040 septemb 2002 huii hsiao mingsyan chen philip yu parallel execut hash join parallel databas ieee transact parallel distribut system v8 n8 p872883 august 1997 mingsyan chen mingl lo philip yu honesti c young appli segment rightdeep tree pipelin multipl hash join ieee transact knowledg data engin v7 n4 p656668 august 1995 p yu dan perform analysi affin cluster transact process coupl architectur ieee transact knowledg data engin v6 n5 p764786 octob 1994 joel l wolf john turek mingsyan chen philip yu hierarch approach parallel multiqueri schedul ieee transact parallel distribut system v6 n6 p578590 june 1995 mingsyan chen philip yu kunlung wu optim parallel execut multijoin queri ieee transact knowledg data engin v8 n3 p416428 june 1996 jeho park vinay kanitkar alex deli logic cluster architectur network databas distribut parallel databas v10 n2 p161198 septemb 2001