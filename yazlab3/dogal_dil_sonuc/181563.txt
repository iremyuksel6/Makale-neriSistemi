approach communicationeffici data redistribut address develop effici method perform data redistribut array distributedmemori machin data redistribut import distributedmemori implement data parallel languag high perform fortran algebra represent regular data distribut use develop analyt model evalu commun cost data redistribut use algebra represent analyt model approach communicationeffici data redistribut develop implement result intel ipsc860 report b introduct distributedmemori machin demonstr potenti high perform howev use restrict due difficulti program comput er program model base singl address space provis explicit specif data distribut share array recent gain popular 1 3 13 high perform fortran hpf 6 fortran90 ex tension provid programm direct specifi align array one anoth distribut align array userdefin virtual processor mesh direct dynam chang distribut array program execut provid redistribut data array use follow circumst work support part arpa order number 7898 monitor nist grant number 60nanb1d1151 darpa order number 7899 monitor nist grant number appear 8th acm intern confer juli 1994 manchest england ffl differ phase program vari access pattern share array differ data distribut array often best suit phase instanc altern direct implicit method 12 consist two phase first phase access twodimension array along row second phase along column distribut array row local processor column di tribut elimin commun first phase similarli distribut array column local row distribut elimin commun second phase need explicitli redistribut array two phase aris ffl scientif librari tune provid peak perform fix set distribut input array distribut may conform distribut actual paramet lead perform degrad develop librari routin possibl input distribut practic henc actual array paramet must explicitli redistribut ffl data redistribut implicitli requir execut array statement array section statement entir array differ distribut thu effici method perform data redistribut great import distributedmemori implement hpf data redistribut strategi present literatur issu reshap perfect poweroftwo size data array hypercub address 15 close form express processor set processor need commun data set need commun data redistribut construct 10 algorithm runtim array redistribut provid 22 17 closedform express character data commun requir doall loop involv array ident block cyclic distribut simpl index express develop 13 interprocessor data commun loop involv array invert index express express composit index distribut function scheme effici execut hpf array statement blockcycl distribut array present 4 11 21 scheme commun gener compiletim estim commun cost present 18 scheme base identifi commun primit 7 compar index express array refer detail techniqu along line 18 estim commun cost develop 8 howev scheme accur identifi commun cost correspond array ident distribut scheme gener align array use cost metric variou interconnect network develop 5 issu effici redistribut arbitrari blockcycl data distribut address 10 scheme present therein perform data redistribut commun one step data requir sourc target data distribut refer singlephas data redistribut strategi certain circumst character interprocessor commun possibl facilit develop effici redistribut scheme redistribut perform sequenc singlephas data redistribut refer multiphas data redistribut strategi intermedi data distribut chosen total cost sequenc lower cost singlephas redistribut exampl consid array 192 element distribut blockwis eight processor let target distribut blockcycl block size three singlephas data redistribut processor commun seven processor suppos redistribut perform two phase redistribut block blockcycl block size 12 follow second redistribut target distribut first data redistribut requir processor send two messag second requir four messag messag setup time domin compon commun cost use twophas strategi reduc total commun cost commun cost model data redistribut take account total startup cost messag transmiss cost overhead aris due network con tention paper first present analyt model base number messag volum data commun estim commun cost singlephas data redistribut model network content express commun sequenc permut execut fix number contentionfre step use analyt model tensor product represent data distribut 9 develop cost estim singlephas data redistribut given sourc target distribut show use multiphas strategi reduc commun cost present method determin intermedi distribut total commun cost multiphas strategi minim paper organ follow section 2 briefli describ tensor product represent regular data distribut support hpf section 3 commun cost model describ use develop cost estim singlephas data redistribut section 4 present effici algorithm data redistribut preliminari perform result intel ipsc860 report section 5 conclus present section 6 regular data distribut section briefli describ tensor product represent regular data distribut detail tensor product theori present 14 hpf support twolevel map data object abstract processor array languag introduc cartesian grid refer templat array align templat templat distribut onto virtual processor array use regular data distribut consid array a0 align templat ai align dai b templat distribut onto p processor use cyclick distribut templat element di map processor div array divid p array refer loc resid local memori processor paper focu ident align ie ai align di 21 tensor product notat let theta n matrix b p theta q matrix tensor product b block matrix obtain replac element ij ij b aomega b mp theta nq matrix defin focu tensor product vector base vector basi element e column vector length one posit zero elsewher tensor product e two vector base e e n j call tensor basi e size tensor j mn express vector basi e tensor product vector base e call factor vector basi exampl vector basi e 12 8 factor tensor base e 2 0 e 4 express tensor basi vector basi e call linear tensor basi exampl tensor basi e 4 2 linear give vector basi 5 defin compat two tensor base definit 21 compat tensor base two tensor base b1 b2 compat factor factor tensor base size vector base correspond posit equal ex ampl compat tensor base factor get note compat defin semant regular data distribut use tensor basi 22 algebra semant regular data distribut consid array a0 processor use regular data distribut assum n multipl p 1 locat element ai specifi tupl p l p processor l local index ai cyclicb distribut element ai processor index div b mod p local index b block cyclic distribut equival cyclic n respect indic a0 repres vector basi e n suppos a0 15 distribut onto four processor use block distribut element a9 map processor local processor 2 gener element locat processor local index 4 consid factor vector basi e tensor basi tensor basi e 4 index vector basi e 4 correspond processor element ai locat index e 4 correspond local address ai processor 1 say vector basi e 4 cor respond processor element ai locat e 4 correspond local address ai pro cessor denot vector basi correspond processor ae tensor basi ae 4 repres array a0 15 distribut block fashion four processor tensor basi vector basi correspond processor index identifi call distribut basi vector basi e refer data basi ae processor basi thu distribut basi linear array a0 factor e n everi vector basi result tensor basi identifi either processor basi data basi block distribut p proce cyclic distribut p processor distribut p processor block size b regular distribut base linear array defin definit 22 distribut function onedimension array correspond index ai let distribut function dist dist basi dist distribut basi defin follow index function distribut basi index function select vector base distribut identifi processor index local index global index element distribut array divid n array assum pad dnpep definit 23 index function let array a0 1 distribut basi e c processor index function proc local index function local global index function global index function indic global c local c proce c distribut basi multidimension array defin tensor product distribut base dimens distribut index function multidimension array defin term correspond function onedimension array definit 24 distribut function let a0 n distribut use distribut distribut basi dist e n iomega deltaomega theta dist e n 0 distribut basi 20 theta 10 array distribut block cyclic 2 theta 2 virtual processor mesh ae 2 l 1 omega l squar parenthesi separ distribut base correspond dimens definit 25 index function index function proc local global multidimension array defin follow remaind paper assum sourc target distribut base compat also assum dimension virtual processor array number virtual processor greater underli physic network defin semant redistribut command redistribut regular data distribut correspond remap processor basi distribut basi fi initi distribut basi fi distribut basi redistribut procfid may differ impli redistribut involv commun also localfi localfid may differ exampl l repres block distribut processor remap processor basi give new distribut basi fi l correspond cyclic distribut 4 processor clearli globalfi 4lambdalp l impli commun requir also localfi l localfid impli local index element chang redistribut consid distribut base sourc target distribut array a0 191 describ intro duction sourc distribut basi ae 8 psomega e 24 l target distribut basi e 8 l l d2 intermedi data distribut use twophas redistribut strategi given distribut basi e 2 l l t2 singlephas redistribut correspond remap ae 8 psomega e 24 l l l d2 twophas redistribut correspond sequenc remap ae 8 psomega e 24 l l l l l d2 estim benefit multiphas redistribut necessari develop cost metric commun cost data redistribut 3 commun cost estim data redistribu tion section model commun cost singlephas data redistribut circuitswitch wormhol rout mesh network use fix rout rule survey rout techniqu present 19 commun time express term follow ffl startup time ts compos time pack nonconsecut data element buffer copi data user space system space unpack data ffl transfer time te time data transmiss depend commun bandwidth path length sourc destin node circuitswitch wormhol rout net work larg messag absenc network content time nearli independ path length 2 19 sinc transfer time messag size n nte absenc content commun cost messag n element ts ffl network content sourc node commun destin node sever pair processor commun across network path conflict occur caus commun overhead shown 2 impact node conflict neglig link conflict signific gener data redistribut requir alltomani person commun decompos commun set permut perform fix number contentionfre step fix underli network configur total time perform sequenc permut provid estim commun cost take account network content evalu redistribut cost linear data array distribut linear processor array first consid case data array size processor array size perfect power integ r 2 z gener nonperfectpow data processor array l psomega e bs l s2 fi l l d2 compat sourc target distribut base let cost data redistribut defin term use determin maximum number messag sent processor volum data commun definit 36 distribut base differ let tomega deltaomega oe n 0 deltaomega oe aeg differ fi 2 fi 1 given qfi1 l l l exampl l l 12 l factor l l 12 l l differ qfi1 fi 2 size vector basi e 2 l 12 thu 2 similarli qfi2 2 number processor sourc target distribut equal distribut base differ symmetr definit 37 distribut base union let fi 1 fi 2 compat distribut base st deltaomega oe n 0 deltaomega oe aeg union l l l union ufi1 fi 2 distribut base shown size tensor basi ae 2 l 12 thu number processor sourc target distribut p ufi fi p theta estim commun cost data redistribut use differ union sourc target distribut base 31 perfect power data processor array size loss gener let bs bd result hold otherwis l l s2 fi l l d2 two base compat l l l s2 l l l d22 consid processor sourc distribut element global dice g st g div r bs locat processor q element global indic form ir pb bs repres e r c note indic processor base set valu q1 q2 consid particular element locat processor q global index element correspond basi element e r c l l 2 omega ae r pgammab bs l 3 global index data redistribut unchang locat processor q commun processor l 2 r pgammab bs data redistribut sinc q1 fix element processor q largest number processor q need commun determin total number differ valu l 2 element locat q sinc l 2 index vector basi e r b gammab l s2 take r b gammab valu need commun r b gammab processor data redistribut estim directli obtain compar sourc target distribut base number processor q commun depend size data basi e r b gammab l si2 correspond differ fi fi sinc similar argument hold sourc processor use def 36 follow maximum number messag processor need send data redistribut differ qfi fi maximum size data sent messag determin follow consid processor previou discuss follow processor q commun processor ir pgammab bs data redistribut consid messag processor q send processor element locat processor q sent processor div r b element indic r c 0 bs element repres e r c thu total number data item commun r c theta r bs total size vector base e r c union ufi fi correspond size tensor basi l r c bs thu number data element commun given n use present cost model largest commun cost messag absenc content given ts te model requir commun sequenc permut first consid exampl let sourc target distribut cyclic block di tribut respect 27 element array 9 proce sor redistribut shown fig 1 necessari commun repres term commun matrix c ci send data processor p j els ci q2 permut matric underli topolog 3 theta 3 mesh permuta tion q0 q1 q2 schedul three contentionfre step use schedul techniqu present 23 24 thu maximum commun time data redistribut correspond time perform three permut sequenc permut q0 q2 said exactli cover commun c requir data redistribut redund messag sent messag requir redistribut commun gener commun data redistribut requir processor commun qfi fi distinct processor show commun express term exactli qfi fi permut processor express radix r permut permut fa express term fa exampl correspond q2 sourc distribut cyclic target distribut block figur 1 data redistribut a026 cyclic block input compat distribut base fi l l s2 fi l l d2 output permut exactli cover redistribut commun els figur 2 algorithm 1 construct permut cover commun data redistribut fig 2 present algorithm construct sequenc permut exactli cover commun requir data redistribut algorithm xtupl whose element valu 0 repres 0x ir correspond base r represent use digit also x delta correspond concaten x exampl note differ qfi fi perfect power r theorem 31 commun data redistribut l l s2 fi l l d2 exactli cover qfi fi permut proof prove sequenc permut construct algorithm 1 exactli cover requir commu nicat consid case bs bd bs p bd v consid processor accord argument section 31 processor q commun processor ir pgammab bs algorithm 1 r pgammab bs thu also algorithm 1 ir v thu therefor permut cover commun q processor r b gammab permut fa commun distinct processor theorem follow note q need commun r b gammab processor permut cover requir commun distinct processor 2 thu perform data redistribut requir total permut permut perform fix number contentionfre step determin underli mesh architectur say k step requir time equal time send messag size total cost data redistribut ts te uniformli scale redistribut cost consid remain cost estim use distribut base also facilit index code gener data redistribut perform redistribut processor u 0 need evalu follow ffl send processor set processor u psendu set processor u send data ffl send data index set processor u processor v dsendu v local indic array element resid u need v receiv processor set processor u processor u receiv data ffl receiv data index set processor u processor local indic array element need u resid v array block cyclic distribut data index set processor set character use regular section close form 10 11 17 gener cyclicb cyclicbd redistribut close form character set use simpl regular section possibl howev sourc destin distribut base compat close form eval uat discuss section 31 follow processor commun processor ir pgammab bs similar evalu case use recurs regular section notat repres data send set twolevel recurs regular section array given l0 directli follow loop nest thu case consid section 31 dsendu v local r c l 2omega l s2 l s11 r b v 1 r b l s2 r b perform similar evalu case let vr b gammap receiv processor data set evalu similarli given data receiv set follow drecvu vr bs gammap 32 gener data processor array size l psomega e bs l s2 fi l l d2 let result hold case sinc two distribut base compat bs jbd bd jpb l bs l pb bs l s2 l bs pb bs l d21omega e bs l d22 use argument similar section 31 shown processor bs need commun processor pb bs thu largest number processor sourc processor need commun b bs qfi fi similarli largest messag size commun np requir commun express sequenc permuta tion theorem 32 commun data redistribut l psomega e bs l s2 fi l l d2 exactli cover qfi fi permut proof similar theorem 31 permut construct shown fig 3 sinc qfi fi permut requir permut perform fix number contentionfre step total commun cost given ts te exampl consid data distribut shown fig 4 distribut base given fi l fi e 6 l basi differ qfi fi 6 basi union ufi fi 36 largest number messag sent processor six largest size messag one 2 cost singlephas data redistribut close form processor index data index set determin manner similar use perfect power data array size section 31 distribut basi multidimension array tensor product distribut basi dimen sion sinc shapepreserv data redistribut consid ere distribut along array dimens chang without chang shape data processor ar ray analysi perform independ array dimens result combin multidimension array 4 communicationeffici data redistribut section describ multiphas redistribut strategi first consid specif exampl de 2 messag sent processor also account input compat distribut base fi l psomega e bs l s2 fi l l d2 output permut exactli cover redistribut commun ii mod bs pb els bd bs pbd bs bs figur 3 algorithm 2 construct permut cover commun data redistribut sourc distribut block target distribut cyclic figur 4 data redistribut a035 block cyclic scribe gener procedur let fi l l s2 l l d2 0 redistribut correspond remap appropri data basi processor basi redistribut fi fi correspond remap data base e r e r processor base ae r 1 data base remap involv commun subset processor remap perform directli map data base processor base one step sequenc step consid perform redistribut use intermedi distribut data basi e r first map processor basi first redistribut fi l l s2 l l s3 processor commun r processor cost redistribut given cfi p te redistribut fi fi involv map data base e r processor ba si cost redistribut total cost twophas redistribut cfi fi p te singlephas redistribut would cost r 2 ts gener data base total size qfi fi need remap processor base multiphas strategi correspond perform map one factor time choic intermedi distribut depend factor qfi fi exampl r factor use gener differ qfi fi factor k factor distribut use redistribut perform kphase phase correspond redistribut distribut basi fi distribut basi fi i1 qfi use cost model develop section 3 cost phase r ts p te total cost kphase redistribut given ts redistribut method multidimension array develop method linear array number intermedi distribut determin number factor differ two distribut base let l s1 l s2 l omega l l d21 differ factor izat consid two factor qfi fi 3 first factor correspond follow sequenc distribut ae 6 l s1 omega ae 4 l s2 l 11 l l t22 l l l d2 second factor correspond sequenc distribut ae 6 s1omega e 6 l s1 l s2 l l l t2 l l l d2 first method cost 8t 2 36te second cost 7t 2 36te second method lowest commun cost among possibl factor gener redistribut strategi smallest cost depend actual valu messag setup transfer time formul problem determin intermedi distribut total commun cost minim follow optim problem given machin paramet ts te p data array paramet problem find multipl partit qfi fi r0 theta delta delta delta theta r tgamma1 total commun cost cfi fi minim ts special case qfi find multipl partit p equival find addit partit p op algorithm find optim partit present 20 case frequent occur case number physic processor usual perfect power two differ distribut base perfect power two heurist gener case qfi fi perfect power provid 16 perform result section compar perform multiphas singlephas strategi specif sourc target data distribut 32node intel ipsc860 hyper cube due lack access meshconnect comput strategi could compar mesh network commun two approach perform accord permut gener algorithm 2 total time requir redistribut use singlephas multiphas strategi blockcycl sourc destin distribut measur increas data size time includ index time pack unpack data actual commun time time taken use millisecond wallclock timer mclock tabl 1a show total time millisecond redistribut cyclic256 cyclic16 16 proce sor differ correspond distribut base 16 twophas strategi use cyclic64 intermedi distribut accord commun cost model two phase strategi correspond factor 4 lowest commun cost among possibl multiphas strategi seen tabl 1a two phase strategi perform better singlephas strategi data size 28k larger data size increas transmiss cost overrid decreas messag startup time tabl 1b show total time millisecond redistribut cyclic256 cyclic8 32 processor differ correspond distribut base 32 two twophas strategi correspond factor respect use two strategi use cyclic32 refer twophase1 cyclic64 refer twophase2 intermedi data distri bution respect accord cost model two strategi ident commun time differ time twophas strategi shown tabl 1b neglig also twophas strategi perform better singlephas strategi data size 64k larger data size increas transmiss cost overrid decreas messag startup time 6 conclus paper present approach commun effici data redistribut use tensor product represent regular data distribut develop cost estim data redistribut use estim demonstr use multiphas redistribut strategi reduc total cost present method determin appropri intermedi distribut perform result intel ipsc860 show multiphas redistribut strategi improv perform singlephas redistribut acknowledg would like thank advanc concept comput laboratori nasa lewi research center access intel ipsc860 hypercub r commun overhead intel ipsc2 hypercub vienna fortran fortran languag extens distribut memori multiprocessor gener local address commun set data parallel program optim evalu array express massiv parallel machin high perform fortran forum solv problem concurr processor compil optim fortrand mimd distributedmemori machin compil support machineindepend parallel program fortrand topic matrix anali si complex reshap array boolean cube compil communicationeffici program massiv parallel machin survey wormhol rout techniqu direct network optim phase barrier synchron kari ncube wormholerout system use mul tirendezv primit effici compil array statement privat memori multicomput runtim array redistribut hpf program tr solv problem concurr processor vol 1 gener techniqu regular problem compil optim fortran mimd distributedmemori machin compiletim gener regular commun pattern vienna fortranmyampersandmdasha fortran languag extens distribut memori multiprocessor comput support machineindepend parallel program fortran gener local address commun set dataparallel program implement parallel c runtim system scalabl parallel system survey wormhol rout techniqu direct network compil communicationeffici program massiv parallel machin compiletim estim commun cost multicomput onlin commun circuitswitch fix rout mesh effici compil array statement privat memori multicomput ctr stavro souravla mano roumelioti pipelin techniqu dynam data transfer multiprocessor grid intern journal parallel program v32 n5 p361388 octob 2004 thakur alok choudhari j ramanujam effici algorithm array redistribut ieee transact parallel distribut system v7 n6 p587594 june 1996 neungsoo park viktor k prasanna cauligi raghavendra effici algorithm blockcycl array redistribut processor set ieee transact parallel distribut system v10 n12 p12171240 decemb 1999 minyi guo yi pan improv commun schedul array redistribut journal parallel distribut comput v65 n5 p553563 may 2005 narasimhan ramasubramanian ram subramanian santosh pand automat compil loop exploit oper parallel configur arithmet logic unit ieee transact parallel distribut system v13 n1 p4566 januari 2002 ram subramanian santosh pand framework performancebas program partit progress comput research nova scienc publish inc commack ny 2001 minyi guo ikuo nakata framework effici data redistribut distribut memori multicomput journal supercomput v20 n3 p243265 novemb 2001 ram subramanian santosh pand framework performancebas program partit progress comput research nova scienc publish inc commack ny 2001 chinghsien hsu shengwen bai yehch chung chuse yang gener basiccycl calcul method effici array redistribut ieee transact parallel distribut system v11 n12 p12011216 decemb 2000 yehch chung chinghsien hsu shengwen bai basiccycl calcul techniqu effici dynam data redistribut ieee transact parallel distribut system v9 n4 p359377 april 1998 chinghsien hsu yehch chung effici method kr r r kr array redistribution1 journal supercomput v12 n3 p253276 may 1 1998 chinghsien hsu yehch chung donlin yang chyiren dow gener processor map techniqu array redistribut ieee transact parallel distribut system v12 n7 p743757 juli 2001 chinghsien hsu yehch chung chyiren dow effici method multidimension array redistribut journal supercomput v17 n1 p2346 aug 2000 peizong lee wenyao chen gener commun set array assign statement blockcycl distribut distribut memori parallel comput parallel comput v28 n9 p13291368 septemb 2002 edgar kaln lionel ni processor map techniqu toward effici data redistribut ieee transact parallel distribut system v6 n12 p12341247 decemb 1995 neungsoo park viktor k prasanna cauligi raghavendra effici algorithm blockcycl array redistribut processor set proceed 1998 acmiee confer supercomput cdrom p113 novemb 0713 1998 san jose ca jihwoei huang chihp chu effici commun schedul method processor map techniqu appli data redistribut journal supercomput v37 n3 p297318 septemb 2006 manojkumar krishnan jarek nieplocha memori effici parallel matrix multipl oper irregular problem proceed 3rd confer comput frontier may 0305 2006 ischia itali