valu specul schedul high perform processor recent research valu predict show surpris amount predict valu produc registerwrit instruct sever hardwar base valu predictor design propos exploit predict elimin flow depend highli predict valu paper propos hardwar softwar base scheme valu specul schedul vss static vliw schedul techniqu use specul valu depend instruct schedul instruct whose result depend predict hardwar use provid valu predict allow execut specul instruct continu case misspredict valu control flow redirect patchup code execut proceed correct result paper experi vss load oper specint95 benchmark perform speedup 17 shown use vss empir result valu predict load base valu profil data also provid b introduct modern microprocessor extract instruct level parallel ilp use branch predict break control depend use dynam memori disambigu resolv memori depend 1 howev current techniqu extract ilp still insuffici recent research focus valu predict hardwar dynam elimin flow depend also call true depend 2 3 4 6 7 8 9 result shown valu produc registerwrit instruct potenti highli predict use variou valu predictor lastvalu stride contextbas twolevel hybrid predictor work illustr valu specul futur high perform processor use break flow depend therebi expos ilp paper examin isa hardwar compil synergi exploit valu specul result indic synergi enhanc perform difficult integ benchmark prior work valu specul util hardwareonli scheme eg 2 3 scheme instruct address pc registerwrit instruct sent valu predictor index predict tabl begin fetch stage predict gener fetch dispatch stage forward depend instruct prior execut stage valu specul depend instruct must remain reserv station even execut continu prevent retir verif predict valu predict valu compar actual result stateupd stage predict correct depend instruct releas reserv station updat system state retir predict valu incorrect depend instruct need reexecut correct valu figur 1 figur 1 pipelin stage hardwar valu specul mechan flow depend instruct depend instruct execut predict valu cycl predict instruct illustr pipelin stage valu specul util hardwar scheme littl work done softwarebas scheme perform valu predict valu specul depend instruct relat approach differ problem memori conflict buffer 1 present dynam disambigu memori depend allow compil specul schedul memori refer possibl depend memori instruct patchup code gener compil ensur correct program execut even memori depend actual occur specul schedul memori refer improv perform aggress schedul refer highli like independ likewis valuespecul schedul attempt improv perform aggress schedul flow depend highli like elimin valu predict patchup code use valu misspredict appli scheme valu specul propos combin hardwar softwar solut call valu specul schedul vss hardwar pipelin stage vss scheme shown figur 2 two new instruct ldpred udpr introduc interfac valu predictor execut stage ldpred load predict valu gener predictor specifi generalpurpos regist udpr updat valu predictor actual result reset devic futur predict misspredict figur 3 show exampl use ldpred udpr perform vss origin code sequenc figur 3a instruct i1 i6 form long flow depend chain must execut sequenti flow depend figur 2 pipelin stage valu specul schedul scheme two new instruct ldpred udpr interfac valu predictor execut stage origin code i3 lw r4 0r3 i4 add r5 r4 1 i5 next b new code valu specul r4 predict instruct i3 i3 lw r4 0r3 i7 ldpred r8 index load predict r8 i5 i8 bne patchup r8 r4 verifi predict next patchup i9 udpr r4 index updat predictor r4 i4 add r5 r4 1 i5 i10 jmp next figur 3 exampl valu specul schedul instruct i3 i4 broken via vss depend height result depend chain shorten furthermor ilp expos result data depend graph figur 4 show data depend graph code sequenc figur 3 break flow depend instruct i3 i4 assum latenc arithmet logic branch store ldpred udpr instruct 1 cycl latenc load instruct 2 cycl schedul length origin code sequenc figur 4a instruct i1 i6 seven cycl break flow depend instruct i3 i4 vss result schedul length five cycl figur 4b illustr schedul possibl due reduc overal depend height ilp expos new data depend graph fetch dispatch execut state updat valu predictor predict verif fetch dispatch execut state updat predict valu actual valu predict depend fetch dispatch execut state updat valu predict valu ldpred udpr improv schedul length seven cycl five cycl consid penalti associ miss predict due requir execut patchup code impact patchup code perform discuss section 3 figur 4 data depend graph code figur 3 number along edg repres latenc instruct 4a schedul length seven cycl 4b expos ilp depend height reduct schedul length reduc five cycl figur 3b valu specul schedul break flow depend instruct i3 i4 instruct i4 i5 i6 form separ depend chain allow execut specul schedul becom instruct i4 i5 i6 respect operand instruct i4 modifi r4 r8 regist r8 contain valu predict destin regist r4 predict instruct i3 instruct i7 ldpred load valu predict instruct i3 regist r8 predict incorrect r8r4 instruct i9 udpr updat valu predictor actual result predict instruct regist r4 note result udpr instruct part patchup code execut requir valu misspredict ensur correct program execut compil insert branch instruct i8 store instruct i6 branch patchup code predict valu equal actual valu patchup code contain udpr origin depend instruct i4 i5 i6 execut patchup code program jump next instruct i8 execut proce normal ldpred udpr instruct pair correspond valu predict use tabl entri index valu predictor index assign compil avoid unnecessari conflict insid valu predictor number tabl entri limit possibl conflict determinist factor choos valu predict compil approach valu predictor design featur new ldpred udpr instruct describ section 2 combin hardwar compil techniqu strength dynam static techniqu exploit ilp leverag see sever possibl advantag vss static schedul provid larger schedul scope exploit ilp transform identifi long depend chain suitabl valu predict reorder code aggress valuespecul depend instruct execut earli possibl predict instruct depend compil control number predict valu assign differ indic access predict tabl instruct compil deem good candid predict predict reduc conflict hardwar patchup code automat gener reduc need elabor hardwar recoveri techniqu instead reli static predict valu eg profil data ldpred udpr access dynam predict hardwar enhanc predict accuraci vss appli dynamicallyschedul processor staticallyschedul vliw processor epic explicitli parallel instruct processor 14 drawback vss static schedul techniqu employ valuespecul instruct commit specul therefor alway requir predict valu hardwar scheme dynam decid appropri specul execut instruct dynam decis base valu predictor confid predict valu avoid misspredict penalti low confid predict remaind paper organ follow section 2 examin valu predictor design valu specul schedul section 3 introduc vss algorithm section 4 present experiment result vss section 5 conclud paper mention futur work 2 valu predictor design microarchitectur support valu specul schedul vss form specialpurpos valu predictor hardwar valu predict accuraci directli relat perform improv vss variou valu predictor lastvalu stride contextbas two level hybrid predictor 2 3 4 6 7 9 break depend b break depend i3 i4 provid differ predict accuraci valu predictor design complex gener provid highest predict accuraci order featur ldpred udpr instruct vss previous propos valu predictor must redesign slightli figur 5 show block diagram valu predictor includ ldpred udpr instruct valu predictor three fundament unit current state block old state block predict hardwar block current state block may contain regist valu finit state machin histori inform machin flag depend predict method employ old state block hardwar duplic current state block hardwar predict gener predict hardwar input current state block variou predict mechan use exampl gener predict last valu last valu predictor 2 3 gener predict sum last valu stride differ recent last valu stride predictor 4 6 7 9 also twolevel predictor 7 allow predict recent comput valu twolevel predictor valu histori pattern index pattern histori tabl turn use index valu predict recent comput valu twolevel valu predict hardwar base twolevel branch predict hardwar figur 5 block diagram valu predictor featur ldpred udpr ldpred udpr instruct contain immedi operand specifi valu predictor tabl index gener independ predict hardwar chosen ldpred instruct perform three action compil assign number index action first predict hardwar gener predict valu use input current state block second current state inform shift old state block last current state block updat base predict valu predict hardwar inform use predict hardwar updat simultan current state block updat note ldpred instruct predict valu use updat current state block specul compil assign number also index oper udpr instruct valu predict incorrect patchup basic block figur 3b must execut execut udpr instruct occur patchup code valu miss predict udpr instruct caus updat current state block predict hardwar actual comput valu old state block compil ensur ldpredudpr instruct pair execut turn predict verifi valu predict nest old state block requir one tabl entri tabl entri old state block updat everi ldpred instruct use everi udpr instruct case misspredict figur 6 hybrid predictor stride twolevel satur counter compar select predict techniqu vss scheme predict need gener ldpred instruct flag valu predictor indic valu predict valid goal valu predictor gener mani correct predict possibl paper stride twolevel hybrid valu predictor 7 implement find design provid highest predict accuraci use vss scheme stride predictor predict array loop induct variabl well twolevel predictor captur recurr recent use valu gener predict base previou pattern valu howev neither alon obtain high predict accuraci program exhibit differ characterist therefor hybrid valu predictor consist stride twolevel predict design cover situat current state old state predict hardwar actual valu ldpred predict valu ldpred udpr predict index stride twolevel counter counter twolevel figur 6 show hybrid predictor obtain high predict accuraci select stride predictor twolevel predictor differ 7 everi tabl entri satur counter stride predictor twolevel predictor satur counter increment correspond predict correct decrement predict incorrect satur counter predictor updat predict regardless predict actual select hybrid predictor select predictor maximum satur counter valu event tie hybrid predictor favor predict twolevel predictor predict accuraci result three valu predictor present section 4 3 valu specul schedul perform improv valu specul schedul vss affect predict accuraci number save cycl schedul length reduct number penalti cycl execut patchup code suppos break flow depend valuespecul depend instruct specul save cycl overal schedul length predict correct patchup code also gener requir p cycl predict accuraci specul valu x case speedup posit 1 hold exampl figur 3b vss save 2 cycl 7 cycl 5 cycl result patchup code contain 5 instruct requir 3 cycl ilp processor therefor posit speedup predict accuraci must greater 33 actual predict accuraci less perform degrad vss perform consider mind algorithm vss propos figur 7 first step perform valu profil schedul must select highli predict instruct improv perform vss result valu profil differ input paramet shown strongli correl 5 6 therefor valu profil use select highli predict instruct perform valu specul valu profil perform registerwrit instruct profil overhead concern filter may use perform valu profil select instruct select instruct may resid critic path long depend height long latenc eg load instruct 5 estim converg profil propos reduc profil overhead determin invari instruct similar techniqu could appli determin valu predict instruct next valu specul schedul perform region format treegion format 10 region type chosen experi treegion nonlinear region includ multipl execut path form tree basic block larger schedul scope treegion allow schedul perform aggress control valu specul data depend graph construct treegion step four threshold predict accuraci use determin whether perform valu specul instruct instruct schedul queri valu profil inform get estim predict predict estim greater threshold valu predict perform aggress schedul instruct specul choos low threshold suggest valu threshold deriv experiment result section 4 instruct select valu predict ldpred instruct insert directli ldpred instruct immedi valu assign schedul chosen index valu predictor new regist also assign destin ldpred instruct new destin regist chosen ldpred instruct depend instruct need updat sourc regist reflect new depend ldpred instruct first depend instruct chain depend instruct need updat regist sourc remain depend chain 1 perform valu profil 2 perform region format 3 build data depend graph region 4 select instruct predict accuraci base valu profil greater threshold 5 insert ldpred predict instruct select instruct step 6 chang sourc operand depend instruct destin regist ldpred 7 insert branch patchup code 8 gener patchup code contain udpr 9 repeat step 4 8 candid found 10 updat data depend graph region 11 perform region schedul 12 repeat step 2 11 region figur 7 algorithm valu specul schedul unaffect even though one chain depend instruct may result one valu predict one ldpred instruct need valu predict step seven branch patchup code insert repair misspredict one branch per data valu predict requir schedul determin branch insert locat branch set instruct depend chain predict instruct branch patchup code candid valuespecul execut therefor desir schedul instruct predict instruct actual hardwar resourc restrict abil specul execut candid valu specul also candid valu specul duplic patchup code number directli affect penalti misspredict factor affect schedul decis place branch patchup code step eight patchup code creat repair miss predict patchup code contain udpr instruct copi candid valuespecul execut uncondit jump back instruct follow branch patchup code udpr instruct use immedi valu assign schedul correspond ldpred instruct index valu predictor sourc operand udpr instruct destin regist predict instruct actual result predict instruct udpr instruct index actual result use updat valu predictor final step ten eleven data depend graph updat reflect chang treegion schedul perform machin resourc restrict depend candid valu specul specul predict instruct section 4 show result use differ threshold valu determin valu specul 4 experiment result specint95 benchmark suit use experi program compil classic optim impact compil univers illinoi 11 convert rebel textual intermedi represent elcor compil hewlettpackard laboratori 12 lego compil research compil develop north carolina state univers use insert profil code form treegion schedul instruct 10 instrument valu profil intermedi code lego compil convert c code execut result c code gener valu profil data experi valu specul schedul vss load instruct filter target valu specul load instruct select usual critic path long latenc valu profil load instruct perform program tabl 1 show statist profil run number total profil load instruct repres total number load instruct benchmark load instruct instrument profil number static load instruct repres number load instruct actual execut differ total profil static load instruct number load instruct visit number dynam load instruct total ed ic 0 10 20 30 40 50 70 80 90 100 re 130 132 peg 134 pe rl 147 vo rt e x ri hm e ic ean predict accuraci load instruct tr de two leve hy b r figur 8 predict accuraci load instruct stride twolevel hybrid predictor load execut multipli execut frequenc stride twolevel hybrid valu predictor simul valu profil evalu predict accuraci load instruct sinc goal paper measur perform vss rather requir capac hardwar buffer indic conflict load model intellig index assign algorithm like produc result similar develop algorithm outsid total profil load instruct static load instruct dynam load instruct 129compress 96 72 4070431 132ijpeg 5104 1543 118560271 134perl 6029 1429 4177141 147vortex 16587 10395 527037054 tabl 1 statist total profil static dynam load instruct scope paper left futur work valu profil everi execut load instruct simul predict compar actual valu determin predict accuraci valu predictor simul updat actual valu would hardwar prepar predict next use entri stride valu predictor use two field stride current valu predict alway current valu plu stride stride equal differ recent current valu stride valu predictor alway gener predict finit state machin hardwar requir determin predict use twolevel valu predictor design 7 four data valu six outcom valu histori pattern valu histori tabl first level valu histori pattern index pattern histori tabl second level pattern histori tabl employ four satur counter use select like predict amongst four data valu satur counter pattern histori tabl increment three twelv decrement one zero select data valu maximum satur counter valu alway gener predict hybrid valu predictor stride twolevel valu predictor util previou descript illustr earlier figur 6 section 2 hybrid design satur counter use select stride twolevel predict also increment three twelv decrement one zero figur 8 show predict accuraci load instruct stride twolevel hybrid predictor predict accuraci twolevel predictor higher stride predictor benchmark except 129compress 132ijpeg howev averag predict accuraci stride predictor higher twolevel predictor larg perform differ 129compress examin valu trace 129compress show mani long stride sequenc predict correctli historybas twolevel predictor hybrid predictor capabl leverag advantag predict method highest predict accuraci 63 averag across benchmark figur show predict accuraci distribut load instruct use hybrid predictor figur 9 distribut static load figur 10 distribut dynam load 124m88ksim 90 dynam load instruct predict accuraci 90 129compress 80 dynam load instruct predict accuraci 90 124m88ksim 45 static load predict accuraci 90 repres dynam load instruct 129compress 70 static load predict accuraci 90 load excel candid vss high predict accuraci result low overhead due execut patchup code howev benchmark 099go 132ijpeg respect 15 25 figur 9 predict accuraci distribut static load instruct use hybrid predictor red ic tor103050709090 80 7 0 60 5 0 40 30 20 10 0 pred ict ion accurac i percentag load 124 m88ksim 126 gcc 129 compress li 132 ijpeg 134 per 147 vor tex figur 10 predict accuraci distribut dynam load instruct use hybrid predictor hybrid pred ictor103050709090 80 70 60 50 40 30 20 10 0 predict accuraci percentag dynam load 126gcc 129compress 130 li 132 ijpeg 134perl 147vortex dynam load instruct predict accuraci 50 therefor gain much perform benefit vss vss algorithm figur 7 perform program specint95 predict accuraci threshold valu 90 80 70 60 50 evalu number candid valuespecul execut limit three valu predict paramet vari evalu valu three provid good result evalu speedup long instruct word architectur machin model base hewlettpackard laboratori playdoh architectur 13 chosen one cycl latenc assum oper includ ldpred udpr except load two cycl floatingpoint add two cycl floatingpoint subtract two cycl floatingpoint multipli three cycl floatingpoint divid three cycl lego compil static schedul program specint95 schedul use treegion format 10 increas schedul scope includ treelik structur basic block singl nonlinear region compil perform control specul allow oper schedul branch univers function unit execut oper type assum eight univers unit 8u machin model use function unit fulli pipelin integ latenc 1 cycl load latenc 2 cycl program execut time measur use schedul length region execut profil weight effect instruct data cach ignor perfect branch predict assum effort determin maximum potenti benefit vss figur 11 show execut time speedup program schedul vss without vss five differ predict accuraci threshold use select load oper valu specul maximum speedup benchmark 17 147vortex illustr figur 10 147vortex mani dynam load oper highli predict 147vortex highest predict load oper sheer number illustr tabl 1 result best perform benchmark 124m88ksim 129compress also show impress speedup 10 115 respect use threshold 50 speedup 124m88ksim actual goe even predict threshold goe 90 50 result deduc distribut dynam load 124m88ksim steadi increas number dynam load avail threshold decreas 90 50 taper speedup though misspredict seen near threshold 50 129compress step distribut dynam load 80 70 reflect correspond step speedup perform gain 126gcc reflect larg number dynam load oper predict penalti misspredict lower threshold reduc speedup 126gcc benchmark 130li distribut dynam load similar 126gcc lower perform due fewer dynam load benchmark 134perl clearli suffer 8u machin model10210611114118 099go 124m88ksim 126gcc 129compress 130li 132ijpeg 134perl 147vortex 90 80 70 60 50 figur 11 execut time speedup vss vss predict accuraci threshold valu 90 80 70 60 50 use mani dynam load benchmark 099go 132ijpeg good predict load oper base perform result predict threshold 70 appear good select distribut predict dynam load figur 10 threshold 70 includ larg major predict dynam load choos threshold predict lower 70 result taper perform benchmark due higher penalti misspredict satur function unit resourc result fewer save execut cycl 5 conclus futur work paper present valu specul schedul vss new techniqu exploit high predict registerwrit instruct techniqu leverag advantag hardwar scheme valu predict compil scheme expos ilp dynam valu predict use enabl aggress static schedul valu depend instruct specul way vss thought static ilp transform reli dynam valu predict hardwar result vss present paper impress especi consid load oper consid valu specul futur work includ studi heurist select registerwrit oper critic path avail function unit resourc remain data depend affect abil improv static schedul penalti patchup code vss also appli oper load base predict potenti benefit speedup mani candid valu specul execut depend instruct predict instruct branch patchup code allow also import paramet gener better heurist decid specul valu mani vss candid allow directli affect amount patchup code studi 6 acknowledg work fund grant hewlettpackard ibm intel nation scienc foundat mip9625007 would like thank bill havanki sumedh sathay sanjeev banerjia member tinker group also thank anonym review valuabl comment 7 r dynam memori disambigu use memori conflict buffer valu local load valu predict exceed dataflow limit via valu predict predict data valu valu profil program profil support valu predict highli accur data valu predict use hybrid predictor effect instruct fetch bandwidth valu predict specul execut base valu predict treegion schedul wideissu processor superblock effect techniqu vliw superscalar compil analysi techniqu predic code hpl playdoh architectur specif version 10 intel hp make epic disclosur tr superblock dynam memori disambigu use memori conflict buffer valu local load valu predict analysi techniqu predic code exceed dataflow limit via valu predict predict data valu valu profil program profil support valu predict highli accur data valu predict use hybrid predictor treegion schedul wide issu processor ctr dean tullsen john seng storageless valu predict use prior regist valu acm sigarch comput architectur news v27 n2 p270279 may 1999 tarun nakra rajiv gupta mari lou soffa valu predict vliw machin acm sigarch comput architectur news v27 n2 p258269 may 1999 mikio takeuchi hideaki komatsu toshio nakatani new specul techniqu optim floatingpoint perform preserv bitbybit reproduc proceed 17th annual intern confer supercomput june 2326 2003 san francisco ca usa daniel connor wenmei w hwu compilerdirect dynam comput reus rational initi result proceed 32nd annual acmiee intern symposium microarchitectur p158169 novemb 1618 1999 haifa israel huiyang zhou jill flanagan thoma cont detect global stride local valu stream acm sigarch comput architectur news v31 n2 may compil control valu predict use branch predictor base confid proceed 33rd annual acmiee intern symposium microarchitectur p327336 decemb 2000 monterey california unit state youfeng wu dongyuan chen jess fang better explor regionlevel valu local integr comput reus valu predict acm sigarch comput architectur news v29 n2 p98108 may 2001 lucian codrescu scott will jame meindl architectur atla chipmultiprocessor dynam parallel irregular applic ieee transact comput v50 n1 p6782 januari 2001 martin burtscher amer diwan matthia hauswirth static load classif improv valu predict datacach miss acm sigplan notic v37 n5 may 2002 chaoy fu jill bodin thoma cont model valu specul optim edg select problem ieee transact comput v52 n3 p277292 march