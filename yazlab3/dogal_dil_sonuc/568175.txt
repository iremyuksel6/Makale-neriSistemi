jone optim bindingtim improv strength program special jone optim tell us program special strong enough remov entir level selfinterpret show jone optim origin aim futamura project play import role bindingtim improv main result show regardless bindingtim improv appli sourc program matter extens special jonesoptim strictli weaker special jone optim view bindingtim improv gener extens selfinterpret connect result previou work interpret approach b introduct bindingtim improv semanticspreserv transform appli sourc program prior program special instead special origin program modifi program special goal produc residu program better sens one produc origin program classic exampl 6 bindingtim improv naiv pattern matcher oin partial evalu 20 produc special pattern matcher ecient gener knuth morri oin partial evalu achiev optim without suitabl bindingtim improv wellknown two program function equival may special dierent bindingtim improv lead faster residu program improv flow static data make special termin often dynam static comput numer bindingtim improv describ literatur eg 3 7 20 routin use oin onlin special main advantag requir user modifi special order overcom limit special method henc handi mani practic situat surprisingli sever question rais bindingtim improv program limit bindingtim improv condit modif trigger desir special ef fect good luck naiv pattern matcher may rewritten lead oin partial evalu perform kmpoptim bindingtim improv found problem special paper answer relat question conceptu level reli particular special method technic detail interest statement valid special identifi condit figur 1 show structur special system employ bindingtim improv preprocessor bindingtim improv bti take program p divis sd classifi ps paramet static dynam return function equival program p program special respect static data x special spec special bindingtim improv take divis sd input static special system spec figur 1 bindingtim improv preprocessor program special data x avail special flow transform common virtual special system usual special automat program transform bindingtim improv often done hand investig matter step perform result paper extend previou work jone optim 18 28 22 32 interpret approach 11 13 34 see jone optim 18 play key role power bindingtim improv togeth static express reduct establish certain kind nontrivi among other precis answer old question whether oin partial evalu power onlin partial evalu paper organ follow review standard definit interpret special sect 2 present two main ingredi work jone optim sect improv sect 4 main result proven sect 5 addit theorem present sect 6 connect interpret approach establish sect 7 opportun optim construct discuss sect 8 conclud relat work sect challeng futur work sect 10 assum reader familiar partial evalu ation eg present 20 part ii 2 preliminari section review standard definit interpret special notat adapt 20 use divis sd classifi paramet program static dynam 1 assum alway deal univers program languag 21 notat program text p written languag l let denot applic lprogram p input index l unspecifi assum languag l intend multipl argument written list notat strict argument equal program applic shall alway mean strong comput equival either side impli special use oin partial evalu equat defin equal side undefin program input output drawn common data domain includ program text conveni deal program accept program data input suitabl choic set list known lisp defin program domain leav program languag unspecifi element data domain evalu program appli enclos defin program use abstract express need translat correspond program languag denot p q p translat alway possibl l univers program languag 22 interpret special follow standard definit interpret special definit 1 interpret lprogram int int definit 2 selfinterpret lprogram sint sint selfinterpret l sint llinterpret definit 3 special lprogram spec spec special l ip p x simplic assum program special two argument first argument static even though make use divis sd definit keep explicit reason explain 12 special need total definit allow spec diverg p sd x diverg x practic special often sacrific termin behav ior discuss termin issu see 19 special trivial residu program produc simpl instanti sourc program definit 4 trivial special lspecial spec triv spec trivial realist special evalu static express sourc program express static depend known data thu precomput special time defin special case static express reduct sucient purpos definit run time taken 20 sect 317 2 definit 5 run time program data d1 dn let p d1 dn denot run time definit 6 static express reduct special spec spec static express reduct q q p 2 measur run time time semant eg number elementari comput step definit tell us term residualprogram ecienc dierenc special program q respect valu special composit p q q respect valu x impli special contain least interpret univers program evalu static applic definit p special static express reduct nontrivi definit impli power perform univers comput special im plement includ onlin oin partial evalu tri evalu mani static express possibl improv ecienc residu program satisfi static express reduct properti given 3 jone optim translat program special interpret import entir interpret overhead move let us look problem close explain definit jone optim 31 translat special let p n program let intn n linterpret let spec special l 1st futamura project 9 defin use def 1 3 function equival q p note program p written languag n program q written languag l n toltransl achiev special n linterpret intn respect p say q target program sourc program p translat alway perform consid trivial special first argument intn instanti p result trivial target program clearli translat expect target program ineci contain entir interpret natur goal therefor produc target program ecient sourc program unfortun expect special produc ecient target program interpret nontrivi languag special exist 16 could make maxim use static input p program 32 jonesoptim special special said strong enough 18 complet remov interpret overhead selfint preter definit adapt 20 64 make use 1st futamura project definit 7 jone optim let sint sint self interpret special spec spec jonesoptim sint joptspec sint special spec said jonesoptim exist least one selfinterpret sint sourc program p target program p least ecient input sourc program p tell us spec remov entir layer selfinterpret case selfinterpret special interest easi judg extent interpret overhead remov compar sourc target program written languag particular program p p ident safe conclud goal achiev also explain 25 limit structur residu program inherit structur bound sourc program best observ special selfinterpret eg ariti function definit residu program easi requir jone optim alway easi satisfi instanc partial evalu firstord function languag algebra data type 25 combin sever transform method necessari constant fold unfold polyvari special partial static valu constructor specializa tion type special jone optim first proven 28 lambdamix see also 24 first implement jonesoptim special oin partial evalu 26 lisplik languag earli oin partial evalu 23 similar languag util partial static structur produc near ident map mani special known whether jonesoptim partial evalu fclmix 15 imposs write selfinterpret make jone optim recent work 32 jone optim concern tagelimin special selfinterpret strongli type languag note definit jone optim satisfi simpl construct els mysint fix selfinterpret want myspec jonesoptim spec triv trivial special def 4 special myspec return last argument x unchang first argument p equal mysint otherwis myspec perform trivial specializa tion clearli special use practic formal joptmyspec mysint final show jonesoptim special static express reduct exist fact play import role next section properti satisfi simpl construct myspec stat case p case implement pattern match program p consist composit two arbitrari program p decompos 3 q q q special respect result evalu sint selfinterpret otherwis p special respect x special jonesoptim mysint express reduct properti def 6 realist 3 shall concern technic detail pars lprogram p jonesoptim special instanc 26 23 25 28 also satisfi properti static express reduct 4 bindingtim improv bindingtim improv 20 semanticspreserv transform appli sourc program special aim produc residu program better sens produc origin sourc program numer bindingtim improv describ literatur eg 3 7 20 formal bindingtim improv program take program p divis ps argument static dynam transform p function equival program p bindingtim improv perform transform independ static valu avail special definit 8 bindingtim improv lprogram bti bti bindingtim improv l use def 3 8 follow function equival residu program r r produc directli special p special bindingtim improv version p practic expect hope program r better sens program r exampl bindingtim improv lead faster residu program improv flow static inform special time import note bindingtim improv precomput residu program sinc static valu make tabl contain possibl residu program sinc gener special sourc program allow infinit number dierent residu program compar translat translat precomput result sourc program store say tabl target program sinc gener infinit number dierent result term bindingtim improv origin coin context oin partial evalu 20 improv flow static inform eas transform routin use special method surpris sinc exist special method could make maxim use avail inform case use term bindingtim improv semanticspreserv pretransform regardless particular special method note def 8 requir sourc program transform ident transform correct trivial bindingtim improv cours bindingtim improv use must perform nontrivi transform least program oth erwis residu program r r 4 alway ident 5 jonesoptimalitybindingtim improv previou section two dierent stream idea present bindingtim improv jone optim special program relat put idea togeth present two main result 51 suffici condit first theorem tell us everi jonesoptim special spec 1 exist bindingtim improv allow special achiev residualprogram e cienci special jone optim su cient condit proof make use gener construct bti theorem 1 jone optim sucient special reduct follow hold proof proceed two step 1 let sint 1 selfinterpret spec 1 jone optim special spec 2 defin bindingtim improv z two stage q bindingtim improv depend sint 1 spec 2 program p given program p divis sd program bti produc new program perform ps comput two stage first spec 2 special p respect x sint 1 evalu residu program remain input def 2 3 follow new program function equival p accord def 8 bti bindingtim improv sinc p p x 2 consid rh implic thm 1 spec 2 let bti bindingtim improv defin 6 let p program let x data bindingtim improv program obtain residu program r special p respect x reduc static express sinc p form suit def 6 rewrit 8 9 obtain program r evalu applic spec 2 9 obtain 10 recal rh implic r 11 result special sint 1 respect r spec 1 program r fast r accord def 6 special 10 joptspec 1 sint 1 conclud r least fast r sinc relat hold p x prove theorem 52 necessari condit second theorem tell us special spec 1 jonesoptim alway reach residualprogram ecienc anoth special spec 2 jone optim necessari condit theorem 2 jone optim necessari special follow hold proof assum rh implic hold choos sint joptspec 2 sint 2 special exist nontrivi program languag eg myspec sect 3 let bti bindingtim improv satisfi rh implic respect spec 2 defin sint sinc bti bindingtim improv sint 2 self sint 1 also selfinterpret rh implic let p sint 2 let x program q let data sinc joptspec 2 sint 2 combin 14 16 realiz relat hold q thu conclud joptspec 1 sint 1 prove theorem second theorem impli special jonesoptim benefit bindingtim im provement limit achiev bindingtim improv spec 1 jonesoptim observ proof thm 2 rh implic weaken instead quantif spec 2 spec need quantif spec 2 spec remark literatur 22 jone optim often defin use r assumpt follow directli rh thm 2 must reduc static express spec 2 53 discuss 1 combin theorem conclud term residualprogram ecienc special jonesoptim strictli weaker special jonesoptim 2 question whether oin partial evalu power onlin partial evalu answer precis oin partial evalu static express reduct jonesoptim achiev residualprogram ecienc onlin partial evalu use suitabl bindingtim im prover bindingtim improv depend partial evalu sourc program 3 jone optim import build special work well futamura pro jection previous found intuit would good properti 17 18 theorem give formal statu term optim name criterion 4 result also support observ 25 special weak overcom inherit limit best observ special selfinterpret amount test whether special jonesoptim way test strength special see whether deriv certain wellknown ecient program naiv ineci program one popular test 10 6 29 2 see whether special gener naiv pattern matcher fix pattern ecient pattern matcher make jone optim stand comparison test jonesoptim special static express reduct guarante pass test suitabl bindingtim improv thm 1 special may success pass number test long jonesoptim strength limit way thm 2 even though construct bindingtim im prover use proof thm 1 suggest sourc program p transform new p deep transform may necessari case extent sourc program need transform practic depend desir optim actual power special spec 1 realist bindingtim improv need transform sourc program 6 robust section present two result regard jone opti maliti establish certain kind nontrivi jonesoptim special static express reduct particular tell us infinit number selfinterpret jonesoptim special static express reduct also jonesoptim theorem 3 jone optim singular let spec 1 two jonesoptim special spec 1 reduc static express let sint 1 sint 2 sint two selfinterpret joptspec 1 sint 1 joptspec 2 sint 2 exist selfinterpret sint 3 sint differ beyond renam sint 1 sint 2 proof proof use construct combin two selfinterpret special new selfinterpret without break jone optim defin selfint preter sint 3 sint 3 new selfinterpret sint 3 dierent beyond renam selfinterpret sint 1 sint 2 sinc sint 3 contain program show joptspec 1 sint 3 examin spec 1 special sint 3 sinc spec 1 reduc static express sinc sint 3 form suit def 6 conclud relat hold p desir properti joptspec 1 sint 3 prove theorem first observ spec 1 jonesoptim sint 3 spec 2 sint faster p turn faster p surpris sinc special usual idempot repeatedli appli special program lead opti mizat known area compil construct optim may enabl optim also underlin realist choos time condit def 7 alreadi discuss sect 3 second special case thm 3 let spec sint conclud repeatedli appli theorem everi jonesoptim special static express reduct exist infinit number selfinterpret special also jone optim state formal follow theorem theorem 4 jone optim robust let spec spec special static express reduct let sint sint selfinterpret joptspec sint 1 exist infinit number selfinterpret sint sint pairwis dierent beyond renam joptspec sint 2 exist infinit number special spec spec pairwis dierent beyond renam joptspec sint proof let copi 0 program defin number program copi i1 copi copi j dierent beyond renam j 0 1 defin number program sint 0 sint sint selfinterpret selfinterpret dierent beyond renam sinc contain differ copi program sint form use def 6 conclud joptspec sint sinc 2 defin number program spec 0 spec special special dier ent beyond renam sinc contain dierent copi program conclud joptspec sint sinc prove theorem remark first item also proven use construct proof thm 3 requir static express reduct theorem hint certain kind nontrivi jone optim special also suggest thm 1 static express reduct sure jone optim singular special infinit number selfinterpret jonesoptim special static express reduct said robust respect certain nontrivi modif selfinterpret eectiv exclud jone optim special myspec defin sect 3 may kind fair sought earlier work 22 7 three techniqu bindingtim improv program section establish connect three known techniqu bindingtim improv fig ure 2 use standalon bindingtim improv bti c previou section stack sourc program p instrument selfinterpret b show thm 1 thm 2 cover two new case minor adapt three techniqu produc residu program thu equal power respect bindingtim improv consid follow fragment thm 1 thm 2 bindingtim improv version p special respect x observ bti function translatorif disregard extra argument sd wellknown 20 gener extens 8 interpret transla tor sinc bindingtim improv function ltol translat gener extens self interpret l instead bindingtim improv p bti special suitabl selfinterpret sint respect p two way produc residu program special selfinterpret either directli special project 11 increment futamura project 9 b examin two case 71 increment special let bti bindingtim improv suppos spec 0 special sint 0 selfinterpret 4 use equal obtain new set equat thu everi bindingtim improv perform transl way 29 interpret way 32 exampl 34 latter case polyvari expans sourc program special suitabl self interpret appli bindingtim monovari oin special modifi program overal eect transform bindingtim polyvari oin special even though bindingtim mono variant oin special use produc residu program similarli known 21 27 30 31 optim translat gener suitabl interpret techniqu also use selfinterpret improv special program theorem 1 2 carri interpret case provid replac rh implic quantif quantif spec 0 spec sint use 32 33 instead 29 30 72 direct special two step 32 33 also carri one step notat conveni let us first redefin format selfinterpret special make easier accommod program two three argument selfinterpret sint interpret program two argument defin special spec special program three 4 everi bti exist pair spec 0 sint 0 31 vice versa prop 1 2 appendix argument defin program q special respect one static argument 35 respect two static argu ment b 36 residu program take remain argument input note case dierent divis use spec two step 32 33 carri one step let q selfinterpret sint defin let twoargument program p let b c argument x respect p special respect x via sint use 36 r residu program p follow 34 36 let bti bindingtim improv let spec 1 special 29 30 suppos spec special sint selfinterpret 5 equat 37 1st special project 11 selfinterpret instead interpret special program via interpret also known interpret approach 11 exampl 13 gener kmpstyle pattern matcher naiv pattern matcher insert instrument selfinterpret naiv pattern matcher oin partial evalu similix mention sect 1 oin partial evalu achiev optim special naiv matcher via instrument selfinterpret job anoth exampl simul onlin partial evalu oin partial evalu 33 bootstrap program transform 30 note transform 37 optim anoth level special spec respect sint yield new special intern techniqu self interpret new special know 2nd special project 11 result gener optim special report elsewher eg 13 33 30 main theorem appli case replac quantif bti bti sint sint rh implic 73 summari three techniqu bindingtim improv program summar fig 2 produc residu program thu equal power respect bindingtim improv program techniqu prefer practic depend applic hand exist exampl applic literatur case result section shed new light relat bindingtim improv interpret approach two main theorem cover three case 5 everi pair spec 1 bti exist pair spec sint 39 vice versa prop 3 4 appendix direct special one step 1st special project increment special b two step 1st futamura project c three step 2nd futamura project figur 2 three techniqu bindingtim improv program add 29 30 step gener bindingtim improv selfinterpret obtain 40 41 42 2nd futamura project detail formal reason due definit special spec 35 argument bti reorder 8 optimizingthetheoreticalcon proof thm 1 make use gener bindingtim improv mani case certain fragment relev bindingtim improv program particular special spec 1 need incorpor bindingtim improv entir special spec 2 remaind section point possibl optim gener construct program special program composit 1 special observ bindingtim improv produc bti 7 contain special whose argument fix p make program structur p much gener usual compon spec 2 need special p improv construct replac spec 2 gener extens gen p p program specifi gener extens gen p gener ps residu program use follow program instead z composit x q 44 2 composit notic fix composit sint 1 gen p 44 intermedi data structur residu program produc gen p consum sint 1 method program composit may fuse two program elimin intermedi data structur code gener pars redund oper interest examin whether known bindingtim improv justifi start gener construct whether new bindingtim improv deriv gener construct spec 2 repres desir level special let us illustr exampl suppos onp onlin partial evalu ope oin partial evalu reduc static express jonesoptim selfinterpret sint special accord thm 1 r r two residu program produc bindingtim improv defin bindingtim improv p bti perform r produc ope least good one r produc onp deriv use bindingtim im prover bti program special program com posit obtain automat one bindingtim improv program publish literatur eg 6 2 special bti respect sourc program eg naiv pattern matcher anoth challeng question whether bindingtim improv specifi combin atom bindingtim improv relat combin semant tower nonstandard interpret 1 9 relat work first version optim appear 17 problem 38 special call strong enough program p program essenti program definit optim use paper appear first 18 p650 see also 20 sect 64 sinc power special judg mani differ way use term jone optim propos 22 work focu problem selfappl none consid role jonesoptim special bindingtim improv also said 25 special weak overcom inherit limit best observ special self interpret result underlin argument perspect bindingtim improv term bindingtim improv origin coin context oin partial evalu 20 sourcelevel transform program prior special routin use connect special method bindingtim improv rang rearrang express eg use associ arithmet oper transform requir ingenu eg transform naiv pattern matcher 6 2 transform incorpor fragment special 4 collect bindingtim improv oin partial evalu found 3 sect7 20 chapter 12 actual power bindingtim improv investig work idea 11 control properti residu program special suitabl interpret use perform deforest unificationbas inform propag 13 14 bindingtim polyvari special 34 30 transform 30 oin partial evalu appar dierent stream work connect bindingtim improv relat work 5 shown without use bindingtim improv oin partial evalu maxim polyvari bindingtim analysi function equival onlin partial evalu partial evalu base constant propag paper show oin partial evalu simul onlin partial evalu suitabl bindingtim improv provid oin partial evalu jonesoptim 10 conclus anecdot evid suggest bindingtim improv program use inexpens method overcom limit special without modifi special pretransform often ad hoc appli improv special program know theoret limit condit method power pretransform result show one alway overcom limit jonesoptim special static express reduct use suitabl bindingtim improv ment alway case special jonesoptim thu regardless bindingtim improv perform sourc program matter extens special jone optim said strictli weaker special jonesoptim also answer question whether oin partial evalu power onlin partial evalu jone optim origin formul assess qualiti special translat program special interpret result give formal statu term optim name criterion previous found intuit would good properti inde propos renam optim special izat jonesoptim special precis felt wrong impli special better jonesoptim one paper show way implic inde true proof make use construct bindingtim improv work special construct sucient theoret purpos practic incorpor entir special practic special method produc residu eect connect particular special evidenc numer bindingtim improv given literatur howev univers construct may provid new insight natur bindingtim improv instanc interest see whether nontrivi bindingtim improv eg 6 2 justifi univers construc tion whether new pretransform deriv special incorpor univers construct repres desir special strength eventu may lead better understand design reason bindingtim improv result impli special jonesoptim benefit bindingtim improv ment exampl seem kmp test pass oin partial evalu jone optim lead question practic limit special jonesoptim work need identifi caus eect concret level awar onlin partial evalu shown jone optim question answer posit alreadi done oin partial evalu also much practic experi build jonesoptim special realist program languag stanc work need retyp transform strongli type languag make transform standard program special truli jonesoptim acknowledg comment sergei abramov kenichi asai mikhail buli onkov niel christensen yukiyoshi kameyama siaucheng khoo eijiro sumii earlier version paper greatli appreci special thank due anonym review thorough care read submit paper provid mani valuabl comment preliminari version paper present second asian workshop program languag system daejeon south korea 11 r combin semant nonstandard interpret hierarchi abstract instanti stringmatch program similix 50 manual extract polyvari bind time analysi polyvari special equival onlin partial evalu pattern match string better support static data flow partial comput principl partial evalu comput process approach compilercompil gener partial comput gener special mechan metasystem hierarchi program transform gener optim special gener transform deforest supercompil compil gener partial evalu case studi partial evalu challeng problem partial evalu mix comput partial evalu program gener partial evalu automat program gener gener compil lazi languag partial evalu jonesoptim special strongli type languag partial static structur selfapplic partial evalu evolut partial evalu remov inherit limit structur selfapplic partial evalu ml pattern match compil partial evalu mechan proof optim partial evalu posit supercompil bootstrap higherord program transform interpret realist compil partial evalu tag elimin jonesoptim gener higherord onlin partial evalu polyvari expans compil gener tr partial evalu myampersandohgrcomplet algebra specif structur selfapplic partial evalu partial evalu pattern match string partial evalu selfappl type better support static data flow gener compil lazi languag partial evalu partial evalu automat program gener extract polyvari bind time analysi polyvari special realist compil partial evalu bootstrap higherord program transform interpret program gener termin bindingtim analysi tag elimin jonesoptim jonesoptim special strongli type languag polyvari expans compil gener combin semant nonstandard interpret hierarchi mechan metasystem hierarchi program transform evolut partial evalu mk pattern match compil partial evalu ctr niel h christensen robert glck offlin partial evalu accur onlin partial evalu acm transact program languag system topla v26 n1 p191220 januari 2004