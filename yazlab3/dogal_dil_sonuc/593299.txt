determin express power constraint constraint languag power other allow us express larger collect problem paper give precis mean concept express power constraint finit set valu central result paper express power given set constraint type determin certain algebra properti underli relat algebra properti calcul solv particular constraint satisfact problem call indic problem discuss connect express power comput complex show indic problem provid simpl method test tractabl b introduct constraint languag power other allow us express larger collect problem exampl deal applic involv realvalu variabl possibl express numer relationship use arbitrari polynomi equat restrict use linear equat similarli deal applic involv boolean variabl possibl express logic relationship use ternari claus restrict use binari claus cours penalti increas express power gener increas comput complex exampl satisfi problem ternari claus npcomplet 6 wherea satisfiabiliy problem involv binari claus solv polynomi time 6 gener finit constraint satisfact problem arbitrari constraint known npcomplet 13 wherea mani famili restrict constraint identifi give rise tractabl subproblem 3 9 10 11 14 17 18 given applic therefor pay select constraint system suffici express power express desir constraint suffici restrict allow effici solut techniqu paper focu problem finit set possibl valu examin express power given set constraint type may defin central result paper express power given set constraint type determin certain algebra properti correspond relat also show algebra properti calcul solv particular constraint satisfact problem call indic problem final discuss connect express power comput complex show indic problem provid simpl method test tractabl paper organis follow section 2 give basic definit describ gener form algebra closur properti set relat section 3 describ calcul closur properti section 4 establish close link closur properti express power section 5 discuss relationship express power tractabl final summaris result present indic direct futur research 2 definit 21 constraint satisfact problem central notion studi constraint constraint satisfact problem idea relat make extens use follow notat notat 1 set natur number n denot set ntupl element n tupl 2 n rang 1 n denot valu ith coordin posit ti tupl written form ht1 definit 1 subset n call nari relat exampl 1 describ four relat use exampl throughout paper relat set tupl element set defin order manipul combin relat make use follow standard oper relat algebra 2 definit 2 defin follow oper relat ffl let r 1 nari relat set let r 2 mari relat cartesian product r 1 theta r 2 defin n mari relat ffl let r nari relat set let 1 n equal select oe ij r defin nari relat oe ffl let r nari relat set let sequenc indic chosen valu n project r defin kari relat defin finit constraint satisfact problem wide studi artifici intellig commun 12 13 14 definit 3 instanc constraint satisfact problem consist ffl finit set variabl ffl finit set valu ffl set constraint fc g constraint c pair list variabl length call constraint scope r ari relat call constraint relat tupl constraint relat r indic allow combin simultan valu variabl correspond scope length tupl call ariti constraint particular unari constraint specifi allow valu singl variabl binari constraint specifi allow combin valu pair variabl notat 2 set relat gamma class constraint satisfact problem instanc constraint relat element gamma denot cspgamma exampl set four relat fr 1 defin exampl 1 one element cspgamma constraint satisfact problem instanc p 6 variabl 3 constraint defin follow ffl set variabl ffl set valu ffl set constraint fc structur problem instanc illustr figur 1 2 oe ae x x x x x x figur 1 csp instanc defin exampl 2 solut constraint satisfact problem function variabl valu combin valu assign variabl constraint scope allow correspond constraint given problem instanc may wish ffl decid whether solut exist ffl find one solut exist ffl count number solut ffl find solut task may differ complex import precis version problem tri solv often conveni view solut constraint satisfact problem tupl relat illustr next exampl relat largest relat project onto constraint scope subset correspond constraint relat exampl 3 solut constraint satisfact problem instanc p defin exampl 2 function set variabl v set valu satisfi constraint four function may express tabular form follow variabl solut solut solut solut set solut may also view relat ariti 6 four tupl correspond four row tabl 2 22 express power constraint constraint satisfact problem instanc constraint explicit whilst other gener present implicit constraint instanc cspgamma explicit constraint relat must element gamma may implicit constraint subset variabl correspond relat element gamma implicit constraint result combin effect explicit constraint said deriv explicit constraint defin exactli mean say constraint relat deriv constraint relat meant express power definit 4 relat r deriv set relat gamma equal project set solut constraint satisfact problem instanc cspgamma exampl 4 reconsid set solut constraint satisfact problem instanc p defin exampl 2 describ exampl 3 note 12 binari relat deriv g 2 one way view definit 4 follow relat r ariti r collect r variabl r deriv gamma possibl construct constraint satisfact problem instanc cspgamma impos relat r valu variabl word r deriv precis combin relat gamma use express constraint relat r definit 5 set relat deriv gamma call express power gamma show notion deriv relat correspond precis notion relat may obtain use oper describ definit 2 set relat finit set relat r deriv gamma r obtain element togeth unari relat 1 use finit sequenc cartesian product equal select project oper proof first need show r project set solut instanc 1 cspgamma r obtain gamma use finit sequenc cartesian product equal select project oper shown 7 set solut constraint satisfact problem instanc obtain perform relat join oper constraint relat see definit 28 7 instanc cspgamma relat join either element gamma unari relat 1 case variabl explicit constraint specifi furthermor standard result relat databas theori 2 join oper calcul perform sequenc cartesian product equal select project oper henc r obtain use specifi relat oper convers r obtain gamma fd 1 g use sequenc cartesian product equal select project oper need show r equal project set solut instanc cspgamma establish first note specifi oper straightforward construct associ constraint satisfact problem instanc p cspgamma result oper equal project set solut p effect equal select oper achiev identifi correspond variabl p combin construct deriv r gamma view result conveni introduc follow notat notat 3 let gamma set relat set set relat may obtain gamma togeth unari relat 1 use finit sequenc cartesian product equal select project oper denot state set relat gamma precis equal express power gamma defin 23 closur properti relat show section 4 set relat gamma determin certain algebra properti gamma order describ properti need consid arbitrari oper set word arbitrari function k arbitrari valu k oper may extend oper tupl appli oper coordin posit separ ie pointwis henc oper defin set may use defin oper tupl relat set follow definit 6 let r nari relat set kari oper collect k tupl necessarili distinct defin follow use definit defin follow closur properti relat definit 7 let r relat set kari oper r said close underomega necessarili distinctomega exampl 5 let 4 denot ternari oper return first repeat valu three argument first valu distinct relat r 2 defin exampl 1 close 4 sinc appli 4 oper 3 element r 2 yield element r 2 exampl relat r 1 defin exampl 1 close 4 sinc appli 4 oper last 3 element r 1 yield tupl element posit integ posit integ let denot oper ariti return valu ith argument word everi relat r close mi valu sinc appli mi oper element r simpli return ith one 2 set relat gamma operationomega everi r 2 gamma close omega shall say gamma close underomega next lemma indic properti close oper preserv oper relat describ definit 2 r r 0 relat close underomega oper omega follow relat also close 1 cartesian product r theta r 0 2 project r r 0 3 equal select r r 0 proof follow immedi definit relat close oper mani common proper tie introduc follow notat notat 4 let gamma set relat set set relat close oper gamma close denot gamma 3 calcul closur oper view result present later paper import abl calcul closur oper given set relat section show possibl obtain oper possibl ariti obtain solut singl constraint satisfact problem instanc first note set relat gamma set oper gamma close simpli map k k satisfi certain condit describ definit 7 suggest possibl defin constraint satisfact problem variabl element constraint impos necessari condit ensur solut closur oper motiv idea indic problem defin follow definit 8 let gamma set relat finit set natur number 0 indic problem gamma order defin constraint satisfact problem instanc ip gamma ffl set variabl ffl set valu ffl set constraint fc g r 2 gamma sequenc tupl r constraint c ariti r note set relat gamma set ip gamma jdj variabl constraint exampl 7 consid relat r 1 defin exampl 1 indic problem fr 1 g order 1 ipfr 1 g 1 3 variabl 4 constraint set variabl set constraint indic problem fr 1 g order 2 ipfr 1 g 2 9 variabl 16 constraint set variabl set constraint exampl 8 consid relat r 2 defin exampl 1 indic problem fr 2 g order 1 ipfr 2 g 1 3 variabl 3 constraint set variabl set constraint indic problem fr 2 g order 2 ipfr 2 g 2 9 variabl 9 constraint set variabl set constraint consid relat r 1 r 2 defin exampl 1 indic problem fr 1 order 1 ipfr 1 7 constraint set variabl set constraint equal union set constraint ipfr 1 defin exampl 7 set constraint ipfr 2 g 1 defin exampl 8 indic problem fr 1 order 2 ipfr 1 25 constraint set variabl set constraint equal union set constraint ipfr 1 defin exampl 7 set constraint ipfr 2 g 2 defin exampl 8 2 solut indic problem gamma order k function k word kari oper show precis kari oper gamma close theorem 1 set relat gamma set set solut ip gamma equal set kari oper gamma close proof definit 7 know gamma close kari operationomega ifomega satisfi condit possibl choic r necessarili distinct definit 8 equival say satisfi constraint ip gamma k result follow exampl 10 consid relat r 1 defin exampl 1 indic problem fr 1 g order 1 defin exampl 7 2 solut may express tabular form follow variabl solut solut henc theorem 1 fr 1 g close precis two unari oper constant oper valu 0 ident oper indic problem fr 1 g order 2 defin exampl 7 4 solut may express tabular form follow variabl solut solut solut solut henc theorem 1 fr 1 g close precis four binari oper 2 exampl 11 consid relat r 2 defin exampl 1 indic problem fr 2 g order 1 defin exampl 8 3 solut may express tabular form follow variabl solut solut solut henc theorem 1 fr 2 g close precis three unari oper indic problem fr 2 g order 3 larg number solut includ oper 4 defin exampl 5 henc fr 2 g close ternari oper well larg number other 2 4 closur oper express power far defin two set relat associ given set gamma set relat deriv gamma denot set relat share closur oper gamma denot gamma section show two set relat defin differ way actual ident theorem 2 set relat gamma finit set proof lemma 2 know properti close oper preserv cartesian product project select oper follow immedi obtain revers inclus let relat gamma construct indic problem gamma order ip gamma let set solut ip gamma view relat sinc everi constraint relat ip gamma element gamma know deriv gamma henc claim r obtain project henc r also belong give result establish claim let r ariti r let c c j element henc correspond variabl ip gamma henc coordin posit p j let construct tupl equal result appli one solut ip gamma sequenc tupl belong gamma know r close solut ip gamma theorem 1 tupl must belong r henc r convers shown exampl 6 everi relat close oper mi henc theorem 1 mi solut ip gamma give rise tupl construct definit mi tupl equal henc r henc establish claim combin result lemma 1 shown express power set relat determin correspond set closur oper corollari 1 relat r deriv set relat gamma finit set r close oper gamma close exampl 12 reconsid relat r 1 r 2 defin exampl 1 shown exampl 10 11 r 1 close oper r 2 close henc corollari 1 r 1 deriv r 2 similarli result given exampl 10 11 also establish r 2 deriv r 1 2 5 express power complex seen express power set relat determin closur oper illustr one applic result examin use obtain inform complex class problem instanc involv given set constraint type decid whether given constraint satisfact problem instanc solut npcomplet gener 13 even constraint restrict binari constraint section shall consid restrict allow constraint relat fix subset possibl relat affect complex decis shall therefor regard cspgamma decis problem question decid instanc exist solut exist algorithm decid everi instanc cspgamma polynomi time shall say gamma tractabl set relat exampl 13 binari inequ relat set denot 6 defin note cspf6d g correspond precis graph jdjcolor problem 6 problem tractabl jdj 2 npcomplet relat r 4 defin exampl 1 equal relat 6 2g henc cspgamma npcomplet set relat gamma contain r 4 2 turn certain special oper play major role distinguish tractabl intract set relat oper essenti unari oper defin follow definit 9 call essenti unari exist nonconst unari oper f rang 1 k f permut thenomega call essenti permut exampl 14 oper mi defin exampl 6 essenti unari oper 2 note constant function exclud definit 9 essenti unari theorem 3 let gamma set relat finit set everi oper gamma close essenti unari cspgamma npcomplet proof assum gamma close essenti unari oper first note gamma close essenti unari operationomega also close correspond nonconst unari oper f let f 0 unari oper gamma close jf 0 dj minim gammag choic f 0 assumpt gamma follow f 0 gamma close essenti permut oper gamma close constant oper assumpt know jf 0 dj 1 2 case consid ffl case jf 0 2 consid ternari notallequ relat n ie relat contain 3tupl 3 valu equal relat n close essenti permut oper mean n 2 f 0 gamma theorem 2 lemma 1 impli n may deriv f 0 gamma henc cspfng may reduc cspf 0 gamma polynomi time cspfng equival notallequ satisfi problem known npcomplet 6 15 follow cspf 0 gamma also npcomplet ffl case jf 0 dj 2 consid binari disequ relat defin exampl 13 relat 6 f0d close essenti permut oper mean 6 f0d 2 f 0 gamma theorem 2 lemma 1 impli 6 f0d may deriv f 0 gamma henc cspf6 f0d g may reduc cspf 0 gamma polynomi time equival jf 0 djcolor problem known npcomplet jf final instanc cspf 0 gamma solut correspond instanc cspgamma solut gamma close f 0 henc cspf 0 gamma reduc cspgamma polynomi time establish cspgamma also npcomplet assum npcomplet problem polynomialtim algorithm result provid necessari condit tractabl tractabl set relat must close oper essenti unari fact shown 9 current known exampl tractabl constraint type characteris set relat close particular nonunari oper even case origin defin use differ criteria exampl 01all relat 2 first describ 3 11 characteris set relat close oper 4 defin exampl 5 second exampl variou set maxclos relat first describ 10 characteris set relat close particular binari associ commut idempot oper 9 may sharpen result theorem 3 littl bound possibl ariti closur oper gamma need consid next result show theorem 4 set relat gamma finit set gamma close operationomega essenti unari also close oper omega ariti maxf3 jdjg essenti unari proof proof adapt proof lemma 114 16 let gamma set relat close operationomega essenti unari let omega oper smallest possibl ariti gamma close omega omega essenti unari let k ariti omega k 3 result hold need consid case k 4 consid oper obtain omega identifi two argument ie requir valu sinc gamma close oper lower ariti omega must essenti unari henc identifi first two argument z nonconst unari oper f 12 2 kg similarli identifi third fourth argument z nonconst unari oper f 34 j 2 kg mean z z possibl choic x impli either 62 f1 2g j 62 f3 4g follow permut order argument omega obtain function phi satisfi ident z nonconst unari oper f particular distinct pair indic know essenti unari function sinc shown case x valu function equal fx 1 know must equal case similarli indic essenti unari function remain argument valu function equal fx argument henc must equal fx case argument valu least one argument valu must repeat somewher case shown omega order argument permut contradict fact omega essenti unari mean must k jdj result follow order use theorem 3 draw conclus tractabl set constraint need abl distinguish closur oper essenti unari definit 9 mean examin solut appropri indic problem check whether valu solut variabl determin singl coordin posit tupl describ variabl oper ariti check may carri mjdj step altern next result show number solut certain indic problem provid suffici condit establish npcomplet without need examin individu solut detail set relat set let 1 set nonconst solut ip gamma 1 let sm set solut ip gamma cspgamma npcomplet proof theorem 3 theorem 4 know either cspgamma np complet gamma close oper essenti unari ariti theorem 1 sm set mari oper gamma close definit 9 number oper sm essenti unari equal number nonconst unari oper gamma close multipli theorem 1 number mj 1 j henc js j mj 1 j case limit case js know everi element sm essenti unari gamma close mari oper essenti unari follow gamma close oper ariti lower essenti unari cspgamma must npcomplet corollari 2 establish npcomplet mani set constraint without need individu construct adhoc reduct argument follow exampl illustr exampl 15 consid relat r 1 r 2 defin exampl 1 indic problem fr 1 order 1 defin exampl 9 1 solu tion correspond ident oper indic problem fr 1 order 3 3 solut essenti unari henc npcomplet corollari 2 hand shown exampl 10 r 1 close constant oper cspfr 1 g tractabl proposit 9 9 fact problem cspfr 1 g solut assign valu 0 variabl class problem trivial furthermor shown exampl 11 r 2 close oper 4 defin exampl 5 henc cspfr 2 g tractabl theorem 13 9 2 exampl consid relat r 1 defin exampl 1 count solut indic problem order 1 order 3 relat pair distinct relat set abl complet analysi complex cspgamma possibl subset gamma relat relat solut solut complex corollari corollari corollari larger set relat gamma contain least one pair relat shown tabl cspgamma npcompletehow practic test propos gener small valu jdj relev indic problem variabl solut may found easili remain true even ariti relat gamma larg simplest case 2 constraint satisfact problem correspond classic satisfi problem 6 possibl tractabl set relat known fulli describ 15 nontrivi exampl case set boolean relat express horn claus dual horn claus claus contain two liter linear equat twoelement field 15 shown set relat close oper essenti unari belong one tractabl class 8 henc condit describ corollari 2 necessari suffici npcomplet case assum p equal np follow solv indic problem order 1 order 3 provid simpl complet test tractabl set relat set 2 element provid practic answer question pose schaefer 1978 15 concern exist effici test tractabl gener satisfi problem note carri test requir find number solut constraint satisfact problem 8 boolean variabl size increas size relev indic problem increas rapidli may becom impract comput solut even calcul number solut requir corollari 2 hand case interest may possibl establish known properti constraint relev indic problem particular type solu tion without carri complet solut algorithm question current investig 6 conclus paper shown algebra properti relat use determin express power set possibl constraint type furthermor propos method determin algebra properti solv particular form constraint satisfact problem call indic problem final shown simpl algebra properti distinguish set relat give rise tractabl constraint satisfact problem give rise npcomplet problem use result obtain suffici condit npcomplet shown wide applic easi test problem set possibl valu contain two element result provid necessari suffici condit npcomplet assum p equal np effici test distinguish tractabl set relat investig applic result particular problem type tempor problem involv subset interv algebra also attempt determin presenc particular algebra closur properti constraint may use deriv appropri effici algorithm tractabl problem class acknowledg grate victor dalmau help discuss greatli simplifi proof theorem 2 note 1 sinc finit henc finit mani possibl r ariti may assum without loss gener instanc contain finit number constraint 2 also call implic relat 11 r constraint satisfact deduct viewpoint relat model data larg share databank character tractabl constraint structur identif relat data suffici condit backtrackbound search comput intract guid npcomplet decompos constraint satisfact problem use databas techniqu algebra character tractabl constraint unifi framework tractabl constraint tractabl constraint order domain fast parallel constraint satisfact binari constraint problem consist network relat network constraint fundament properti applic pictur process complex satisfi problem clone univers algebra minim decompos rowconvex constraint net work gener arcconsist algorithm special tr ctr peter jeavon david cohen justin pearson constraint univers algebra annal mathemat artifici intellig v24 n14 p5167 1998 lane hemaspaandra sigact news complex theori column 43 acm sigact news v35 n1 march 2004 richard gault peter jeavon implement test tractabl constraint v9 n2 p139160 april 2004 peter jonsson andrei krokhin recogn frozen variabl constraint satisfact problem theoret comput scienc v329 n13 p93113 13 decemb 2004 david cohen martin c cooper peter g jeavon andrei krokhin complex soft constraint satisfact artifici intellig v170 n11 p9831016 august 2006