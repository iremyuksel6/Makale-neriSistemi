router architectur realtim commun multicomput network abstractparallel machin potenti satisfi larg comput demand realtim applic applic requir predict commun network timeconstrain traffic requir bound throughput latenc good averag perform suffic besteffort packet paper present new router architectur tailor lowlevel rout switch arbitr flowcontrol deadlockavoid polici conflict demand traffic class router implement bandwidth regul deadlinebas schedul packet switch tabledriven multicast rout bound endtoend delay buffer requir timeconstrain traffic allow besteffort traffic capit lowlat rout switch scheme common modern parallel machin limit cost servic timeconstrain traffic router includ novel packet schedul share linkschedul logic across multipl output port mask effect clock rollov represent packet elig time deadlin use verilog hardwar descript languag epoch silicon compil demonstr router design meet perform goal traffic class singlechip solut verilog simul experi detail time model chip show implement perform properti packet schedul scale rang architectur paramet b introduct realtim applic avion industri process control autom manufactur impos strict time requir underli comput system applic grow size complex parallel process play import role satisfi larg comput demand realtim parallel comput hing effect polici place schedul commun task system ensur critic oper complet deadlin ultim parallel distribut realtim system reli interconnect network provid throughput delay guarante critic commun cooper task commun may divers perform requir depend applic 1 howev instead guarante bound worstcas commun latenc exist multicomput network design focu provid good averag network throughput work report paper support part nation scienc foundat grant mip9203895 offic naval research grant n000149410229 opinion find conclus recommend express paper author necessarili reflect view nsf onr j rexford att lab research florham park new jersey j hall k g shin univers michigan ann arbor michigan packet delay consequ recent year seen increas interest develop interconnect network provid perform guarante parallel machin 28 realtim system employ varieti network architec ture depend applic domain perform requir although priorit bu ring network commonli use smallscal realtim system 9 larger applic benefit higher bandwidth avail multihop topolog addit multihop network often sever disjoint rout pair process node improv ap plicat resili link node failur howev network complic effort guarante endto end perform sinc system must bound delay link packet rout deliv predict commun perform multihop network present novel router architectur support endtoend delay throughput guarante schedul packet network link prototyp implement gear toward twodimension mesh shown figur 1 topolog wide use interconnect network varieti commerci parallel machin design directli extend broad set topolog includ class kari ncube network chang rout besteffort traffic propos architectur appli arbitrari pointtopoint topolog commun predict improv assign prioriti timeconstrain traffic packet experienc larg delay earlier rout 10 ultim though bound worstcas commun latenc requir prior reserv link buffer resourc base applic anticip traffic load traffic contract network provid endtoend perform guarante effect linkschedul bufferalloc polici handl wide rang bandwidth delay requir realtim router implement realtim channel 11 13 abstract packet schedul describ section ii conceptu realtim channel unidirect virtual connect two process node sourc traffic specif endtoend delay bound separ paramet bandwidth delay permit model accommod wider rang larger number connect servic disciplin 14 16 expens increas implement complex realtim channel model guarante endtoend perform combin bandwidth regul deadlinebas schedul link implement packet schedul softwar would impos signific burden process resourc node router tofrom processor fig 1 router mesh network figur show router 4 theta 4 squar mesh process node commun anoth node processor inject packet router packet travers one link reach recept port router destin node would prove slow serv multipl highspe link softwar would rank packet deadlin outgo link addit schedul execut applic task highspe link tight time constraint realtim parallel machin requir hardwar support commun schedul effici lowcost solut requir design integr runtim schedul packet transmiss henc present chiplevel router design handl bandwidth regul deadlinebas schedul releg nonrealtim oper admiss control rout se lection network protocol softwar although deadlinebas schedul bound worstcas latenc timeconstrain traffic realtim applic also includ besteffort packet stringent perform requir 10 11 15 17 ex ampl good averag delay may suffic statu monitor inform well protocol establish realtim channel besteffort traffic abl capit lowlat commun techniqu avail modern parallel machin without jeopard perform guarante timeconstrain pack et section iii describ design tailor network rout switch arbitr flowcontrol deadlock avoid polici conflict perform requir two traffic class timeconstrain traffic employ packet switch small fixeds packet bound worstcas perform besteffort packet employ wormhol switch 18 reduc averag latenc minim buffer space requir even larg packet router implement deadlockfre dimens order rout besteffort packet permit protocol softwar select arbitrari multicast rout timeconstrain traffic togeth flexibl rout multicast packet forward provid effici group commun cooper realtim task section iv describ network reserv buffer link resourc establish timeconstrain connec tion addit manag packet memori connect data structur realtim router effect handl effect clock rollov comput schedul packet router overlap commun schedul packet transmiss maxim util network link reduc hardwar complex iti architectur share packet buffer sort logic amongst router multipl output link discuss section v hybrid serial parallel comparison oper enabl schedul trade space time reduc implement complex section vi describ router implement use verilog hardwar descript languag epoch silicon compil epoch implement demonstr router satisfi perform goal traffic class afford singlechip solut verilog simul experi detail time model chip show correct design investig scale properti packet schedul across rang architectur paramet section vii discuss relat work realtim multicomput network section viii conclud paper summari research contribut futur direct ii realtim channel realtim commun requir advanc reserv bandwidth buffer resourc coupl runtim schedul network link realtim channel model 11 provid use abstract bound end toend network delay certain applic traffic characterist traffic paramet realtim channel unidirect virtual connect travers one network link realtim system applic task exchang messag period nearli period ba si result realtim channel model character connect minimum space messag result maximum transfer rate smax min byte per unit time permit variat pure period traffic connect gener burst bmax messag excess period restrict min togeth three paramet form linear bound arriv process 19 govern connect traffic gener sourc node endtoend delay bound addit traffic pa ramet connect bound endtoend messag delay base minimum messag space min sourc node messag gener time logic arriv time ae base perform guarante logic arriv time realtim channel model limit influenc illbehav malici connect traffic network runtim link schedul guarante messag reach destin node deadlin perhop delay bound network admit new connect unless reserv suffici buffer bandwidth resourc without violat requir traffic data structur queue 1 ontim timeconstrain traffic prioriti queue deadlin md queue 2 besteffort traffic firstinfirstout queue queue 3 earli timeconstrain traffic prioriti queue logic arriv time realtim channel schedul model realtim channel model link transmit traffic three schedul queue provid delay guarante timeconstrain connect link give prioriti ontim timeconstrain messag queue 1 besteffort traffic queue 2 queue 3 serv stage area hold earli timeconstrain messag exist connect 11 20 connect establish procedur decompos connect endtoend delay bound local delay bound j hop rout j min base local delay bound messag logic arriv time node j rout j 0 correspond sourc node link schedul ensur messag arriv node j later time local deadlin node j gamma1 fact messag may reach node earlier due variat delay previou hop rout schedul node j ensur earli arriv interfer transmiss ontim messag connect runtim link schedul link schedul timeconstrain traffic base logic arriv time dead line order bound messag delay without exceed reserv buffer space intermedi node sched uler employ multiclass variat earliest duedat algorithm 21 give highest prioriti timeconstrain messag reach logic arriv time ie j transmit messag smallest deadlin j shown tabl queue 1 empti link servic besteffort traffic queue 2 ahead earli timeconstrain messag improv averag perform besteffort traffic without violat delay requir timeconstrain commun queue 3 hold earli timeconstrain traffic effect absorb variat delay previou node upon reach logic arriv time messag move queue 3 queue 1 link horizon paramet delay transmiss earli timeconstrain messag link schedul avoid overload buffer space downstream node 11 15 16 still schedul could potenti improv link util averag latenc transmit earli messag queue 3 two schedul queue empti balanc tradeoff buffer requir averag perform link transmit earli timeconstrain messag queue 3 long messag within small horizon h 0 logic arriv time ie j valu h permit link transmit earli timeconstrain traffic expens increas memori requir downstream node although connect could conceiv h valu employ singl horizon paramet allow link transmit earli traffic directli head queue 3 without perconnect data structur buffer requir avoid buffer overflow messag loss connect must reserv suffici memori store traffic node rout requir buffer space node j depend connect local delay bound j well horizon paramet h j gamma1 incom link particular node j receiv messag node j gamma 1 earli j transmit messag earliest possibl time worst case node j hold messag deadlin j henc connect messag store node j time connect messag arriv earli possibl depart late possibl node could store mani min messag connect time reserv buffer bandwidth resourc advanc realtim channel model guarante everi messag arriv destin node deadlin independ besteffort timeconstrain traffic network iii mix besteffort timeconstrain traffic although realtim channel model bound worstcas perform timeconstrain messag schedul model tabl impos undu restrict packet size flowcontrol scheme besteffort traffic overcom limit propos router architectur tailor lowlevel commun polici uniqu demand two traffic class fine grain prioritybas arbitr network link permit besteffort traffic capit lowlat techniqu modern multicomput network without sacrif perform guarante timeconstrain connect figur 2 show highlevel architectur realtim router separ control data path two traffic class incom link address recept inject control packet schedul logic new address memori packet outgo link free tabl connect besteffort data connect id address timeconstrain besteffort timeconstrain fig 2 realtim router figur show realtim router architectur separ control data path besteffort timeconstrain packet router includ packet memori connect rout tabl schedul logic support delay bandwidth guarante timeconstrain traffic connect local processor router export control interfac recept port separ inject port traffic class complementari switch scheme ensur timeconstrain connect meet delay requir router must control bandwidth memori alloc exampl suppos timeconstrain messag arriv tight deadlin ie outgo link busi transmit traffic satisfi tight time requir outgo link must stop servic lowerprior messag within small bound amount time introduc direct relationship connect admiss maximum packet size timeconstrain besteffort traffic share link realtim system timeconstrain commun consist 1020 byte exchang command statu inform 9 consequ realtim router restrict timeconstrain traffic small fixeds packet support distribut memori read write oper bound link access latenc buffer delay simplifi memori alloc router ensur predict consumpt link buffer sourc timeconstrain traffic employ storeandforward packet switch buffer packet node packet switch allow router independ schedul packet transmiss satisfi perhop delay requir improv averag perform timeconstrain traffic could conceiv employ virtual cutthrough switch 22 allow incom packet proceed directli idl outgo link howev contrast tradit virtual cutthrough switch best effort traf fic realtim router forward timeconstrain packet without first assess logic arriv time ensur downstream router suffici buffer space packet comput packet deadlin serv logic arriv time downstream router avoid extra complex head initi design realtim router implement storeandforward packet switch worstcas perform guarante virtual cutthrough switch futur implement could employ virtual cutthrough switch reduc averag latenc timeconstrain traffic although packet switch deliv good predict perform small timeconstrain packet approach would significantli degrad averag latenc long besteffort packet even lightlyload network endtoend latenc packet switch proport product packet size length rout instead besteffort traffic employ wormhol switch 18 lower latenc reduc buffer space requir ment similar virtual cutthrough switch wormhol switch permit arriv packet proceed directli next node rout howev outgo link avail packet stall network instead buffer entir within router effect wormhol switch convert besteffort schedul queue tabl logic queue span multipl node router simpli includ small fivebyt flit flow control unit buffer 23 hold byte packet input link incom packet fill buffer internod flow control halt transmiss previou node space avail fivebyt chunk proce buffer outgo link router transmit acknowledg 1virtual channel id data byte strobeen flit acknowledg fig 3 link encod realtim router link transmit byte data along strobe signal virtual channel identifi revers direct acknowledg bit indic router store anoth flit besteffort virtual channel x offset offset length data byte connect id data byte 18 besteffort packet b timeconstrain packet fig 4 packet format figur illustr packet format besteffort timeconstrain packet realtim router besteffort packet consist twobyt rout header onebyt length field along variablelength data timeconstrain packet 20 byte long includ connect identifi deadlin previou hop rout serv logic arriv time current router ment bit signal upstream router start send next flit finegrain perhop flow control permit besteffort traffic use larg variables packet reduc even avoid packet overhead without increas buffer complex router combin wormhol packet switch besteffort traffic consum small flit buffer timeconstrain connect reserv packet buffer result effect partit router resourc b separ logic resourc even though wormhol packet switch exercis complementari buffer resourc besteffort timeconstrain traffic still share access network link provid tight delay guarante timeconstrain connect router must bound time variables wormhol packet stall forward progress ontim timeconstrain traffic ever block wormhol packet hold link resourc chain consecut router network indirectli delay advanc traffic even use link complic effort provis network bound worstcas endtoend latenc discuss treatment relat work section vii order control interact two traffic class realtim router divid link two virtual channel 23 singl bit link differenti timeconstrain besteffort packet shown figur 3 link also includ acknowledg bit flow control besteffort virtual channel wormhol virtual channel perform roundrobin arbitr input link select incom besteffort packet servic packetswitch virtual channel transmit timeconstrain packet base deadlin logic arriv time prioriti arbitr two virtual channel tightli regul intrus besteffort traffic timeconstrain packet outgo link effect provid flitlevel preemption besteffort traffic whenev ontim timeconstrain packet await servic permit wormhol flit consum excess link bandwidth separ simul studi demonstr effect use flitlevel prioriti arbitr polici mix besteffort wormhol traffic timeconstrain packetswitch traffic 2426 realtim router give preferenti treatment timeconstrain traffic outgo link transmit besteffort flit ahead earli timeconstrain packet consist polici tabl although arbitr mechan ensur effect schedul traffic outgo link recept port besteffort timeconstrain packet could still contend resourc inject port sourc node local processor could solv problem negoti besteffort timeconstrain traffic inject port would requir processor perform flitlevel arbitr instead realtim router includ dedic inject port traffic class two inject port coupl lowlevel arbitr outgo link ensur timeconstrain traffic finegrain preemption besteffort packet across entir path network allow besteffort packet capit remain link bandwidth c buffer packet forward support multipl incom outgo port realtim router design requir high throughput ceiv store transmit packet intern router isol besteffort timeconstrain traffic separ buse increas throughput reduc complex arbitr logic incom outgo port includ nomin buffer space avoid stall flow data wait access bu besteffort bu one flit wide perform roundrobin arbitr among flit buffer incom port run speed bytewid input port fivebyt bu suffici throughput accommod peak load besteffort traffic transfer besteffort packet fivebyt chunk incur small initi transmiss delay router could reduc use crossbar switch howev employ share bu sake simplic recent multicomput router architectur use wide bu flit transfer 27 28 structur placement packet buffer play larg role router abil accommod perform requir timeconstrain connect simplest solut place separ queue input link howev input queu throughput limit 29 sinc packet may wait behind traffic destin differ outgo link addit queu packet incom link complic effort schedul outgo traffic base delay throughput requir instead realtim router queue timeconstrain packet output port router share singl packet memori among multipl output port maxim network abil accommod timeconstrain connect divers buffer requir accommod aggreg memori bandwidth five input five output port router store packet 10byte chunk demanddriven roundrobin arbitr amongst port sinc timeconstrain traffic serv firstin firstout order realtim router must data structur record idl memori locat packet buffer similar mani sharedmemori switch highspe network realtim router maintain idleaddress pool 29 implement stack stack consist small memori store address free locat packet buffer pointer first entri initi stack includ address locat packet memori incom packet retriev address top stack increment stack pointer point next avail entri upon packet departur router decrement pointer return free locat top stack idl address stack alway least one free address new packet arriv sinc realtim channel model never permit timeconstrain traffic overalloc buffer resourc rout deadlockavoid although wormhol switch reduc buffer requir averag latenc besteffort traffic lowlevel internod flow control could potenti introduc cyclic depend stall besteffort packet avoid cycl realtim router implement dimensionord rout shortestpath scheme complet rout packet xdirect proceed ydirect destin shown shade node figur 1 dimensionord rout avoid packet deadlock squar mesh 30 also facilit effici implement base x offset packet header shown figur 4a offset reach zero packet arriv destin node improv perform besteffort traffic enhanc version router could support adapt wormhol rout addit virtual channel expens increas implement complex 31 32 particular nonminim adapt rout would enabl besteffort packet circumv link heavi load timeconstrain traffic although rout close tie deadlockavoid besteffort packet realtim router need dictat particular rout scheme timeconstrain traf fic instead timeconstrain connect fix path network base tabl router tabl index connect identifi field header timeconstrain packet shown figur 4b part establish realtim channel network protocol softwar select fix path sourc destin base avail bandwidth buffer resourc router protocol softwar employ varieti algorithm select unicast multicast rout base resourc avail network 33 connect establish protocol reserv buffer bandwidth resourc realtim channel combin bandwidth regul packet schedul prevent packet deadlock timeconstrain traffic tabl ii summar realtim router employ polici accommod conflict perform requir two traffic class iv manag timeconstrain connect realtim multicomput network must effect mechan establish connect schedul packet base delay throughput requir timeconstrain traffic permit singlechip im plement realtim router offload nonrealtim oper rout select admiss control network protocol softwar runtim router coordin access buffer link resourc manag packet memori connect data struc ture addit router architectur introduc effici techniqu bound rang logic arriv time deadlin limit schedul delay implement complex rout select admiss control establish realtim channel requir applic specifi traffic paramet perform requir new connect admit new con nection select multihop rout suitabl local delay paramet computationallyintens procedur 10 11 20 fortun channel establish typic impos tight time constraint contrast actual data transfer requir explicit guarante minimumthroughput worstcas delay fact case network establish requir timeconstrain connect applic commenc permit singlechip solut realtim router releg nonrealtim oper protocol soft ware network could select rout admit new connect central server distribut pro tocol either case protocol softwar use besteffort virtual network even set dedic timeconstrain connect exchang inform select rout provis resourc new connect rout select connect depend traffic characterist perform requir well avail buffer bandwidth resourc net work part establish new realtim channel protocol softwar assign uniqu connect identifi hop rout node rout write timeconstrain besteffort switch packet switch wormhol switch packet size small fix size variabl length link arbitr deadlinedriven roundrobin input link rout tabledriven multicast dimensionord unicast buffer share output queue flit buffer input link flow control ratebas flit acknowledg ii architectur paramet tabl summar realtim router support conflict perform requir timeconstrain besteffort traffic write command field connect paramet outgo connect id local delay bound bitmask output port incom connect id horizon paramet bitmask output port horizon valu h iii control interfac command tabl summar control command use configur realtim router control inform router connect tabl shown tabl iii runtim tabl index connect identifi field incom timeconstrain packet shown figur 4b minim number pin router chip control processor updat tabl sequenc four onebyt oper specifi incom connect identifi three field tabl close connect network protocol softwar reus connect identifi overwrit entri rout tabl processor use control interfac set horizon paramet h five outgo port shown tabl iii rout tabl store con nection identifi next node local delay bound bit mask direct traffic appropri outgo port packet arriv router index tabl incom connect identifi replac header field new identifi downstream router time router comput packet deadlin logic arriv time packet header local delay bound connect ta ble final bit mask permit router forward incom packet multipl outgo port allow network protocol softwar establish multicast realtim channel facilit effici time commun set cooper node simplifi design realtim router requir multicast connect use valu outgo port singl node base bit mask rout tabl router queue updat packet transmiss appropri outgo port implement share packet memori realtim router store singl copi multicast packet remov packet transmit output port select bit mask share packet memori also permit network protocol softwar employ wide varieti buffer alloc polici one extrem rout select admiss control protocol could alloc packet buffer new connec tion independ outgo link howev could allow singl link consum bulk memori loca tion reduc chanc establish timeconstrain connect outgo link instead admiss control protocol bound amount buffer space avail five outgo port simi larli network could limit size link horizon paramet h reduc amount memori requir connect particular runtim higherlevel protocol could reduc h valu router incom link node suffici buffer space admit new connect b handl clock finit rang packet deadlin one node serv logic arriv time downstream node rout carri logic arriv time packet header shown figur 4b implicitli assum network router common notion time within bound clock skew although appropri widearea network context tight coupl parallel machin minim effect clock skew altern router could store addit inform connect tabl comput j packet actual arriv time logic arriv time connect previou packet 34 howev approach would requir router period refresh connect state correctli handl effect clock rollov instead realtim router avoid overhead capit tight coupl node assum synchron clock even synchron clock realtim router complet ignor effect clock rollov schedul timeconstrain traffic router architectur includ realtim clock implement counter increment per packet transmiss time practic implement router must limit number bit b use repres logic arriv time deadlin timeconstrain packet sinc logic arriv time continu increas design must use modulo arithmet comput packet deadlin schedul traffic transmiss result network must restrict logic arriv time exist router time otherwis router correctli distinguish differ packet await access outgo link select valu b introduc fundament tradeoff connect admiss schedul complex iti select packet transmiss schedul must compar deadlin logic arriv time timeconstrain packet exampl data structur tabl requir comparison oper enqueuedequeu packet larger valu b would increas hardwar cost latenc perform packet comparison oper howev smaller valu b would restrict network abil select larg delay bound horizon paramet h timeconstrain connect network protocol softwar limit delay horizon paramet base valu b impos router implement altern implement router design could select valu b base typic requir expect realtim applic formal tradeoff complex ad missibl consid connect travers consecut link local delay paramet j gamma1 j respect link discuss section ii packet arriv much unit ahead logic arriv time j depart late deadlin j consequ messag connect time network must ensur router differenti full rang logic arriv time set router correctli interpret logic arriv time deadlin even presenc clock rollov long everi connect valu less half rang onchip clock router requir j connect share link restrict router compar packet base logic arriv time deadlin use modulo arithmet exampl suppos ie clock rang 256 time unit connect configur correspond figur 5 earli packet logic arriv time 240 346 modulo 256 exampl packet m80 would consid earli traffic sinc similarli ontim packet logic arriv time 200 240 exampl packet would consid ontim traffic sinc deadlin henc deadlin also fall within necessari rang figur 5 allow router comput j rang packet logic arriv times128 fig 5 handl clock rollov figur illustr effect clock rollov 8bit clock current time 240mod 256 exampl connect satisfi ensur router correctli compar distinguish ontim earli packet compar ontim packet base deadlin v schedul timeconstrain packet satisfi connect delay throughput buffer requir outgo port must schedul timeconstrain packet base logic arriv time deadlin well horizon paramet realtim router reduc implement complex share singl schedul amongst earli ontim traffic five output port extens schedul architectur reduc implement cost trade space time integr earli ontim packet maxim link util channel admiss outgo port overlap packet schedul oper packet transmiss result packet size determin accept worstcas schedul de lay schedul timeconstrain traffic base delay throughput paramet typic requir prioriti queue rank outgo packet prioriti queue architectur introduc consider hardwar complex 3539 particularli link must handl wide rang packet prioriti deadlin exampl highspe solut requir hardwar complex rank n packet use systol array shift regist consist n compar 35 40 41 addit technic challeng aris tri integr packet schedul bandwidth regul 42 sinc link transmit packet unless reach logic arriv time perform bandwidth regul deadlinebas schedul realtim router could includ two prioriti queue five outgo port suggest tabl howev approach would extrem expens would requir addit logic transfer packet earli queue ontim queue particularli complic multipl packet reach elig time simultan worst case outgo port could dequeu packet queue 1 queue 3 enqueu sever arriv packet queue 1 adder logic l bit mask l l l adder logic ontim enabl inelig elig check mask select port compar horizon paramet fig 6 compar tree schedul figur show schedul architectur realtim router leaf node base compar tree store small amount perpacket state inform ontim fig 7 schedul key figur illustr realtim router assign key timeconstrain packet await transmiss outgo port singl bit differenti ontim earli packet inelig traffic refer packet destin port andor queue 3 move larg number packet queue 3 queue 1 singl packet transmiss time avoid complex realtim router attempt store timeconstrain packet sort order instead router select packet smallest key via compar tree shown figur 6 like systol shift regist approach tree architectur introduc hardwar complex moder size n singlechip router compar tree overlap olgn stage delay packet transmiss avoid excess complex realtim router integr earli ontim packet singl data structur link schedul timeconstrain packet base sort key shown figur 7 smaller higher prioriti singl bit differenti earli ontim packet ontim traffic lower bit key repres packet laxiti time remain till local deadlin expir wherea key earli traffic repres time left reach packet logic arriv time packet key normal ize rel current time allow schedul perform simpl unsign comparison oper even presenc clock rollov schedul oper oper independ locat packet minimum sort key permit dynam chang valu key base tree comput key packet base packet state current time shown right side figur 6 base tree store perpacket state inform wherea packet memori store actual packet content b share schedul across output port use compar tree instead tri store packet sort order router allow five outgo port share access schedul logic sinc tree store packet key shown figur 6 leaf tree store logic arriv time deadlin md bit mask outgo port assign packet arriv base connect state bit mask determin leaf elig compet access particular outgo port port transmit select packet clear correspond field leaf bit mask bit mask zero indic empti packet leaf slot correspond idl slot packet memori base tree also determin packet earli ontim comput sort key base current valu top sort tree addit compar check see winner earli packet fall within port horizon paramet port transmit packet unless besteffort flit await servic still share compar logic schedul must oper quickli enough overlap runtim schedul packet transmiss outgo port cons quentli realtim router pipelin access compar tree p stage pipelin schedul row latch tree store sort key buffer locat win packet subtre everi cycl anoth link begin schedul oper base tree similarli everi horizon paramet level packet fig 8 logic share figur illustr schedul trade space time share compar logic amongst group k packet cycl anoth link complet schedul oper initi packet transmiss result router stagger packet departur five outgo port necessari amount pipelin depend latenc compar tree rel packet transmiss delay c balanc hardwar complex schedul latenc pipelin compar tree rel low hardwar cost compar altern approach implement separ prioriti queue earli ontim packet outgo port howev shown section vi schedul logic still main sourc complex realtim router architectur handl n packet schedul figur 6 total 2 lg n stage logic includ oper base tree well compar horizon paramet term implement cost tree requir n compar n leaf node total 2n element similar complex n grow number leaf node signific influenc bu load base tree fortun certain valu n compar tree low enough latenc avoid need fulli pipelin schedul logic suggest schedul could reduc number compar trade space time approach schedul combin sever leaf unit singl modul small memori eg regist file store deadlin logic arriv time k packet shown figur 8 base tree nk modul sequenti compar k sort key use singl compar select packet minimum incur k stage delay smaller compar tree find smallest key amongst nk packet result schedul incur stage delay note architectur reduc compar tree figur 6 2 stage logic larger valu k schedul larger arbitr delay reduc implement com plexiti architectur figur 8 2nk compara tor well lighter bu load nk element base tree addit larger valu k allow base tree consist nk kelement regist file instead n individu regist reduct chip complex care select n k realtim router effici singlechip implement perform bandwidth regul deadlinebas schedul multipl outgo port vi perform evalu demonstr feasibl realtim router studi scale properti prototyp chip design use verilog hardwar descript languag epoch silicon compil cascad design au tomat framework facilit detail evalu implement perform properti architectur epoch tool compil structur behavior verilog model gener chip layout annot verilog model time simul tool permit extens test perform evalu without expens chip fabric router complex use threemet 05m cmo process 123pin chip dimens 81 mm theta 87 mm implement 256 timeconstrain packet 256 connect shown tabl iv schedul logic account major chip area packet memori consum much remain space shown tabl v oper 50 mhz chip transmit receiv byte data ten port everi 20 nsec close match access time 10bytewid singleport sram store timeconstrain traffic memori access latenc bottleneck realiz router sinc timeconstrain packet 20byte long schedul logic must select packet transmiss everi 400 nsec five output port match memori link throughput compar tree consist twostag pipelin stage requir approxim 50 nsec although tree could incorpor five pipelin stage twostag design provid suffici throughput satisfi output port suggest link schedul could effect support larger number packet addit output port higherdimension mesh topolog altern router design could reduc hardwar cost compar tree share compar logic multipl leav tree paramet valu connect 256 timeconstrain packet 256 sort compar tree pipelin 2 stage flit input buffer 10 byte architectur paramet paramet valu process 05m 3metal cmo signal pin 123 transistor 905 104 area 81 mm theta 87 mm power 23 watt b chip complex iv router specif tabl summar architectur paramet chip complex prototyp implement realtim router unit area transistor packet schedul 3402 mm 2 555025 memori control 597 mm 2 268161 connect tabl 065 mm 2 20966 idleaddress pool 035 mm 2 15600 router compon tabl summar area contribut transistor count main compon router discuss section vc figur 9 highlight costperform tradeoff logic share base epoch implement verilog simul experi k increas schedul complex decreas term area transistor count power dissip reason increas schedul latenc result start group size k 4 sinc epoch librari support static ram compon fewer four line 1 graph plot result router implement tabl v use flipflop store packet state base tree epoch silicon compil gener better autom layout flipflop small sram result better area statist tabl v despit larger transistor count manual layout would significantli improv area statist still area graph show rel improv larger valu k plot help guid tradeoff hardwar complex schedul latenc router impl mentat exampl group size k 4 reduc number transistor 45 555 025 306 829 number transistor decreas factor four sinc smaller schedul still store state inform packet addit schedul requir addit logic regist serial access share compar still logic share significantli reduc implement complex larger valu k reduc number compar improv densiti memori base tree schedul latenc grow significantli small valu k 4 delay compar tree increas 67 0115 sec 0192 sec lower bu load base tree help counteract increas latenc serial access first layer compar significantli reduc power dissip b simul experi sinc verilog simul full chip extrem memori cpu intens focu modest set time experi aim mainli test correct design preliminari experi test baselin perform besteffort wormhol packet studi multihop configur router connect link x direct packet proce inject port posit x link travel neg x input link posit direct reenter router neg link packet proce recept port test b byte wormhol packet incur endtoend latenc link transmit one byte cycl delay proport packet length small overhead synchron arriv byte process packet header accumul fivebyt chunk access router intern bu contrast packet switch would introduc addit delay buffer packet hop rout addit experi illustr router schedul timeconstrain packet satisfi delay throughput guarante allow besteffort traffic capit excess link bandwidth figur 10 plot link bandwidth consum besteffort traffic three timeconstrain connect follow paramet unit 20byte slot min three connect compet access singl network link horizon paramet h 0 connect continu backlog traffic timeconstrain connect receiv servic proport throughput requir sinc packet elig servic k group size100000300000500000numb transistor number transistor area squar millimet area tree microsecond schedul latenc milliwatt power dissip fig 9 evalu logic share plot compar differ implement compar tree differ group size k k grow implement complex decreas schedul latenc increas till logic arriv time similarli link transmit packet deadlin besteffort flit consum remain link bandwidth vii relat work paper complement recent work support realtim commun parallel machin 27 sever project propos mechan improv predict wormholeswitch network common modern multicomput absenc hardwar support prioritybas schedul applic oper system softwar control endtoend perform regul rate packet inject sourc node 7 howev approach must limit util commun network account possibl content packet even lowerprior traffic particularli import issu wormhol network sinc stall packet may indirectli block advanc traffic even use link underli router architectur improv predict favor older packet assign virtual channel arbitr channel physic link 23 although mechan reduc variabl endto time clock cycles100300500 connect servic byte besteffort connect 2 connect 1 connect 0 fig 10 time experi experi evalu mixtur timeconstrain besteffort packet compet access singl outgo link horizon schedul satisfi deadlin timeconstrain packet permit besteffort flit capit addit bandwidth latenc aggress techniqu necessari guarante perform high network util router support multipl class traffic user system packet partit traffic onto differ virtual channel prioritybas arbitr access network link 23 flitlevel preemption lowprior virtual channel significantli reduc intrus highprior packet still coarsegrain prioriti differenti packet differ latenc toler addit virtual channel network greater flexibl assign packet prioriti perhap base endtoend delay requir restrict access virtual channel reserv higherprior traffic 4 5 coupl restrict sourc inject rate polici bound endtoend packet latenc limit servic block time higherprior traffic 3 although assign prioriti virtual channel provid control packet schedul tie prioriti resolut number virtual channel router support finegrain packet prioriti increas number virtual channel expens addit implement complex virtual channel incur cost addit flit buffer larger virtual channel identifi well complex switch arbitr logic 32 instead dedic virtual channel flit buffer prioriti level router increas prioriti resolut adopt packetswitch design priorityforward router chip 6 follow approach employ 32bit prioriti field small 8 packet prioriti queue input port router incorpor priorityinherit protocol limit effect prioriti invers full input buffer limit transmiss highprior packet previou node input buffer head packet inherit prioriti highestprior packet still wait upstream router contrast realtim router implement singl share output buffer hold 256 timeconstrain packet linkschedul memori reserv model implicitli avoid buffer overflow dynam assign 8bit packet prioriti node realtim router satisfi divers rang endto delay bound permit besteffort wormhol traffic capit excess link bandwidth viii conclus parallel realtim applic impos divers commun requir underli interconnect net work realtim router design support emerg applic bound packet delay timeconstrain traffic ensur good averag perform besteffort traffic lowlevel control rout switch flow control coupl finegrain arbitr network link enabl router effect mix two divers traffic class care handl clock rollov enabl router support connect divers delay throughput paramet small key logic arriv time deadlin share schedul logic packet buffer amongst five output port permit singlechip solut handl 256 timeconstrain packet simultan experi detail time model router chip show design oper 50 mhz appropri pipelin schedul logic experi show design trade space time reduc complex packet schedul ongo research consid altern link schedul algorithm would improv router scal abil context investig effici hardwar architectur integr bandwidth regul packet schedul 42 algorithm includ approxim schedul scheme balanc tradeoff accuraci complex allow router effici handl larger number timeconstrain pack et also explor use realtim router build block construct larg highspe switch support qualityofservic requir realtim multimedia applic router delay throughput guarante timeconstrain traffic combin good besteffort perform singlechip implement effici support wide rang modern realtim applic particularli context tightlycoupl local area network r client requir realtim commun servic architectur support realtim system issu tradeoff use rate monoton schedul technolog realtim commun wormhol network prioriti base realtim commun larg scale wormhol network simul realtim parallel process architec ture design implement prioriti forward router chip realtim interconnect network realtim commun schedul massiv parallel processor provid messag deliveri guarante pipelin flitbuff multiprocessor network smart network control realtim commun packetswitch network realtim commun multihop network delay jitter control realtim commun packet switch network scheme realtim channel establish widearea network ratecontrol servic disciplin provid endtoend perform guarante use nonworkconserv disciplin effi cient network qo provis base per node traffic shap ing integr metanet architectur switchbas multimedia lan parallel comput realtim traffic toru rout chip calculu network delay part network element isol abil establish realtim channel pointtopoint packetswitch network schedul algorithm multiprogram hard realtim environ virtual new comput commun switch techniqu virtualchannel flow control hardwar support control interact guarante besteffort communi cation support multipl class traffic multicomput router ppmesssim flexibl extens simul evalu multicomput network bandwidth requir wormhol switch simpl effici design sp2 highperform switch fast packet switch architectur broadband integr servic digit network deadlockfre messag rout multiprocessor interconnect network survey wormhol rout techniqu direct network cost adapt virtual lane wormhol router rout subject qualiti servic constraint integr commun network realtim commun atm novel architectur queue manag atm network vlsi prioriti packet queue inherit overwrit exact admiss control network bound delay servic hardwareeffici fair queue architectur highspe network scalabl hardwar prioriti queue architectur highspe packet switch vlsi sequenc chip atm traffic shaper queue manag systol prioriti queue scalabl architectur integr traffic shape link schedul highspe atm switch tr ctr david whelihan herman schmit memori optim singl chip network switch fabric proceed 39th confer design autom june 1014 2002 new orlean louisiana usa sungwhan moon kang g shin jennif rexford scalabl hardwar prioriti queue architectur highspe packet switch ieee transact comput v49 n11 p12151227 novemb 2000 g campobello g patan russo hardwar multiconnect network case studi inform sciencesinformat comput scienc intern journal v158 n1 p173188 januari 2004 evgeni bolotin israel cidon ran ginosar avinoam kolodni qnoc qo architectur design process network chip journal system architectur euromicro journal v50 n23 p105128 februari 2004 evgeni bolotin israel cidon ran ginosar avinoam kolodni cost consider network chip integr vlsi journal v38 n1 p1942 octob 2004 kee goossen john dielissen jef van meerbergen peter poplavko andrei rdulescu edwin rijpkema erwin waterland paul wielag guarante qualiti servic network chip network chip kluwer academ publish hingham