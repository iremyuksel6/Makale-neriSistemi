design perform conflictavoid cach high perform architectur depend heavili effici multilevel memori hierarchi minim cost access data depend increas expect increas rel distanc main memori number publish propos cach conflictavoid scheme investig design perform conflictavoid cach architectur base polynomi modulu function earlier research shown highli effect reduc conflict miss ratio examin number practic implement issu present experiment evid support claim pseudorandomli index cach effect perform term practic implement viewpoint b introduct current project next 10 year could see cpu clock frequenc increas factor twenti wherea dram rowaddressstrob delay project decreas factor two potenti tenfold increas distanc main memori seriou implic design futur cachebas memori hierarchi well architectur memori devic mani option architect consid battl memori latenc partit two broad categori latenc reduct latenc hide latenc departa darquitectura de computador universitat politcnica de catalunya c jordi girona 13 08034 barcelona spain emailantonio josegacupc depart comput scienc univers edinburgh jcmb king build edinburgh uk reduct techniqu reli cach exploit local object reduc latenc individu memori refer latenc hide techniqu exploit parallel overlap memori latenc oper thu hide program critic path paper address issu latenc reduct degre futur cach architectur isol processor increas memori latenc discuss theori evalu practic use particular class conflictavoid index function demonstr cach could construct provid practic solut previous unreport problem well known problem associ unconvent index scheme section 2 present overview caus conflict miss summaris previou techniqu propos minim effect perform propos method cach index demonstr lower miss ratio altern scheme summaris known characterist method section 3 discuss number implement issu effect use novel index scheme processor cycl time present experiment evalu propos index scheme section 4 result show ipc outoford superscalar processor improv use propos index scheme final section 5 draw conclus studi 2 problem cach conflict whenev block main memori brought cach decis must made block set block cach candid store data refer placement polici convent cach typic extract field bit address use select one block set whilst simpl easi implement index function robust princip weak function suscept repetit conflict miss exampl cach capac block size address map cach set condit 1 repetit collis collid cach block address also collid cach integ except two common case happen access stream address collid may conflict miss stream access element two distinct array collid collid way setassoci help allevi conflict howev work set contain conflict cach block set associ elimin conflict follow section propos remedi problem cach conflict defin improv method block placement 21 conflictresist cach placement function object conflictresist placement function avoid repetit conflict defin condit 1 analog find suitabl hash function hash tabl perhap wellknown altern convent cach index skew associ cach 21 involv two index function deriv xore two bit field address produc bit cach index field interleav memori well known bank k conflict reduc use bank select function simpl modulopow oftwo lawri vora propos scheme use primemodulu function 16 harper jump 11 sohi 24 propos skew function use xor function propos frailong et al 5 pseudorandom function propos raghavan hay 17 rau et al 18 19 scheme yield less uniform distribut request bank vari degre theoret predict implement cost principl scheme could use construct conflictresist cach use index function howev consid conflict resist cach architectur two factor critic firstli chosen placement function must logic simpl implement secondli would like abl guarante good behavior regular address pattern even patholog convent placement function respect irreduc polynomi modulu ipoli permut function propos rau 19 ideal candid ipoli scheme effect defin famili pseudorandom hash function implement use exclusiveor gate also use behavior characterist discuss later 10 miss ratio ipoli index scheme evalu extens context cach index compar number differ cach organ includ directmap setassoci victim hashrehash columnassoci skewedassoci result studi suggest ipoli function particularli robust exampl spec95 8kb twoway associ cach averag miss ratio 1384 ipoli cach ident capac associ reduc miss ratio 714 compar well fullyassoci cach miss ratio 680 211 polynomialmodulu cach placement defin gener form conflict resist cach index scheme let placement block data bit address way way associ cach set determin set indic ipoli index given function scheme member set possibl distinct integ valu rang choos use distinct valu cach skew though skew obligatori featur scheme function defin follow consid integ term binari represent exampl similarli consid polynomi defin field gf2 similarli best perform irreduc polynomi though need valu also defin gf2 given order less effect polynomi modulu function ignor higher order term bit index comput use xor tree constant andxor tree one requir configur index function best perform close possibl though may small scheme distinct convent block placement 212 polynomi placement characterist class polynomi hash function describ studi previous context strideinsensit interleav memori see 18 19 function certain p n 1 n 2 0 x n 2 0 1 x 1 0 x 0 r x provabl characterist signific valu context cach indic exampl stride form produc address sequenc free conflict ie condit 1 set section 1 fundament result polynomi index address stride sequenc partit long subsequ number cach block guarante cach conflict within sub sequenc conflict subsequ due capac problem solv larger cach tile iter space strideinsensit ipoli index function seen figur 1 show behavior four cach configur ident except index function capac twoway associ driven address trace repres repeat access vector 64 8byte element element separ stride conflict sequenc would use half 128 set cach experi repeat stride rang determin mani stride exhibit bad behavior index function experi compar three differ index scheme convent modulo powerof2 label a2 function propos 21 skewedassoci cach a2hxsk two ipoli function ipoli scheme simul without skew index function a2hp a2hpsk respect appar ipoli scheme skew display remark abil toler stride equal without patholog behavior scheme major stride yield low miss ratio howev convent skew xor function display patholog behavior miss ratio 50 6 stride 3 implement issu logic polynomi modulu oper gf2 defin class hash function comput cach placement address combin subset address bit use xor gate mean exampl bit 0 cach index may comput exclusiveor bit 0 11 14 19 origin address choic polynomi determin bit includ set implement function cach 8bit index would requir eight xor gate fanin 3 4 whilst appear remark simpl consid placement function firstli function use address bit beyond normal limit impos typic minimum page size restrict secondli use pseudorandom placement multilevel memori hierarchi implic mainten inclus briefli examin two issu show virtualr twolevel cach hierarchi propos wang et al 25 provid clean solut problem 31 overcom page size restrict typic oper system permit page small 8 16 kbyte convent cach place limit firstlevel cach size address translat proceed parallel tag lookup similarli novel cach index scheme use address bit beyond figur 1 frequenc distribut miss ratio convent pseudorandom index scheme column repres ipoli index line repres convent skewedassoci index minimum page size boundari use virtuallyindex physicallytag cach four altern option consid 1 perform address translat prior tag lookup ie physic indic 2 enabl ipoli index data page known larg enough 3 use virtuallyindex virtuallytag level1 cach 4 index convent use polynomi rehash level1 miss option 1 attract exist processor pipelin perform address translat least one stage prior tag lookup might case processor abl hide memori latenc dynam execut multithread exampl howev mani system perform address translat prior tag lookup either extend critic path critic pipelin stage introduc extra cycl untoler latenc via addit pipelin stage option 2 could attract high perform system larg data set larg physic memori norm circumst process may typic data page 256kbyte os abl track page size segment current use process kernel enabl polynomi cach index firstlevel cach segment page size certain threshold provid unmap bit hash function possibl revert convent index possibl exampl threshold 256kbyte cach 8kbyte twoway associ may implement polynomi function hash 13 unmap physic address bit 7 cach index bit suffici produc good conflictfre behavior provid level 1 cach flush index function chang reason index function need remain constant third option current popular primarili potenti difficulti alias virtual address space well difficulti shoot level1 virtual cach line physicallyaddress invalid oper receiv anoth processor twolevel virtualr cach hierarchi propos wang et al 25 provid way implement virtuallytag l1 cach thu expos address bit index function without incur address translat delay fourth option would appropri physicallytag directmap cach similar principl hashrehash 1 columnassoci cach 2 idea make initi probe convent integermodulu index function use unmap address bit probe hit probe differ index time second probe begin full physic address avail use polynomi hash function comput index second probe address coresid convent index function collid first probe convers set address collid convent index function collid second probe neglig probabl due pseudorandom distribut polynomi hash function provid kind pseudoful associ effect directmap cach hit time cach first probe would good directmap physicallyindex cach howev averag hit time lengthen slightli due occasion need second probe investig style cach devis scheme swap cach line convent modulo index locat altern polynomiallyindex locat lead typic probabl around 90 hit detect first probe howev slight increas averag hit time due occasion doubl probe mean columnassoci cach attract miss penalti compar larg space restrict prevent coverag option 32 requir inclus coher cach architectur normal requir properti inclus maintain level memori hierarchi thu repres set data present cach level properti inclus demand level memori hierarchi whenev properti maintain snoop bu protocol need compar address global write oper tag lowest level privat cach line index l2 cach replac line index l1 cach replac data address alreadi present l2 line contain valid data must sure replac data still present l1 conventionallyindex cach issu rel easi guarante data l2 index alway locat l1 index thu ensur l1 replac automat preserv inclus pseudorandomli index cach gener way make guarante instead cach replac protocol must explicitli enforc inclus invalid data l1 requir guarante twolevel virtualr cach lead creation hole upper level cach turn lead possibl addit cach miss 33 perform implic hole twolevel virtualr cach hierarchi three caus hole l1 1 replac l2 2 remov virtual alias l1 3 invalid due extern coher action probabl frequenc item 2 occur low kind hole caus perform problem process must issu interleav access two segment distinct virtual address map physic address preserv consist copi data virtual address ensur one alia may present l1 instant prevent physic copi resid undisturb l2 simpli increas traffic l1 l2 access virtual alias interleav invalid extern coher action occur regardless cach architectur 2 consid analysi event primari import invalid l1 due mainten inclus l1 l2 import quantifi frequenc effect hit ratio l1 recal index function l2 base physic address wherea index function l1 use virtual address also number bit includ index function function differ case function pseudorandom correl indic l1 l2 particular datum consequ line replac l2 data replac also exist l1 probabl 1 number bit indic l1 l2 respect data replac l2 exist l1 possibl l1 index coincident equal index data brought l1 l2 replac actual caus l1 replac occur hole creat thu probabl elimin line l1 preserv inclus result hole given 2 net probabl miss l2 caus hole appear l1 given product thu size ratio l1 l2 larg valu small exampl 8kb l1 cach 256kb l2 cach line yield slightli 3 l2 result creation hole expect increas compulsori miss ratio l1 model product l2 miss ratio compar simul miss ratio find approxim accur l2l1 cach size ratio 16 instanc simul whole spec95 suit 8kb twoway skew ipoli l1 cach back 1 mb conventionallyindex twoway setassoci l2 cach show effect hole l1 miss ratio neglig percentag l2 miss creat hole averag less 01 never greater 12 program twolevel virtualr cach describ 25 implement protocol l1 l2 cach effect provid mechan ensur inclus maintain coher maintain without revers address translat case hole creat level1 requir inclus properti 34 effect polynomi map critic path cach memori access convent organ normal comput effect address ad two regist regist plu displac ipoli index impli addit circuitri comput index effect address circuitri consist sever xor gate oper parallel therefor total delay delay one gate xor gate number input depend particular polynomi use experi report paper number input never higher 5 therefor delay due gate low compar delay complet pipelin stage depend particular design may happen addit delay hidden instanc memori access begin complet effect address comput xor delay hidden sinc address comput right left gate use leastsignific bit address 19 experi report paper notic true even carri lookahead adder cla cla lookahead block size b bit comput first b leastsignific bit avail delay approxim one lookahead block threeblock delay b 2 leastsignific bit avail gener b leastsignific bit delay approxim 2i1 block instanc 64bit address binari cla 19 bit requir ipoli function use experi paper delay 9 block wherea whole address comput requir 11 blockdelay 19 leastsignific bit comput reason assum xor gate delay shorter time requir comput remain bit howev sinc cach access time usual determin pipelin cycl fact leastsignific bit avail earli sometim exploit design order shorten latenc memori instruct overlap part cach access requir leastsignific bit comput signific address bit approach result pipelin structur similar shown figur 2 notic organ requir pipelin memori exampl assum twostag pipelin memori case polynomi map may caus addit delay critic path show later even addit delay induc one cycl penalti cach access time polynomi map provid signific overal perform improv addit delay load instruct may neg impact perform processor issu depend instruct may delay accordingli hand delay neglig effect store instruct sinc instruct issu memori commit order precis except therefor xor function usual perform instruct wait store buffer besid load instruct may depend store depend resolv current microprocessor eg pa8000 12 forward techniqu compar effect address load store instruct order check possibl match cach index involv use xor gate requir oper memori address predict also use avoid penalti introduc xor delay lengthen critic path effect address memori refer shown highli predict instanc 9 shown address 75 dynam execut memori instruct spec95 suit predict simpl scheme base tabl keep track last address seen given instruct last stride propos use similar scheme predict earli pipelin line like access given load instruct particular scheme work follow processor incorpor tabl index instruct address entri store last address predict stride recent execut load instruct fetch stage figur 2 pipelin overlap part address comput memori access leastsignific bit mostsignific bit memori access memori access alu stage stage critic path tabl access program counter decod stage predict address comput xor function perform comput predict cach line notic done one cycl sinc xor perform parallel comput mostsignific bit discuss time perform integ addit higher one cycl vast major processor instruct subsequ issu memori unit use predict line number access cach parallel actual address line comput predict line turn incorrect cach access repeat actual address otherwis data provid specul access load destin regist scheme predict effect address earli pipelin previous use purpos 7 load target buffer present predict effect address ad stride previou address 3 4 fast address calcul perform comput load address earli pipelin without use histori inform propos memori access overlap nonspecul effect address calcul order reduc cach access time though none execut specul subsequ instruct depend predict load author propos use memori address predict scheme order execut memori instruct specul well instruct depend case missspecul recoveri mechan similar use branch predict scheme util squash missspecul instruct noteworthi paper topic 8 9 20 4 experiment evalu order verifi impact polynomi map realist microprocessor architectur develop parametr simul outoford execut processor fourway superscalar processor simul tabl 1 show differ function unit latenc consid experi size reorder buffer entri two separ physic regist file fp integ one 64 physic regist processor lockupfre data cach 14 allow 8 outstand miss differ cach line cach size either 8kb 16 kb 2way setassoci 32byte line size cach writethrough nowritealloc hit time cach two cycl miss penalti 20 cycl infinit l2 cach assum 64bit data bu l1 l2 consid ie line transact occupi bu four cycl two memori port depend thorough memori specul use mechan similar arb multiscalar 6 pa8000 12 branch histori tabl 2k entri 2bit satur counter use branch predict memori address predict scheme implement mean directmap tabl 1k entri without tag order reduc cost expens interfer tabl entri contain last effect address last load instruct use entri last observ stride addit entri contain 2bit satur counter assign confid predict mostsignific bit counter set predict consid correct address field updat new refer regardless predict wherea stride field updat counter goe function unit latenc repeat rate multipli effect address 1 1 tabl 1 function unit instruct latenc tabl 2 show ipc instruct commit per cycl miss ratio differ configur baselin configur 8 kb cach ipoli index address predict 4th column averag ipc configur 130 averag miss ratio 6th column 1653 1 ipoli index use averag miss ratio goe 968 8th column xor gate critic path impli increas ipc 135 7th column hand xor gate critic path assum one cycl penalti cach access time result ipc 132 9th column howev use memori address predict scheme xor gate critic path 10th column provid perform cach xor gate critic path 7th column thu main conclus studi memori address predict scheme offset penalti introduc addit delay xor gate critic path final tabl 2 also show perform 16 kb 2way setassoci cach 2nd 3rd column notic addit ipoli index 8kb cach yield 60 ipc increas obtain doubl cach size main benefit polynomi map reduc conflict miss howev benchmark suit mani benchmark exhibit rel low conflict miss ratio fact spec95 conflict miss ratio 2way associ cach less 4 program except tomcatv swim wave5 focu three benchmark highest conflict miss ratio observ abil polynomi map reduc miss ratio significantli boost perform problem case shown tabl 3 case see polynomi map provid signific improv perform even xor gate critic path memori address predict scheme use 27 increas ipc memori address predict use ipc 33 higher convent cach capac 16 higher convent cach twice capac notic polynomi map scheme 1 benchmark consid 100m instruct skip first 2000m predict even better organ xor gate critic path without predict due fact memori address predict scheme reduc one cycl effect cach hit time predict correct sinc address comput overlap cach access comput address use verifi predict correct howev main benefit observ tabl 3 come reduct conflict miss isol differ effect also simul organ convent index ipoli index xor cp xor cp ipc miss pred pred ipc miss pred pred ipc miss ipc ipc go 100 545 087 088 1087 087 1060 083 084 compress 113 1296 112 113 1363 111 1417 107 110 li 140 472 130 132 801 133 710 126 131 ijpeg 131 094 128 128 372 129 217 128 130 perl 145 452 126 127 947 124 1026 119 121 vortex 139 497 127 128 837 130 787 125 127 su2cor 128 1374 124 126 1469 124 1466 121 125 hydro2d 114 1540 113 115 1723 113 1722 111 115 applu 163 554 161 163 616 157 684 155 159 mgrid 151 491 150 153 505 150 531 146 152 turb3d 185 467 180 182 605 181 538 178 182 apsi 113 1003 108 109 1519 108 1336 107 109 fpppp 214 109 200 200 266 198 247 193 194 wave5 137 2772 126 128 4276 151 1467 148 154 averag 138 1047 130 131 1653 135 968 132 135 tabl 2ipc load miss ratio differ cach configur memori address predict scheme convent index 8kb cach column 5 compar ipc column 4 tabl 3 see benefit memori address predict scheme due reduct hit time almost neglig confirm improv observ ipoli index scheme address predict deriv reduct conflict miss conclus paper describ pseudorandom index scheme robust enough elimin repetit cach conflict discuss main implement issu aris use novel index scheme exampl ipoli index use address bit convent cach comput cach index also use differ index function l1 l2 result occasion creation hole l1 problem solv use twolevel virtualr cach hierarchi final propos memori address predict scheme avoid penalti due potenti delay critial path introduc ipoli index function detail simul ooo superscalar processor demonstr program signific number conflict miss convent 8kb 2way setassoci cach convent index polynomi map xor cp xor cp ipc miss pred pred ipc miss pred pred ipc miss ipc ipc wave5 137 2772 126 128 4276 151 1467 148 154 averag 128 3080 112 113 5461 146 1440 142 149 tabl 3 ipc load miss ratio differ cach configur select bad program perceiv ipc improv 33 address predict 27 without address predict 16 higher ipc improv obtain simpli doubl cach capac furthermor program experi signific conflict miss see less 1 reduct ipc ipoli index use conjunct address predict interest byproduct ipoli index increas predict cach behaviour experi see ipoli index reduc standard deviat miss ratio across spec95 1849 516 conflict miss elimin miss ratio depend sole compulsori capac miss gener easier predict control system incorpor ipoli cach could use realtim domain cachebas scientif comput iterationspac tile often introduc extra cach conflict 6 r cach perform oper system multiprogram columnassoci cach techniqu reduc miss rate directmap cach streaml data cach access fast address calcul zerocycl load microarchitectur support reduc load latenc xorschem flexibl data organ parallel memori arb hardwar mechanim dynam reorder memori refer hardwar support fot hide cach latenc memori address predict data specul specul execut via address predict data prefetch elimin cach conflict miss xorbas placement function vector access perform parallel memori use skew storag scheme advanc perform featur 64bit pa8000 improv directmap cach perform addit small fullyassoci cach prefetch buffer lockupfre instruct fetchprefetch cach organ cach perform optim block algorithm prime memori system array access randomli interleav memori cydra 5 strideinsensit memori system pseudorandomli interleav memori perform potenti data depend specul collaps case twoway skewedassoci cach skewedassoci cach cach memori logic data skew scheme interleav memori vector processor organ perform twolevel virtualr cach hierarchi tr vector access perform parallel memori use skew storag scheme cach perform oper system multiprogram workload organ perform twolevel virtualr cach hierarchi cach perform optim block algorithm randomli interleav memori pseudorandomli interleav memori case twoway skewedassoci cach columnassoci cach streamlin data cach access fast address calcul zerocycl load perform potenti data depend specul myampersandamp collaps elimin cach conflict miss xorbas placement function specul execut via address predict data prefetch cach memori skewedassoci cach memori address predict data specul advanc perform featur 64bit pa8000 lockupfre instruct fetchprefetch cach organ ctr han vandierendonck koen de bosscher highli accur effici evalu randomis set index function journal system architectur euromicro journal v48 n1315 p429452 may steve carr soner nder case workingsetbas memori hierarchi proceed 2nd confer comput frontier may 0406 2005 ischia itali mazen kharbutli yan solihin jaejin lee elimin conflict miss use prime numberbas cach index ieee transact comput v54 n5 p573586 may 2005 nigel topham antonio gonzlez random cach placement elimin conflict ieee transact comput v48 n2 p185192 februari 1999 rui min yime hu improv perform larg physic index cach decoupl memori address cach address ieee transact comput v50 n11 p11911201 novemb 2001 jaum abella antonio gonzlez heterogen waysiz cach proceed 20th annual intern confer supercomput june 28juli 01 2006 cairn queensland australia