constraintbas interact train reschedul tool paper report design implement constraintbas interact train reschedul tool project collabor intern institut softwar technolog unit nation univers unuiist macau formul train reschedul constraint satisfact describ constraint propag approach tackl problem algorithm timet verif train reschedul design coher framework formal correct properti reschedul algorithm establish defin two optim criteria reschedul correspond minim number station visit affect passeng delay respect two heurist propos speed direct search toward optim solut feasibl propos algorithm heurist confirm experiment use reallif data b introduct pracosi peopl republ china railway comput system project 10 undertaken intern institut softwar technol ogi unit nation univers unuiist aim project develop skill softwar engin autom chines railway specif goal project autom prepar updat run map 1 dispatch train along 600 kilomet long railway line zhengzhou wuhan peopl republ china zhengzhou wuhan section chosen case studi along busi beijingguangzh line arteri northsouth railway china rate run train good passeng section high present manag procedur adequ dramat develop domest economi run map 9 contain inform regard topolog railway train number classif arriv departur time train sta tion arriv departur path etc computer run map tool read station line definit descriptor file allow segment sub set station time interv defin allow train timet run map method monitor movement train reschedul arriv departur satisfi oper constraint read final display graphic project timet given segment given interv sampl run map shown figur 6 train dispatch user tool modifi timet train section run accord map possibl due accid andor train delay modif map perform way certain schedul rule laid local railway bureau violat therefor comput run map tool check user modif possibl violat schedul rule warn user violat addit tool also assist user repair either automat semiautomat infeas timet least train servic disrupt made call process reschedul schedul reschedul differ two aspect first schedul creat timet scratch reschedul assum feasibl timet user modif may introduc inconsist timet input second optim criteria use schedul minimum oper cost usual defin absolut sens reschedul howev qualiti output measur respect origin timet pracosi project result run map tool capabl train timet verif 7 task hand enhanc pracosi tool perform automat reschedul consid constraint satisfact major problem pracosi implement constraint use passiv test possibl violat schedul rule view limit decid recreat run map tool scratch use constraint program approach paper give algorithm timet verif train reschedul use tool show constraint program allow us perform constraint check solv propag coher framework studi two notion optim reschedul timet respect origin timet notion provid measur qualiti reschedul oper also present two heurist direct speed search toward optim reschedul timet rest paper organ follow section 2 defin basic terminolog discuss relat work section 3 explain timet verif algorithm section 4 show formul train reschedul constraint satisfact problem give associ algorithm also discuss two heurist help direct speed search toward optim solu tion section 5 describ prototyp implement sampl run tool summar contribut shed light futur work section 6 preliminari follow provid inform definit necessari terminolog accord 9 facilit subsequ discuss name defin selfexplanatori clear context interest reader refer 9 formal definit terminolog topolog railway system defin collect name station identifi line differenti line within station connect two station refer former line latter track train journey sequenc visit connect station visit station repres arriv time departur time train timet associ train journey made schedul rule set tempor constraint restrict arriv time departur time visit order prevent undesir event train crash timet valid feasibl schedul rule violat associ otherwis timet invalid infeas given feasibl timet n station visit repres set assign equal constraint form dt denot arriv departur time respect 1 modif make timet replac assign ng word delay arriv time departur time visit given infeas timet reschedul process modifi timet make timet feasibl 21 problem statement six type schedul rule 9 railway system speed rule station occup rule station entri rule station exit rule line time rule stopov rule let two train 1 2 two adjac station b variabl atxi dtxi denot train arriv departur time atfrom station x respect schedul rule formul follow type schedul constraint speed constraint constant lng denot distanc station station b constraint enforc averag train speed travel two station exceed sp station occup constraint constraint enforc least ctr time unit two train occupi track station entri constraint constraint enforc least cen time unit two train enter station via line station exit constraint constraint enforc least cex time unit two train depart station via line line time constraint line time rule split two constraint first constraint enforc train overtak anoth train travel direct line second constraint enforc two journey line oppos direct line must unoccupi least cenx time unit stopov constraint cst constraint enforc train stay station least cst time unit given topolog railway system valid train timet due unexpect event user run map tool may want modifi timet work first check feasibl modifi timet feasibl previou timet replac modifi one wise reschedul infeas timet gener new feasibl timet note effici critic concern design verif reschedul algorithm sinc reallif situat reschedul must perform time manner notion effici may vari accord situat ten minut howev toler bound gener 2 optim solut requir usual case impract gener optim solut within given usual small time bound criteria optim howev defin definit serv guidelin design variou variableord valueord heurist gener good answer precis notion optim also enabl us measur qualiti reschedul timet follow present two optim criteria reschedul timet minimumchang optim respect origin timet least number station visit modifi criterion satisfi easili gener sinc case simpli delay train question latest possibl time result timet howev may introduc unreason long delay train visit thu criterion usual appli criteria limit maximum delay reschedul timet minimumdelay optim respect origin timet longest delay among train visit minimum let denot infeas reschedul timet respect goal criterion minim follow express aim two criteria could contradict one anoth repres extrem spectrum possibl definit optim 22 relat work reschedul differ tradit schedul sens possibl solut reschedul restrict origin schedul zweben et al 11 tackl problem use constraintbas iter repair heurist result gerri schedul reschedul system appli coordin space shuttl ground process work base propag base constraint solver somewhat relat work train schedul komaya fukuda 5 propos problem solv architectur knowledgebas integr simul schedul two train schedul system design ar chitectur fukumori et al 3 use tree search constraint propag techniqu concept time belt schedul system approach claim suitabl doubletrack line continu time unit recent chiang hau 1 attempt combin repair heurist sever search method tackl schedul problem gener railway system two ongo project aim autom train schedul reallif railway ministri work direct outgrowth pracosi project 10 unuiist latest pracosi run map tool prototyp use constraint passiv test constraint violat verif engin train schedul system tss design taiwan railway bureau trb 6 knowledgebas interact train schedul system incorpor automat manual schedul user comput system thu abl bring complementari skill schedul task 3 timet verif follow describ timet verif algorithm examin given timet valid respect set schedul constraint violat schedul rule constraint invalid timet locat display user algorithm shown figur 1 assum exist propagationbas constraint solver 8 propag timet view set constraint variabl either form dt arriv time dt departur time variabl becom ground line 5 post schedul constraint one one line 713 variabl ground propag engin perform essenti constraint check easi check violat constraint 3 initi 4 fg constraint store initi 6 constraint verif 7 c 2 c 9 inconsist found fcg retract c constraint network endfor 14 end fig 1 timet verif algorithm constraint violat given timet inconsist found constraint told store violat constraint retract algorithm proceed check possibl constraint violat ground variabl allow us retract constraint simpli remov undesir constraint constraint store 4 reschedul constraint satisfact schedul instanc constraint satisfact problem follow show reschedul given timet user modifi adjust arriv departur time obtain 0 valid invalid 0 invalid reschedul process attempt repair 0 make feasibl repair mean adjust valu nonmodifi variabl 1 timet becom valid 2 new timet reason close origin timet close mean new timet creat least servic disrupt exampl optim criteria given section 2 note user modifi variabl must kept fix reschedul process sinc modif repres dispatch requir order formul reschedul constraint satisfact determin variabl problem domain associ variabl constraint problem reschedul variabl arriv departur time timet everi variabl share integ domain three type constraint reschedul problem 1 schedul constraint schedul constraint set forth section 2 2 1440 minut 24 hour 2 modif constraint arriv departur time x modifi user new valu equal constraint constraint enforc user modif stay fix reschedul 3 forwardlabel constraint nonmodifi variabl x valu origin timet constraint x constraint necessari ensur delay arriv departur time reschedul becom find solut constraint satisfact problem solut optim solut closest origin timet readi present reschedul algorithm shown figur 2 3 algorithm divid three phase phase one line 4 timet 3 initi save copi constraint store 5 propag constraint c 6 reschedul 7 true 8 read user modif u u form 9 modifyt s0 u r timet 11 prompt error messag els reschedul timet necessari 14 endif fig 2 train reschedul algorithm post propag schedul constraint prune infeas valu variabl prune constraint network save 0 sinc schedul constraint timet user modif u store 0 reus everi reschedul step reallif situat reschedul perform repeatedli differ timet user modif save oper help avoid unnecessari invoc constraint relax actual reschedul take place procedur modifi line 1646 second phase line 1935 reschedul inform extract user modif origin timet post propag modif constraint line 2327 forwardlabel constraint line 2835 inconsist found reschedul halt failur report third phase line 3646 variabl modifi user extract var function enumer label use form variabl procedur modifyin s0 u r previou feasibl timet s0 save constraint network state user modif r reschedul timet 19 initi assign constraint associ usermodifi variabl 22 post user modif first second type constraint inconsist found user modif inconsist 26 return 28 prune infeas valu delay arriv departur time 29 constraint third type constraint inconsist found return 34 endif 36 reschedul variabl reschedul appropri variabl valueord use 40 function label return either fg set equal constraint bind variabl x 43 r fail 44 els fig 3 train reschedul algorithm cont valueord heurist embed label function speed direct search toward nearoptim solut two situat user modif lead timet 0 nonrepair first user modif self conflict sinc user modifi variabl must kept fix reschedul imposs repair variabl make timet valid second user modif self conflict room variabl adjust make timet valid constraint propag algorithm wellknown incomplet 8 thu phase two reschedul algorithm detect kind conflict theoret speak enumer procedur phase three guarante detect inconsist would usual take impract long case reschedul algorithm fail return answer within minut user advis abort current comput readjust modif restart reschedul process rest section present two variabl label heurist design yield reschedul timet minimumdelay minimumchang optim sens respect smallestfirst principl variabl order ascend order lower bound domain valu variabl domain also enumer ascend order principl found assumpt short delay train visit caus short delay subsequ one mean delay propag monoton fashion experiment result confirm use actual timet pracosi heurist usual help gener solut minimumdelay optim effici construct unrealist artifici exampl defeat heurist figur 4 show small segment four journey railway run reschedul b reschedul fig 4 nonoptim solut smallestfirst heurist map three journey b c share track nanj station two journey c take line travel nanj longtan journey fix indic thick line user suppos station occup station exit rule enforc least ten minut among three point ab c sixti minut point c respect modifi timet thu infeas due insuffici long distanc point b figur 4 b show reschedul timet obtain use smallest first principl reschedul start move point b ahead time achiev tenminut requir point b movement turn caus anoth conflict point b c point c thu forc move howev feasibl locat point c move point b sinc point fix user therefor move point c onehour ahead point maximum delay case two hour solut optim sinc better solut obtain simpli move point b twenti minut ahead time shown figur 5 fig 5 smallestchangesoptim solut consistentassignmentfirst principl heurist suggest instanti first variabl instanti time valu origin timet call variabl nonconflict variabl conflict therefor label nonconflict variabl backtrack last valu variabl domain enumer ascend order idea maintain mani variabl origin valu possibl heurist direct search toward minimumchang optim solut note nonconflict variabl may instanti valu origin valu eventu conflict variabl tri possibl combin time valu solut found effici reason classifi nonconflict variabl two group first group contain variabl share journey one conflict variabl second group contain rest nonconflict variabl heurist suggest label first second group nonconflict variabl order essenti sinc label variabl share journey conflict variabl higher chanc backtrack appli heurist reschedul infeas timet figur 4 recal point fix user classifi variabl associ point b point c conflict nonconflict respec tive thu point c label first retain origin posit map point b forc move reach locat tenminut ahead point c specif case minimumchang optim solut coincid minimumdelay optim solut exampl also show gener two heurist give differ first solut 5 prototyp implement order demonstr feasibl algorithm reconstruct enhanc pracosi run map tool prototyp 7 reschedul capabl prototyp consist constraintbas schedul user interfac former implement c ilog solver librari 20 4 latter built use microsoft visual basic 30 follow overview run map tool present give sampl session tool use segment nanjingxi shanghai china railway amount 3005 constraint 596 variabl reschedul timet gener two heurist explain conclud section show two exampl tool fail respond time manner run map display figur consist six column region column one column four show abbrevi identifi station column two show number arriv departur line station column three main window present graphic represent timet time locat x axe respect column five show cumul distanc first station column six show distanc current station previou station case timet larg fit main window two scrollbar enabl fig 6 run map tool user clickanddrag line modifi correspond train visit map modifi timet valid use verif algorithm check button press infeas warn window shown figur 7 pop display constraint violat point user either invok reschedul algorithm press reschedul button correct modif manual restor origin feasibl timet figur 8 show segment china railway timet due acci fig 7 warn window origin feasibl timet b modifi infeas timet fig 8 comparison two heurist dent delay train departur zhenjiang 105 330 yield map shown figur 8 b usermodifi departur time point arrow subsequ train visit journey highlight segment fix immedi run map tool user movement incur seven constraint violat modifi journey left adjac journey reschedul infeas timet two heurist succeed gener feasibl timet within second figur 9 figur 9 b show reschedul timet gener use smallestfirst principl consistentassignmentfirst principl respect smallestfirst principl b consistentassignmentfirst principl fig 9 comparison two heurist cont appli smallestfirst principl process visit map left earliest right latest visit associ arriv departur time violat schedul constraint preserv current valu otherwis move time ahead littl possibl elimin inconsist thu visit journey may modifi other remain unchang explain visual journey shift right horizont also bent reschedul process movement propag fashion left right whenev movement possibl backtrack take place instead massag sever journey produc feasibl timet consistentassignmentfirst principl suggest modifi station visit possibl goal well approxim first locat station visit remain unchang respect user modif station visit label first conflict variabl chang origin valu label last experi reveal mani case heurist produc timet almost ident origin timet seen figur 9 b journey retain origin locat even rightshift journey shape mostli preserv experiment result confirm reschedul usual complet within second alway case figur 10 figur 10 b provid two exampl infeas timet figur 10 reschedul use consistentassignmentfirst principl second smallestfirst principl fail return answer within five minut figur b simpli nonrepair timet neither heurist return promptli confirm unsolv problem infeas timet 1 b infeas timet 2 fig 10 poor perform exampl 6 conclud remark contribut paper threefold first defin formal train reschedul constraint satisfact problem two algorithm railway timet verif reschedul deriv base propag base constraint solver defin two optim criteria use measur qualiti reschedul timet import note optim criteria defin respect origin timet sec ond base domain knowledg learn domain analysi propos two heurist speed direct search toward minimumdelay optim minimumchang optim solut respect feasibl propos algorithm heurist confirm experiment use reallif data third reconstruct enhanc pracosi run map tool prototyp would interest futur work studi differ stochast method train reschedul work also progress experi reschedul method largerscal reallif railway timet acknowledg acknowledg pleasur interact fellow staff unuiist unit nation univers intern institut softwar technolog macau particular indebt prof dine bjrner invit particip pracosi project also numer fruit discuss work session sren prehn chri georg yulin dong liansuo liu dong yang last least thank anonym refere construct comment help improv final version paper r railway schedul system use repairbas ap proach zhengzhou fundament algorithm train schedul base artifici intellig solver refer manual version 20 knowledgebas approach railway schedul interact train schedul workbench base artifici intellig simpl run map display tool consist network relat railway run map design execut overview schedul reschedul iter repair tr