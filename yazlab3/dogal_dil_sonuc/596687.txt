edg provis fair vpndiffserv network custom virtual privat network vpn differenti servic diffserv infrastructur like demand secur also guarante qualityofservic qo pursuanc desir leasedlinelik servic howev expectedli unabl unwil predict load vpn endpoint paper propos custom specifi requir rang quantit servic servic level agreement sla support servic internet servic provid isp would need autom provis system logic partit capac edg variou class group vpn connect manag effici allow resourc share among group dynam fair manner edg provis certain amount resourc base sla traffic contract edg alloc vpn connect also need provis interior node transit network meet assur offer boundari network therefor propos twolay model provis vpndiffserv network top layer respons edg provis drive lower layer charg interior resourc provis help bandwidth broker bb variou algorithm exampl analys present provis alloc resourc dynam edg vpn connect develop prototyp bb perform requir provis connect admiss b introduct grow demand sinc privat network built use dedic line offer guarante bandwidth latenc similar guarante provid ip base virtual privat network vpn 9 14 internet design deliv perform guar ante advent differenti servic 3 2 ip backbon provid variou level qualiti servicerec propos expedit forward ef 10 per hop behaviour phb recommend method build virtual leas line line vll type pointtopoint connect vpn provid servic other exampl 1617 recent implement 12 13 bandwidth broker 15 allow user specifi singl quantit valu ie 1 mbp 2 mbp etc base specif edg router establish vpn connect dynam howev expect user unabl unwil predict load vpn endpoint 7 provid point view also guarante exact quantit servic might difficult job begin vpndiffserv deploy 2 therefor propos user specifi requir rang quantit servic exampl user want establish vpn stub network b figur 1 sure whether need 05 mbp 06 mbp 1 mbp know lower upper bound requir approxim specifi rang 05 1 mbp requir isp outsourc servic latter isp offer multipl option via websit figur 6 help custom select suitabl option activ servic dynam fli sever advantag user need specifi exact capac give flexibl specifi rang price custom pay higher one pay lower bound capac lower normal need paid upper bound capac low load possibl user might enjoy upper bound rate say 1 mbp exampl without pay anyth extra kind price might attract user isp take advantag attract custom without break commit howev pose signific challeng isp would need deploy autom provis system abl logic partit capac edg variou class group group identifi offer exampl 05 1 mbp could repres one group 12 mbp could repres anoth vpn manag effici allow resourc share among group dynam fair manneralso must provis interior node network meet assur offer boundari network therefor propos twolay model section ii provis vpndiffserv network top layer respons edg provis drive lower layer charg interior resourc provis help bandwidth broker bb restrict paper edg provis consid fact complex lie boundari network main drive forc overal provis section iii variou algorithm exampl analysi present provis alloc resourc dynam edg fair issu alloc unus resourc address section iiid prototyp bb perform requir provis connect admiss describ section iv section v conclud paper summari contribut discuss futur research direct edg router 3 interior router 1 interior interior edg router 1 edg router 3 edg router 5 edg router 4 isp stub network custom custom stub network 1a network stub custom custom stub network c 1c fig 1 vpn diffserv deploy scenario ii provis requir vpndiffserv network model provis diffserv network mean determin alloc resourc necessari variou point network also modif exist resourc share dynam among variou vpn class ie group quantit case vpn qualit traffic assur servic requir provis network boundari network interior determin resourc requir node quantit traffic need estim volum traffic travers network node isp natur know sla amount vpn quantit traffic enter transit network specif edg node volum estim exact accuraci variou interior node travers vpn connect know path connect 1 howev rout topolog known figur almost accur estim default path doesnt meet requir incom connect altern variou qo rout 6 5 also use find suitabl path enforc mpl techniqu 8 role bandwidth broker autom provis base basic need provis vpndiffserv network support quantit servic consid provis two layer model top layer respons edg provis drive bottom layer charg interior provis figur 2 seek provid system vpn servic avail demand find bandwidth broker 1517 right choic capabl perform dynam endtoend admiss control setup leas line like vpn maintain topolog well polici state node network also capabl manag provis network resourc separ administ ds domain cooper similar domain edg provis interior provis bandwidth broker cr cr cr er cr cr cr er fig 2 layer provis view vpndiffserv network b novel bandwidth specifi interv overcom user difficulti specifi exact amount quantit bandwidth requir outsourc vpn servic isp model support flexibl way express sla user specifi rang quantit amount rather singl valu although sever advantag also make edg interior provis difficult complex explain simpl ex ampl refer figur 1 assum edg router 1 provis provid 20 mbp quantit resourc establish vpn connect elsewher network isp provid two option via web interfac vpn custom select rate connect dynam 1 mbp 2 mbp easi see time 20 connect 1 mbp 10 connect enjoy 2 mbp even mixtur two eg 5 connect connect 1 mbp new connect accept activ connect termin maintain network state simpl doesnt caus either reduct forc renegoti exist connect 20 connect 1 mbp one connect leav simpli 19 connect 1 mbp admiss process equal simpl isp provid new option exampl shown figur 6b user select rang 1mbp 2 mbp 1 2 minimum maximum offer guarante bandwidth maintain state admiss control difficult detail exampl found section iiibwhen 10 user connect would get maximum rate 2 mbp new connect start arriv rate exist connect would de creas exampl 20 connect rate would stage activ connect termin rate everi singl connect would expand 1 mbp mbp simpl case singl resourc group support rang 1mbps2 mbp realiti might sever group shown figur 6b case renegoti possibl expans exist connect admiss control mainten network state simpl idea present illustr figur 3 traffic ef traffic c usermaxi c usermini useri useri vpn pipe vpn connect demand b fig 3 sla bandwidth specifi interv c user mini c user mini group actual rate vpn connect c useri vari rang never get c user mini b c useri rate configur edg router polic rate traffic submit rate higher rate mark best effort traffic drop depend polici c model notat model address novel approach sla provid polici algorithm autom resourc provis admiss control howev support provis first start alloc certain percentag resourc node edg interior accommod quantit traffic edg quantit portion logic divid dedic vpn tunnel ie requir 1mbp 2 mbp explicitli connect wish rate defin rang ie 051 mbp 12 mbp etc top level bandwidth apportion shown figur 4 notat ffl ct total capac node interfac ffl cded capac alloc vpn connect requir absolut dedic servic ffl cshare capac apport vpn connect describ requir rang ffl c qual remain capac qualit traffic ffl cquan capac provis quantit traffic equal cded cshare c quan c quan share ded c qual z share c qual c qual b b fig 4 top level bandwidth apportion logic partit edg b logic partit interior edg cquan rate control polic shape interior cquan indic amount capac alloc actual protect quantit traffic need aris valu differ differ node kind logic partit help capac never wast even portion resourc alloc quantit traffic use vpn connect unus capac natur goe qualit portion enhanc best effort qualit servic true edg interior cshare shown figur 4 logic divid multipl group group support differ rang figur 5 might multipl group group defin follow notat ffl c basei base capac group share vpn connect belong group ffl c user mini isp offer minimum guarante bandwidth user vpn connect ffl c user maxi isp offer maximum guarante bandwidth user vpn connect ffl n sharedi current number share vpn connect ffl c sharedi amount capac current use group ffl c useri actual rate activ connect group equal c sharedi section 3 cshare unus total unus bandwidth share servic group sharedunus c basei ded share share qual c00000000000000000001111111111111111111unus fig 5 microscop view bandwidth apportion edg numer share polici appli share servic group call share servic group realiti base capac share certain number vpn connect share polici might allow group share resourc among connect also share group vpn connect case unus capac may also appli dedic capac prioriti given certain group alloc unus resourc actual fair share challeng problem address issu follow section develop provis mechan iii edg provis polici analysi algorithm base model describ section ii variou alloc polici could adopt isp ingress point alloc capac dynam maintain guarante qualiti servic variou type incom exist vpn connect multipl class vpn support differ bandwidth specifi cation suitabl polici ffl polici capac unus one group use group mean multipl share servic group one group whose resourc exhaust support numer connect doesnt borrow resourc other even group unus capacityalso none group allow use unus capac dedic servic group ffl polici ii capac unus one share servic group borrow anoth share servic group howev like previou pol ici suppos borrow dedic servic group ffl polici iii capac unus dedic servic group borrow tunnel share servic group also group share resourc among section start vpn connect accept algorithm ingress point admiss complex lie complex introduc need partit share resourc support model polici present analysi exampl algorithm polici iii iii clarifi detail vpn call accept ingress job admiss control determin whether vpn connect request accept reject request accept requir resourc must guarante group new vpn establish request admit least minimum bandwidth state offer satisfi also retain least minimum requir exist user ie c user mini new vpn connect request accept ensur admit vpn connect alway receiv least minimum offer bandwidth c user mini group restrict number maximum connect join group much capac accept connect actual decid connect state group share polici go discuss next subsect b capac alloc share among group polici base capac alloc group sole use vpn connect belong group circumst resourc assign one group borrow other even capac unus make alloc simpl edg also interior implement point view simpl sinc unus capac use group qualit servic mention earlier also enhanc vpn connect accept system check connect alloc maximum rate possibl base capac c basei enough assign exist connect maximum rate c user maxi otherwis base capac share among exist new vpn connec tion therefor express admiss polici follow exampl 1 follow exampl assum total link bandwidth mbp one share user group also assum isp offer group c user base capac c base1 alloc group 20 mbp mbp call accept long condit c user mini section iiia met number call exceed c user mini new arriv call reject exampl 21st call exampl accept c user1 would been21 minimum bandwidth could longer guarante fore call reject c capac alloc share among group polici ii capac alloc group fulli use vpn con nection capac borrow connect share servic group need howev borrow capac must relinquish need group capac borrow although borrow dealloc add complex edg provis connect variou group ever better chanc enjoy higher rate follow present algorithm regard vpn connect arriv termin possibl expans exist connect result termin connect share servic group c1 vpn connect arriv like previou case vpn connect arriv essenti involv check avail resourc use new con nection avail alloc capac incom call even base capac certain group allow new connect belong group assign maximum isp offer rate ie c user maxi resourc share among variou group might happen resourc group borrow group leav requir resourc ie cshare unus c user maxi case resourc must relinquish appropri groupss dealloc exist connect lead rearrang capac connect note capac relinquish way borrow numer way unus capac borrow compet group see section iiic3 iiid sake simplic group maximum excess bandwidth c releas first next group enough base capac support new connect max offer rate hi share unus capac also enough support new connect max offer rate see exampl 2 cshare unus c user maxi share unus capac borrow capac relinquish borrow see exampl 3 els n relinquish c user maxi group max excess bw rearrang bandwidth group mention capac borrow one group other one group borrow resourc natu ralli base capac less need ie much one group borrow depend much unus resourc avail least equal maximum offer rate c user maxi amount alloc otherwis ie cshare unus c user maxi whole unus resourc goe group question divid among connect group share capac equal exceed base capac hi unus capac still support new connect rate capac borrow see exampl 4 cshare unus c user maxi unus capac less max rate capac share exist new connect see exampl 5 els n cshare unus consid sever numer exampl section clarifi algorithm analysi present follow exampl assum total link bandwidth mbp two share user group ie 2 group 1 c user c user c user prior vpn connect request group 1 group 1 c c user c user max1 also cshare unus greater c user max1 henc c prior vpn connect request group 1 exampl c greater c user mbp mean group 1 hasnt use base bandwidth new connect maximum offer bandwidth 1 mbp howev cshare unus time request arriv cshare gamma mbp indic anoth group borrow capac group 1 group left least c user mbp request could assign desir amount resourc therefor option left relinquish 1 mbp group borrow search tabl find group 2 taken bandwidth therefor need deduct 1 mbp group 2 recomput individu share vpn connect c c shared2 gammac user max1 mbp obvious c mbp prior vpn connect request group 2 case one group use full alloc base capac borrow resourc group left spare capac c total spare capac cshare unus valu greater c user max2 ie 2 mbp therefor new vpn connect request alloc maximum offer valu ie 2 mbp even exceed base capac group 2 exampl 5 prior vpn connect request group 2 exampl depict scenario one group alreadi exceed base capac accommod new connect request unus resourc left groupsher even new call arriv group 2 borrow mbp current capac alloc group equal distribut among exist new arriv vpn connect therefor c mbp c2 vpn connect termin vpn connect termin resourc might releas relev group depend current rate everi connect enjoy group rate less equal maximum offer rate capac releas group current share result connect group increas equal capac share lower number connect howev current rate everi connect alreadi equal maximum offer rate termin would trigger deduct c user maxi share resourc c sharedi connect alreadi enjoy c user maxi rate chang occur exist connectionsth algorithm state follow see exampl 6 cshare unus cshare unus cshare unus cshare unus clarifi vpn connect termin process consid similar exampl present previou section exampl connect termin group 1 c shared1 user 1 mean capac use group connect termin remain unchang even termin new valu c shared1 also 10 mbp vpn connect equal share capac c shared1 capac deduct group total unus share capac also remain unchang exampl 7 vpn connect departur group 1 exampl c shared1 user state fact prior departur activ vpn connect use maximum possibl offer bandwidth c user 1 mbp total henc departur trigger deduct c user mbp total capac use group prior departur capac even deduct good enough satisfi activ connect offer highest possibl rate 1 mbp therefor c mbp vpn connect receiv c shared1 termin process trigger deduct c user max1 capac use group 1 unus share capac increas valu cshare unus c3 vpn capac expans unus share capac left group distribut among other prioriti given certain group alloc unus capac next section present variou polici alloc unus dedic capac might appli well consid one case prefer given needi group need determin ratio c useri c user maxi order group accord ratio reorder group first one lowest c useri c user maxi last one highest c useri c user maxi reorder done expans algorithm start alloc unus bandwidth first group next base avail resourc state share unus share cshare unus gamma n sharedi c user share unus cshare unus cshare unus exampl 8 vpn connect termin group 2 termin vpn connect group 2 cshare unus mbp need resourc group capac use partli fulli find group 1 need resourc sinc c user1 user max1 1 remain seen extent could use unus capac iti c shared1 c share unus 11 greater c user max1 1 mbp therefor capac group 1 expand n shared1 c user mbp alloc exist connect c user remain unus capac reduc cshare unus gamma n shared1 c user mbp exampl 9 vpn connect departur group 2 unlik previou exampl group 1 need use portion unus resourc remain capac alloc exist group 1 vpn connect order enhanc servic c shared1 increas 10 212 mbp exist connect receiv c shared1 12mbp fair alloc unus dedic resourc polici iii previou section discuss method one share servic group borrow resourc anoth similar group section discuss possibl share unus dedic resourc among variou share servic group share servic group allow borrow resourc unus dedic resourc defin new term share cded unus question alloc unus dedic resourc fairli among compet group vpn tunnel want maximum bandwidth offer isp polici offer possibl point share share quantiti need alloc maximum possibl offer rate connect even allow unus dedic resourc use share servic group greater 0 need defin fair set user throughput valu ie c useri given set maximum offer load c user maxi c share word need divid extra capac cded unus among needi group fair manner howev fair share extra resourc trivial issu address other differ network situat 20 11 18 19 propos 11 favour share bottleneck capac equal among user independ requir other 20 18 advoc penal user caus overload share resourc among vpn connect group equal share unus dedic capac help much group connect alreadi enjoy rate close c user maxi time also doesnt allevi problem group rate c user mini much less c user maxi fair criterion 20 also doesnt fit would depriv heavi user group gain share unus dedic resourc even enjoy rate much c user maxi case complic fact penal heavi user group reduc current share might happen certain case tri maxim rate lower user group follow section discuss variou fair share method edg d1 alloc unus resourc lower user group first case first need order user group base c user maxi valu object satisfi lower user group first tri alloc maximum offer valu higher user group less chanc acquir resourc left dedic servic group rational behind vpn user satisfi alloc higher user group might bring littl chang mani case suffici extra resourc avail order lead servic group possibl expand k group vpn tunnel belong group enjoy maximum offer band th group receiv rest unus dedic resourc tunnel remain unchang total enhanc share capac comput follow share n sharedi c user maxi cded unus n sharedi c user comput help us view c share share differ group howev gener case true k 2 case share c shared1 cded unus cded unus practic unus dedic capac process start ask first group unus capac enough satisfi vpn connect connect receiv maximum valu c user maxi queri second group wise whole amount capac alloc first group divid among compet connect process continu long unus capac posit figur assum situat 3 group vpn connect capac respect c user maxi also cshare mbp group 1 c 025 mbp group 2 c mbp c user mbp group 3 c mbp c user mbp prior avail cded unus 7 mbp group alreadi order appli algorithm see first two group alloc maximum rate therefor expand 15 theta 12 theta respect rest unus capac cded unus gamma mbp goe third group d2 alloc unus resourc highest needi group first much like process describ differ group order base need apportion mechan algorithm remain need determin ratio c useri c user maxi group lower ratio get prefer group higher ratio therefor process start feed needi group continu long unus capac previou section c user max3 c user max1 067 c user2 c user max2 083 clearli group 3 needi group cded unus mbp serv needi group 3 enhanc servic new c c user 067 previou exampl group never chanc grab portion unus bandwidth new polici allow improv servic substanti d3 alloc unus resourc base proport need although mechan seem fair sinc alloc base group need mani case sever needi group littl differ need case apportion might alway fair unus dedic resourc exhaust tri feed first group remain depriv get share section fore present way alloc unus resourc base proport need group need resourc ie ratio c useri c user maxi receiv portion unus resourc proport group need therefor group receiv extra resourc base proport need expand ded unus c share excessi share excess need group c share excessi actual excess quantiti need offer connect group maximum valu c user maxi therefor c share exampl 12 let us consid exampl illustr use proport need order need alloc extra capac sole base proport need group 1 c user1 c user max1 067 group 2 c user2 c user max2 group 3 c user3 c user max3 05applic alloc polici expand capac group 1 c 70515gamma5 connect improv new c c user max1 079 similarli group 2 c mbp c c user max2 089 group 3 c user 068 clearli show proport share fairli enhanc rate needi group 3 wouldnt case appli fair method iv implement bandwidth broker dynam configur underli network may provid differ class servic satisfi variou vpn custom identifi gener function provid resourc polici option present bb standard web interfac shown figur 6b bandwidth broker manag outsourc vpn corpor custom servic level agreement sla isp allow one user specifi demand www interfac establish vpn certain qo two endpoint essenti compon bandwidth broker bb need keep track exist connect avail resourc updat relev databas reflect recent network state bb interact special configur daemon cd certain user request arriv setup tunnel bb decid whether alloc enough resourc meet demand tunnel bb invok sla databas check valid user request essenti need maintain connect databas contain list current activ vpn edg resourc databas keep track record quantit resourc avail base capac current resourc consumpt variou router interfac fig 6 bb web interfac user b exampl dynam configur switch network public internet 130926622 univ genev univ bern univ bern fig 7 experiment setup vpn resourc control bandwidth broker check resourc connect databas whenev new connect arriv departur might trigger modif rate exist connec tion better understand edg router dynam configur meet user demand conform sla demonstr exampl dynam rate alloc vpn connect commerci cisco router consid similar exampl detail section iii see simpl algorithm realli appli edg devic let us consid experiment setup figur difservvpn three vpn qo capabl edg router privat network behind configur 1 user want establish vpn connect sourc 172170100 destin 172200100 choos menu 12 mbp isp provid websit submit request resourc group definit edg resourc databas entri shown figur 8 appli algorithm present section 3 polic rate c user1 configur edg router 1309270101 c mbp user b choos menu also get c sinc capac group 1 abil support assum two user c decid vpn connect capac vari 05 mbp group 2 support connect maximum avail rate 1 mbp therefor c mbp also configur router connect see follow polic individu vpn connect inbound c user b c user c ratelimit input accessgroup 140 2000000 2000000 8000000 conformact setprectransmit 1 exceedact setprectransmit 2 ratelimit input accessgroup 141 2000000 2000000 8000000 conformact setprectransmit 1 exceedact setprectransmit 2 ratelimit input accessgroup 142 1000000 2000000 8000000 conformact setprectransmit 1 exceedact setprectransmit 2 ratelimit input accessgroup 143 1000000 2000000 8000000 conformact setprectransmit 1 exceedact setprectransmit 2 classifi request vpn traffic accesslist 140 permit ip host 172170100 host 172200100 accesslist 141 permit ip host 172170101 host 172200100 accesslist 142 permit ip host 172170102 host 172200100 accesslist 143 permit ip host 172170103 host 172200100 show ingress router polic mark sinc diffserv unidirect assum bit preced 1 use ef traffic mark traffic exceed specifi rate mark best effort bit preced 2 user familiar cisco router notic first traffic rate paramet exampl 2000000 2000000 2000000 8000000 ratelimit polic mark command rate refer c useri group two burst paramet control resourc 172170100 140 172200100 resourc definit connect databas edg resourc databas network element edg router request web interfac edg router group base capac use capac resourc group usermin usermax user id sourc address id time id sourc tun dest address dest tun resourc group usag current activ fig 8 partial entri connect resourc databasesa scenario connect receiv maximum offer valu configur 2 user b also want establish connect sourc 172180100 172180101 respect choos menu 05 1 mbp ie group 2 see capac exhaust group 2 therefor two new connect two exist connect share base capac 2 mbp connect configur c c user mbp shown figur 9 new configur script use point follow ratelimit input accessgroup 140 2000000 2000000 8000000 conformact setprectransmit 1 exceedact setprectransmit 2 ratelimit input accessgroup 141 2000000 2000000 8000000 conformact setprectransmit 1 exceedact setprectransmit 2 ratelimit input accessgroup 142 500000 2000000 8000000 conformact setprectransmit 1 exceedact setprectransmit 2 ratelimit input accessgroup 143 500000 2000000 8000000 conformact setprectransmit 1 exceedact setprectransmit 2 ratelimit input accessgroup 144 500000 2000000 8000000 conformact setprectransmit 1 exceedact setprectransmit 2 ratelimit input accessgroup 145 500000 2000000 8000000 conformact setprectransmit 1 exceedact setprectransmit 2 accesslist 144 permit ip host 172170100 host 172180100 accesslist 145 permit ip host 172170101 host 172180101 v conclus paper propos novel rang base sla allow custom specifi requir rang quantit servic vpn connect sinc unabl unwil predict load vpn endpoint support servic propos develop prototyp bandwidth broker bb logic partit capac edg variou servic class group vpn manag effici allow resourc shar control resourc 172170100 140 172200100 resourc definit connect databas edg resourc databas network element edg router request web interfac edg router group base capac use capac resourc group usermin usermax user id sourc address id time id sourc tun dest address dest tun resourc group usag current activ 172170100 144 172200100 151 2 05 mbp 1720 fig 9 scenario rate exist connect reduc accommod new connect ing among group dynam fair manner variou algorithm exampl analysi present provis resourc dynam edg support qo vpn connect one obviou advantag system price gain price custom pay higher one pay lower bound capac lower normal need paid upper bound capac low load possibl user might enjoy upper bound rate without pay anyth extra price might attract user isp take advantag attract custom advantag believ model quit attract isp will deploy real world scenario vi acknowledg work describ paper part work done project charg account technolog internet cati 4 fund swiss nation scienc foundat project 50030545591 50030545601 snf r equip project 2160053299981 foundat forderung der wissenschaftlichen forschung der universitt bern r rout guidelin effici rout method framework differenti servic architectur differenti servic overview qualiti servic rout nextgener highspe network problem solut framework qosbas rout internet flexibl model resourc manag virtual privat network mpl support differenti servic framework ip base virtual privat network expedit forward phb bottleneck flow control implement bandwidth broker dynam endtoend resourc reserv outsourc virtual privat network implement servic broker manag qo enabl vpn core mpl ip vpn architectur benjamin teitelbaum fair window flow control comput network studi fair packet switch network fair atm network tr ctr raffael bolla roberto bruschi franco davoli capac plan ip virtual privat network mix traffic comput network intern journal comput telecommun network v50 n8 p10691085 6 june 2006 haci mantar ibrahim okumu junseok hwang steve j chapin scalabl intradomain resourc manag architectur diffserv network journal high speed network v15 n2 p185205 januari 2006