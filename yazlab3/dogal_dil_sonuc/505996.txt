improv latenc toler multithread decoupl abstractth increas hardwar complex dynam schedul superscalar processor may compromis scalabl organ make effici use futur increas transistor budget smt processor design superscalar core therefor directli concern problem work present evalu novel processor microarchitectur combin two paradigm simultan multithread accessexecut decoupl sinc decoupl unit issu instruct inord architectur significantli less complex term critic path delay central outoford design effect futur growth issuewidth clock speed investig techniqu complement sinc decoupl featur excel memori latenc hide effici larg amount parallel exploit multithread may use hide latenc function unit keep fulli util studi show ad decoupl multithread architectur fewer thread need achiev maximum throughput therefor addit obviou hardwar complex reduct place lower demand memori system sinc one problem multithread degrad memori system perform term miss latenc bandwidth requir improv becom critic high miss latenc bandwidth might becom bottleneck final although may seem rather surpris studi reveal multithread exhibit littl memori latenc toler result suggest latenc hide effect smt architectur come dynam schedul hand decoupl effect hide memori latenc increas cach miss penalti 1 cycl reduc perform 4context multithread decoupl processor less 2 percent nondecoupl multithread processor loss perform 23 percent b introduct gap speed processor memori kept increas past decad expect sustain trend near futur diverg impli term clock cycl increas latenc memori oper cross chip boundari addit processor keep grow capabl exploit parallel mean greater issu width deeper pipelin make even higher neg impact memori latenc perform allevi problem current processor devot high fraction transistor onchip cach order reduc averag memori access time sever prefetch techniqu also develop hardwar softwar 3 processor commonli known outoford processor 40 20 18 8 9 includ dynam schedul techniqu base tomasulo algorithm 34 variat allow toler memori function unit latenc overlap use comput independ instruct implement processor capabl fill issu slot independ instruct look forward instruct stream limit instruct window gener mechan aggress extract instruct parallel avail instruct window memori latenc continu grow futur outoford processor need larger instruct window find independ instruct fill increas number empti issu slot number grow even faster greater issu width increas instruct window size obviou influenc chip area major neg impact strike processor clock cycl time report recent 21 network involv issu wakeup bypass mechan also although less extent renam stage critic path determin clock cycl time analysi author studi state delay function network compon increas quadrat window length although linearli also depend strongli issu width moreov higher densiti technolog acceler increas latenc analysi suggest outoford architectur could find futur seriou boundari clock speed differ kind architectur propos recent either inord outoford address clock cycl problem partit critic compon architectur andor provid less complex schedul mechan 30 6 16 21 41 follow differ partit strategi one accessexecut paradigm first propos earli scalar architectur provid dual issu limit form dynam schedul especi orient toler memori latenc believ decoupl accessexecut architectur regain progress interest far issu width memori latenc keep grow demand larger instruct window trend make worth trade issu complex clock speed typic decoupl accessexecut architectur 26 27 7 39 38 23 2 12 split either static dynam instruct stream two access stream compos instruct involv fetch data memori run asynchron respect execut stream form instruct process data stream execut independ process unit call ap ep respect paper ap expect execut advanc ep prefetch data memori appropri buffer structur ep consum without delay anticip slippag may involv multipl condit branch howev amount slippag ap ep highli depend program ilp data control depend forc unit synchron call loss decoupl event 2 35 produc seriou perform degrad decoupl model present paper perform dynam code partit 27 12 follow simpl scheme base instruct data type ie integ fp although rather simplist scheme mostli benefit numer program still provid basi studi mainli focus latenc hide potenti decoupl synergi multithread recent studi 22 24 propos altern compilerassist partit scheme address partit integ code sinc one main argument decoupl approach reduc issu logic complex chosen issu instruct inord within process unit decoupl architectur adapt higher memori latenc scale much simpler structur outoford ie scale lower hardwar cost convers scale higher degre similar cost may argu inord processor limit potenti exploit ilp howev current compil techniqu extract much ilp thu compil pass inform hardwar instead use runtim scheme approach emerg epic explicitli parallel instruct comput architectur take 10 propos new decoupl architectur provid ap ep power dynam schedul mechan simultan multithread 37 36 process unit sever context issu instruct mention decoupl mode activ simultan compet issu slot instruct differ context issu cycl show studi combin decoupl mulithread take advantag best featur decoupl simpl effect techniqu hide high memori latenc reduc issu complex multithread provid enough parallel hide function unit latenc keep function unit busi addit multithread also help hide memori latenc program decoupl badli howev far decoupl succe hide memori latenc thread need keep function unit busi achiev nearpeak issu rate import result sinc thread reduc memori pressur report major bottleneck multithread architectur reduc hardwar cost complex rest paper organ follow section 2 describ base decoupl architectur analyz section 3 provid justif multithread section 4 describ evalu propos multithread decoupl architectur final summar conclus section 5 2 basic decoupl architectur model baselin decoupl architectur consid paper figur 1 consist two superscalar decoupl process unit address process unit ap execut process unit ep decoupl processor execut singl instruct stream base decalpha isa 5 split dynam dispatch instruct either ap ep two separ physic regist file one ap 64 integ regist ep 96 fp regist unit share common fetch dispatch stage separ issu execut writeback stage pipelin next brief descript stage memori subsystem store addr figur 1 scheme base decoupl processor fetch decod renam instruct reg file reg file map tabl regist fetch stage read 4 consecut instruct per cycl less 4 taken branch among infinit icach notic icach miss ratio spec fp95 usual low approxim introduc small perturb also provid condit branch predict scheme base 2k entri branch histori tabl 2 bit satur counter per entri 25 dispatch stage decod renam 4 instruct per cycl send either ap instruct queue iq 48 entri ep depend whether integ float point instruct memori instruct dispatch ap iq allow ap execut ahead ep provid necessari slippag hide memori latenc except kept precis mean reorder buffer graduat mechan regist renam map tabl 13 28 decoupl architectur 27 chosen steer memori instruct unit allow copi data load queue regist sinc preliminari studi show code expans would significantli reduc perform implement dynam regist renam avoid duplic data fetch memori written physic regist rather data queue elimin need copi also conveni way manag disord complet load lockupfre cach present duplic condit branch instruct also use 27 may avoid incorpor similar specul recoveri mechan use mip r10000 identifi instruct squash case mispredict ap ep provid 2 gener purpos fulli pipelin function unit whose latenc 1 cycl ap 4 cycl ep respect process unit read issu 2 instruct per cycl better exploit parallel ap ep instruct issu execut specul beyond four unresolv branch mip r10000 40 powerpc 620 20 featur may becom sometim key factor enabl ap slip ahead ep store address held saq queue 32 entri store graduat load issu cach disambigu address held saq whenev depend encount data pend store immedi bypass regist avail otherwis load put asid data forward primari data cach onchip 2port 31 directmap 64 kb size block length implement writeback polici minim offchip bu traffic lockupfre cach 17 model similarli maf alpha 21164 5 hold outstand primari miss differ line capabl merg 4 secondari per pend line assum l1 cach miss alway hit infinit multibank offchip l2 cach 16 cycl latenc plu penalti due bu content l1l2 interfac consist fast 128bit wide data bu capabl deliv 16 byte per cycl like r10000 bu busi 2 cycl line fetch copi back 3 quantit evalu decoupl processor section first character major sourc wast cycl typic singlethread decoupl processor next latenc hide effect architectur evalu identifi main factor influenc latenc toler architectur studi decoupl machin carri 1 26 7 29 27 39 38 19 14 incorpor techniqu like storeload forward control specul lockupfre cach section also provid motiv multithread decoupl architectur analyz section 4 31 experiment framework experi carri trace driven simul binari code obtain compil spec fp95 benchmark suit 33 dec alphast 600 5266 dec compil appli full optim trace gener run code previous instrument atom tool 32 simul model cyclebycycl architectur describ previou section run spec fp95 benchmark fed largest avail input data set sinc slow due detail simul run portion 100m instruct benchmark skip initi startup phase determin appropri initi discard offset compar instructiontyp frequenc fragment start differ point full run frequenc found phase length benchmark 5000 instruct 101tomcatv 1000 104hydro2d 146wave5 100 rest benchmark 32 sourc wast cycl figur 2 show throughput issu stage term percentag commit instruct total issu slot count ie percent issu slot realli use work ap ep wast throughput also character identifi caus empti issu slot four differ configur evalu differ whether lockupfre cach includ whether storeload forward mechan enabl stress memori system section assum 8 kb l1 data cach shown figur 2 lockupfre cach present first second bar ap stall load miss ep starv time miss latenc increas ap cycl count far ep cycl count ap execut time becom bound limit global perform decoupl hardli hide memori latenc natur figur 2 issu slot breakdown sever decoupl architectur show effect lockupfre cach storeload forward mechan 8 kb l1 cach size none forwd lfree lfree forwd none forwd lfree lfree forwd configuration1030507090of issu slot wrongpath instr idl wait operand fu wait operand memori block miss stld hazard use work stall structur hazard lockupfre cach use kind stall almost elimin third fourth bar cours uncov overlap caus overal improv perform achiev impress 23 speedup 098 232 ipc memori data hazard occur store fp load detect memori disambigu storeload forward enabl first third bar memori hazard produc stall ap store issu cach addit caus slippag reduct two unit call event loss decoupl lod 2 35 may expos ep penal memori latenc case subsequ load miss amount slippag reduct ap ep caus memori hazard depend close load schedul match store result depict figur 2 show ap stall label stld hazard almost complet remov storeload forward enabl howev averag improv ep perform almost neglig overal ipc increas 18 latter fact suggest either store schedul enough advanc match load littl probabl get subsequ miss final full featur configur fourth bar graph observ major sourc wast slot ep true data depend regist operand label wait operand fu stall less caus miss label wait operand memori notic although mani load ep regist load ap regist stall caus miss similar processor unit integ load miss produc higher penalti clearli illustr next section 33 latenc hide effect interest decoupl architectur close relat abil hide high memori latenc without resort complex issu mechan latenc hide potenti decoupl processor depend strongli decoupl behaviour program test program schedul abil compil remov lod event forc ap ep synchron also key factor howev compil use digit f77 especi tailor decoupl processor therefor sinc latenc hide effect decoupl provid basi propos multithread decoupl architectur order valid conclus interest assess base architectur without specif compil support purpos run 10 benchmark extern l2 cach latenc vari 1 256 cycl simul assum architectur paramet describ section 2 except architectural51525 l2 latenc cycles51525 averag perceiv fpload miss latenc cycl tomcatv su2cor hydro2d mgrid applu turb3d apsi tomcat swim su2cor hydro mgrid applu turb3d apsi fpppp wave5 benchmark2060100 miss latenc store loads20601001401 l2 latenc cycles2060100140averag perceiv iload miss latenc cycl tomcatv su2cor hydro2d mgrid applu turb3d apsi l2 latenc cycl loss su2cor hydro2d mgrid applu turb3d apsi figur 3a perceiv miss latenc fp load figur 3b perceiv miss latenc integ load figur 3c miss ratio load store l2 latenc 256 cycl figur 3d impact latenc perform loss rel 1cycl l2 latenc case queue physic regist file scale proport l2 latenc addit perform also measur separ averag perceiv latenc integ fp load miss sinc interest particular benefit decoupl independ cach miss ratio averag includ load hit perceiv latenc fp load miss measur ep stall caus miss reveal decoupl behavior program ie amount slippag ap respect ep shown figur 3a except fpppp 96 fp load miss latenc alway hidden perceiv latenc integ load miss measur ap stall caus miss depend abil compil schedul integ load ahead depend instruct shown figur 3b fpppp su2cor turb3d wave5 program experi largest integ load miss stall regard impact l2 latenc perform see figur 3d although program like fpppp turb3d quit high perceiv load miss latenc hardli perform degrad due extrem low miss ratio depict figur 3c perform degrad program high perceiv miss latenc signific miss ratio hydro2d wave5 su2cor summar perform littl affect l2 latenc either hidden effici tomcatv swim mgrid applu apsi miss ratio low fpppp turb3d serious degrad program lack featur su2cor wave5 hydro2d hidden miss latenc fp load depend good decoupl behavior program integ load reli exclus static instruct schedul 4 multithread decoupl architectur shown previou section stall decoupl processor may remov except caus true data depend regist operand ep figur 2 right label wait operand fu restrict abil inord issu model exploit ilp ap ep provid dynam schedul capabl stall could also remov simultan multithread smt dynam schedul techniqu increas processor throughput exploit thread level parallel multipl context simultan activ compet issu slot function unit previou studi smt focus sever dynam instruct schedul mechan 4 11 37 36 among other decoupl paper analyz potenti implement decoupl processor still refer simultan although obviou substanti differ origin smt retain key concept issu differ thread singl cycl sinc decoupl provid excel memori latenc toler multithread suppli enough amount parallel remov remain stall expect import synergist effect new microarchitectur combin two techniqu section present evalu perform memori latenc toler multithread decoupl accessexecut architectur analyz mutual benefit techniqu especi miss latenc larg 41 architectur overview propos multithread decoupl architectur figur 4 thread execut decoupl mode share function unit data cach thread base memori subsystem store addr figur 4 scheme multithread decoupl processor instruct reg file reg file map tabl regist fetch dispatch renam multithread decoupl architectur base decoupl design previou section extens run 6 thread issu 8 instruct per cycl 4 ap 4 ep 8 function unit l1 lockupfre data cach augment 4 port fetch dispatch stage includ branch predict regist map tabl regist file queue replic context issu logic function unit data cach share thread model thread allow compet 8 issu slot cycl prioriti among determin pure roundrobin order similar full simultan issu scheme report 37 cycl two thread access cach fetch 8 consecut instruct first taken branch chosen thread less instruct pend dispatch similar rr28 icount scheme report 36 42 experiment evalu multithread decoupl simul fed differ trace correspond independ thread trace everi thread built concaten first 10 million instruct 10 trace use previou section thread use differ permut thu total 100 million instruct per thread way thread differ trace balanc workload similar missratio etc figur 5 show wast issu slot vari number thread 1 6 sinc differ thread may candid slot lose differ caus order character loss perform classifi wast issu slot proport caus prevent individu thread issu 43 wast issu slot multithread decoupl architectur first column figur 5 repres case singl thread reveal expect major bottleneck caus ep function unit latenc caus lack parallel inord issu polici discuss section 3 two context ad multithread mechan reduc drastic stall unit produc 231 speedup 268 ipc 619 ipc sinc 3 thread ap function unit nearli satur 907 neglig addit speedup obtain ad context 665 ipc achiev 4 thread notic although ap almost achiev maximum throughput ep function unit satur due load imbal ap ep therefor effect peak perform reduc 17 8 665 ipc problem could address differ choic number function unit processor unit beyond scope studi anoth import remark number thread increas combin work set larger miss ratio increas progress put greater demand extern bu bandwidth averag pend miss thu increas effect load miss latenc increas ep stall caus wait operand memori see rightmost graph figur 5 hand ap stall due integ load miss see operand memori leftmost graph figur 5 almost elimin multithread sinc load benefit decoupl number threads1030507090of issu cycl idl wait operand fu wait operand memori use work number threads1030507090of issu cycl empi iqueu wait operand fu wait operand memori use work figur 5 ap left ep right issu slot breakdown multithread decoupl architectur 44 latenc hide effect multithread decoupl two differ approach toler high memori latenc run experi similar section 33 multithread decoupl processor 1 4 context quantifi latenc toler addit experi also carri reveal contribut mechan latenc hide effect consist set ident run degener version multithread architectur instruct queue disabl ie nondecoupl multithread architectur figur 6a show averag perceiv load miss latenc point view individu thread 8 configur mention vari l2 latenc 1 256 cycl metric express averag number time instruct schedul thread issu operand depend pend load miss figur 6b show correspond rel perform loss respect 1cycl l2 latenc 8 configur notic metric compar toler architectur memori latenc rather absolut perform sever conclus drawn graph first observ figur 6a averag load miss latenc perceiv individu thread quit low decoupl enabl less 6 cycl l2 latenc 256 cycl much higher decoupl disabl second load miss latenc perceiv individu thread slightli longer thread run although thread effect reduc number stall cycl thread also increas miss ratio due larger combin work set produc longer bu content delay becom slightli domin effect third shown figur 6b l2 memori latenc increas 1 cycl cycl decoupl multithread architectur experi perform drop less 36 less 15 4 thread perform degrad observ non decoupl configur greater 23 even huge memori latenc 256 cycl perform loss decoupl configur lower 39 greater 79 nondecoupl configur fourth multithread provid addit latenc toler improv especi nondecoupl configur much lower latenc toler provid decoupl conclus drawn figur 6c multithread rais perform curv decoupl make flatter word main effect l2 latenc cycles1030507090110 perceiv load miss l2 latenc cycl loss rel tocycl latenc figur 6a averag perceiv load miss latenc individu thread figur 6b latenc toler perform loss rel 1cycl l2 latenc case figur 6c contribut decoupl multithread performance13571 l2 latenc cycles1357ipc 4 decoupl 3 decoupl decoupl 4 nondecoupl 3 nondecoupl nondecoupl nondecoupl multithread provid throughput exploit thread level parallel major contribut memori latenc toler relat slope curv come decoupl precis specif role decoupl play hybrid architectur 45 hardwar context reduct extern bu bandwidth bottleneck multithread power mechan highli improv processor throughput cost need consider amount hardwar resourc run experi illustr decoupl reduc hardwar context requir measur perform sever configur 1 8 context decoupl multithread architectur nondecoupl multithread architectur see figur 7a decoupl configur achiev maximum perform 3 4 thread non decoupl configur need 6 thread achiev similar ipc ratio one tradit claim multithread approach abil sustain high processor throughput even system high memori latenc sinc hide longer latenc may requir higher number context well known strong neg impact memori perform reduct hardwar context requir obtain decoupl may becom key factor l2 memori latenc high illustr run previou experi l2 memori latenc 64 cycl shown figur 7b13571 2 3 4 5 6 7 8 number threads1357ipc decoupl nondecoupl number threads1357ipc decoupl nondecoupl figur 7a decoupl reduc number hardwar context figur 7b maximum perform without decoupl reach due extern bu satur decoupl architectur achiev maximum perform 4 5 thread nondecoupl architectur reach similar perform number thread would need mani would satur extern l2 bu averag bu util 89 12 thread 98 thread moreov notic decoupl architectur requir 3 thread achiev perform nondecoupl architectur 12 thread thu decoupl significantli reduc amount parallel requir reach certain level perform previou result suggest extern l2 bu bandwidth potenti bottleneck kind architectur describ impact measur perform bu util sever configur 1 6 hardwar context three differ extern bu bandwidth 8 16 32 bytescycl result shown figur 8a figur 8b 8 bytescycl bandwidth bu becom satur 3 thread run perform degrad beyond point summar decoupl multithread complement hide memori latenc increas ilp reduc amount threadlevel parallel low issu logic complex figur 8a ipc sever bu bandwidth figur 8b extern l2 bu util sever bu bandwidths2060100 number threads2060100 extern bu util cycl 8 bytescycl number threads1357ipc 8 bytescycl 5 summari conclus paper anal synergi multithread accessexecut decoupl multithread decoupl architectur aim take advantag latenc hide effect decoupl potenti multithread exploit ilp analyz import factor determin perform synergist effect paradigm multithread decoupl architectur hide effici memori latenc averag load miss latenc perceiv individu thread less 6 cycl worst case 4 thread l2 latenc 256 cycl also found l2 latenc lower cycl impact perform quit low less 35 ipc loss rel 1 cycl latenc scenario quit independ number thread howev impact greater 23 ipc loss decoupl disabl latter fact show main contribut memori latenc toler correspond decoupl mechan architectur reach maximum perform thread significantli less nondecoupl architectur number simultan activ thread support architectur signific impact hardwar chip area eg number regist instruct queue complex eg instruct fetch issu mechan consequ clock cycl reduc number thread also reduc cach conflict requir memori bandwidth usual one potenti bottleneck multithread architectur shown extern l2 bu bandwidth becom bottleneck miss latenc 64 cycl decoupl disabl prevent achiev maximum perform number thread summari conclud decoupl multithread techniqu complement exploit instruct level parallel hide memori latenc particular combin obtain maximum perform thread reduc issu logic complex hardli perform degrad wide rang l2 latenc featur make promis altern futur increas clock speed issu width 6 r decoupl accessexecut architectur effici access structur data effect decoupl perform studi softwar hardwar data prefetch scheme concurr execut multipl execut stream superscalar processor alpha 21164 microprocessor hardwar refer manual multiclust architectur reduc cycl time partit pipe vlsi decoupl architectur p6 use decoupl superscalar design digit 21264 set new standard hp make epic disclosur elementari processor architectur simultan instruct issu multipl thread design tfp microprocessor superscalar microprocessor design limit studi access decoupl improv directmap cach perform addit small fullyassoci cach prefetch buffer pew decentr dynam schedul ilp process memori latenc effect decoupl architectur powerpc 620 decoupl integ execut superscalar processor structur memori access architectur exploit idl floatingpoint resourc integ execut studi branch predict strategi decoupl accessexecut comput architectur implement precis interrupt pipelin processor simul studi decoupl architectur comput multiscalar processor atom system build custom program analysi tool standard perform evalu corpor effici algorithm exploit multipl arithmet unit compil optim decoupl architectur exploit choic instruct fetch issu implement simultan multithread processor simultan multithread maxim onchip par allel misc multipl instruct stream comput evalu wm architectur mip r10000 superscalar microprocessor tr simul studi decoupl architectur comput zs1 central processor highbandwidth data memori system superscalar processor elementari processor architectur simultan instruct issu multipl thread evalu wm architectur misc effect decoupl atom design tfp microprocessor compil optim decoupl architectur simultan multithread multiscalar processor decoupl integ execut superscalar processor exploit choic complexityeffect superscalar processor trace processor multiclust architectur exploit idl floatingpoint resourc integ execut perform model code partit ds architectur improv directmap cach perform addit small fullyassoci cach prefetch buffer implement precis interrupt pipelin processor decoupl accessexecut comput architectur mip r10000 superscalar microprocessor memori latenc effect decoupl architectur limit studi access decoupl powerpc 620 microprocessor lockupfre instruct fetchprefetch cach organ studi branch predict strategi costeffect cluster architectur latenc hide effect decoupl accessexecut processor