trapdriven simul tapeworm ii tapeworm ii softwarebas simul tool evalu cach tlb perform multipletask oper system intens workload tapeworm resid os kernel caus host machin hardwar drive simul kernel trap instead address trace convent done allow tapeworm quickli accur captur complet memori referenc behavior limit degrad overal system perform paper compar trapdriven simul implement tapeworm common techniqu tracedriven memori simul respect speed accuraci portabl flexibl b introduct tracedriven simul probabl popular method evalu memori system architectur consist cach tlb smith82 holliday91 techniqu work well design memori system support singletask user intens applic found spec benchmark suit gee93 spec91 howev grow bodi work show memori system tune type work trapdriven simul tapeworm ii richard uhlig david nagl trevor mudg stuart sechrest depart electr engin comput scienc univers michigan email uhligeecsumichedu bassooneecsumichedu work support defens advanc research project agenc darpaaro contract number daal0390c0028 nation scienc foundat cise research instrument grant cda 9121887 digit equip corpor grant nation scienc foundat graduat fellowship load perform well interact digitalmedia appli cation distribut file system databas requir frequent interact oper system task agarwal88 anderson91 chen93a cvetanovic94 mogul91 nagle93 nagle94 uhlig94b ousterhout89 unfortun tracedriven simul tool limit singl usermod task thu captur signific portion memori system activ applic tracedriven simul oscap tend reli expens hardwar monitor equip gener portabl develop softwarebas tool call tapeworm ii attempt overcom limit tapeworm simul driven trace trap oper system kernel tapeworm resid kernel trap correspond simul tlb cach miss approach three princip advantag 1 complet 2 speed 3 portabil iti tapeworm simul complet trap origin user task even os kernel tapeworm fast simul invok uncommon case tlb cach miss final tapeworm softwar base port system provid support certain primit despit advantag method suffer certain drawback although capabl simul tlb cach differ size associ trapdriven simul gener less flexibl tracedriven approach respect simul architectur structur write buffer instruct pipelin tapeworm presenc system also introduc new form measur bia though strictli disadvantag trapdriven simul also sensit inher variat memori system perform issu gener ignor tracedriven simul studi paper present detail descript tapeworm design section 3 use prototyp compar strength weak trapdriven simul tracedriven simul section 4 begin discuss relat work next section relat work captur multitask os activ memori architectur studi tradit reli hardwar instrument tech appear 6th intern confer architectur support program languag oper system asplosvi octob 57 1994 san jose california niqu either attach extra hardwar run system modifi exist hardwar microcod design architectur agarwal86 alexander85 clark83 cvetanovic94 flanagan92 nagle92 torrellas92 unfortun hardwar approach costli implement usual tie singl machin overcom limit recent research extend softwareonli instrument techniqu includ multiprocess os activ mogul borg describ system task multitask workload instrument make entri systemwid trace buffer mogul91 amodifi oper system kernel interleav execut differ userlevel workload task accord usual schedul polici invok memori simul whenev trace buffer becom full chen extend techniqu includ annot os kernel thu enabl complet account system activ chen93b simul avoid trace entir driven instead kernel trap tool use privileg machin oper caus underli host hardwar filter hit simul memori structur trap simul miss one exampl approach first gener tapeworm perform tlb simul nagle93 uhlig94a system intercept kernel trap softwaremanag tlb miss handler r2000base decstat drive tlb simul user kernel miss intercept tapeworm abl fulli consid multitask os effect differ tlb configur talluri describ similar trapdriven tlb simul run sparcbas workstat talluri94 anoth exampl wisconsin wind tunnel wwt simul also base kernel trap set clear modifi errorcorrect code ecc check bit sparcbas cm5 reinhardt93 unlik tapeworm perform uniprocessor simul includ multitask kernel refer wwt design investig multiprocessor cach coher algorithm captur os activ work share properti tracedriven trapdriven simul cmelik94 lebeck94 martonosi92 hybrid approach annot program invok simul handler everi memori refer system simul optim call null handler memori locat known simul cach tlb paper advanc previou work two signific way first describ design secondgener tapeworm combin oscap featur origin tapeworm tlb simul wwtlike mechan set finegrain memori trap result simul capabl cach tlb simul captur multitask os kernel activ second use tapeworm prototyp investig posit neg aspect trapdriven simul gener paper primarili studi pro con trap driven simul exampl actual studi oper system architectur interact use tapeworm see nagle93 nagle94 uhlig94b 3 tapeworm design 31 tapeworm algorithm tapeworm simul algorithm best explain contrast essenti featur tradit tracedriven simul shall use term cach follow di cussion although method appli equal well tlb simul core tracedriven simul execut loop similar shown left side figur 1 process step includ obtain next address trace search address simul cach invok replac polici event miss trace address come file creat traceextract tool might gener fli annot workload agarwal86 borg90 chen93b cmelik94 eggers90 holliday91 hsu89 larus90 larus93 magnusson93 mips88 mogul91 sites88 smith91 search procedur involv index data structur repres cach depend associ cach perform one comparison test hit though simpl oper search test must perform everi address trace tapeworm oper differ principl driven address trace trap oper system kernel tapeworm resid tapeworm begin simul set trap memori locat workload address space locat trap set repres memori locat current resid simul cach structur workload execut first refer locat caus trap kernel direct tapeworm simul trap repres simul cach miss need search data structur repres simul cach tapeworm simpli count miss clear trap requir memori locat clear trap effect cach memori locat figur 1 tracedriven versu trapdriven simul algorithm core execut loop tracedriven trapdriven simul code abstract away mani detail actual simul treatment write assign penalti differ type miss eg criticalwordfirst cach singlepass simul usi ng stack algorithm also complex structur mattson70 sugumar93 thompson89 trapdriven kernel trap invok twmissaddress twmissaddress tracedriven address nextaddresstrac searchaddress els simul cach structur subsequ refer locat trap proceed full hardwar speed tapeworm set new trap differ memori locat accord replac polici emul displac simul cach structur tapeworm design offer number advantag tracedriven simul first annot rewrit workload requir trap dynam set clear workload run second tapeworm kernel privileg allow easili set trap userlevel task well kernel enabl studi multitask os interact third tapeworm use underli hardwar filter hit simul cach structur provid speed advantag convent tracedriven simul see section 41 32 tapeworm primit although outlin core tapeworm algorithm number import detail mechan set memori trap polici regist workload page tapeworm need clarifi tabl 1 describ key tapeworm primit tapeworm oper set clear trap perform twsettrap twcleartrap implement mani machin use variou privileg oper intend diagnost debug see tabl 2 exampl trap set use diagnost mode alter pariti bit given memori locat rein hardt93 subsequ use memori locat result memori pariti error trap trap clear restor correct pariti memori locat mechan tabl 1 tapeworm primit detail routin descript set memori trap start pa physic address extend size byte subsequ use memori locat region trap kernel pass control tapeworm previous set memori trap start pa extend size byte subsequ use memori region workload may proceed uninterrupt twregisterpagetid p v regist page tapeworm page ad set trap physic memori locat start page address p task id tid virtual physic page map defin pv record tapeworm enabl virtuallyindex physicallyindex cach simul twremovepagetid p v remov page defin tid p v tapeworm domain page remov flush simul cach clear trap memori locat twattributestid simul inherit set tapeworm attribut task identifi tid tid zero signifi kernel nonzero valu simul regist task tapeworm nonzero valu inherit indic initi valu simul attribut children task twreplacetid pa va insert miss memori locat defin pa physicallyindex cach va virtuallyindex cach data structur simul cach need tid use form part cach tlb tag displac entri select basi variou simul paramet cach size line size associ return call instruct data breakpoint page valid bit work equal well support host hardwar twsettrap twcleartrap accept size paramet support rang simul paramet variou page size tlb simul variou line size cach tabl 2 privileg oper use trapdriven simul tabl summar privileg oper use build block trapdriven memori simul common oper mani exist architectur see tabl 12 privileg oper descript memori pariti ecc trap trap os kernel detect memorypar iti error read write oper enabl softwar chang pariti bit associ memori locat instruct break point trap os kernel breakpoint instruct encount data breakpoint trap os kernel specif data memori locat read written size support differ size page typic page size rang 128 byte 1mbyte ns r uc counter count total number instruct execut processor simul actual trap mechan select underli implement routin depend size trap requir tlb simul granular larg page valid bit effect particularli machin support variabl page size memori pariti trap breakpoint perhap set cluster one best choic cach sim ulat requir granular order cach line use memori pariti ecc check bit caus kernel trap interfer intend purpos detect true memori error practic problem memori error frequent possibl distinguish true ecc error caus tapeworm experi neither condit true tapeworm inact system run log one true singlebit ecc error nearli year oper even tapeworm activ correctli detect true memori error high probabl 1 note previous workload requir previou modif tapeworm simul trap set clear dynam task run work tapeworm requir assist os virtual memori vm system task fault first access page vm system regist page tapeworm use twregisterpag call page mark valid vm system set trap memori locat page futur refer part page invok tapeworm cach miss handler 2 parallel routin call twremovepag use vm system remov page tapeworm domain unmap due task termin page secondari storag twremovepag clear trap page flush simul cach mimic action perform vm system host machin real cach vm system map one virtual page given physic page must still regist map tapeworm use twregisterpag situat tapeworm increment refer count physic page set new memori trap enabl new task benefit share entri brought cach anoth task would happen real system similarli twremovepag decrement refer count flush page simul cach refer count reach zero minor modif twregisterpag twremovepag primit enabl tapeworm support form cach set sampl enhanc speed implement tracedriven simul set sampl use filter trace contain exactli address map certain subset cach set kessler91 puzak85 miss locat use form estim total number cach miss less trace use set sampl reduc tracedriven simul time preprocess overhead construct trace sampl rather filter address softwar obtain sampl tapeworm exploit trap framework make host hardwar perform function much lower cost accomplish modifi twregisterpag set trap memori locat map specif cach set given sampl memori loca 1 implement tapeworm decstat 5000200 make use singleerror correct doubleerror detect ecc code trap set flip specif ecc check bit among 7 total check bit assign 32 bit data tapeworm detect singlebit error 38 check data bit posit detect doublebit error know true error occur 2 case tlb simul page valid bit may use tapeworm set trap extra bit maintain softwar indic true state page resid physic memori tion part sampl never caus miss trap effect filter simul overhead result tapeworm slowdown decreas direct proport degre sampl addit benefit method differ sampl obtain simpli chang pattern trap regist tapeworm page tracedriven simul full trace must reprocess obtain new set sampl tapeworm support cach simul workload consist multipl task control task includ given simul assign twotapeworm attribut simul inherit store extend version os task data structur attribut set call twattribut task identifi specifi task assign new attribut zero task identifi use indic os kernel simul zero default valu task run system without intervent tapeworm nonzero simul indic current futur page touch task must regist tapeworm via twregisterpag call second attribut inherit defin initi valu simul children task word task fork child task inherit tapeworm attribut parent follow childsimul parentinherit childinherit parentinherit differ set simul inherit pair use common simul situat exampl attribut set shell task workload start shell workload children regist tapeworm shell task howev exclud simul inherit mechan greatli simplifi simul workload complex task fork tree sdet kenbu multistag optim compil see tabl 4 anoth common attribut use task children simul combin use regist kernel page tapeworm final primit tabl 1 twreplac direct analogu replac routin tracedriven simul maintain data structur repres simul cach insert new entri select other displac accord predefin simul paramet implement entir softwar simul configur restrict way tlb cach structur underli host hardwar exampl simul cach may either smaller larger size cach underli host machin larger simul cach simpli set fewer trap workload memori locat similar adjust use twreplac simul differ line size associa tiviti well complex cach structur includ split unifi multilevel cach addit twreplac access actual virtualtophys page map establish vm system simul either virtual physic cach index 33 design summari tapeworm kernel privileg work close cooper vm system includ page task well kernel inherit tapeworm attribut task fork greatli simplifi problem captur activ complex multitask workload allow differ combin task cach effect simul tapeworm attribut enabl experi measur isol task interfer effect final fulli optim common case cach hit use set sampl tapeworm fast 4 tapeworm implement experi implement tapeworm tlb instruct cach simul mach 30 oper system kernel run mip r3000base decstat 5000200 hardwar mechan select set clear trap page valid bit ecc check bit section use implement studi effect tapeworm design meet three main goal simul complet speed portabil iti also discuss difficulti encount implemen tation suggest inexpens hardwar support could increas tapeworm flexibl enhanc speed valid accuraci tapeworm result assist comput metric miss ratio use hardwar monitor system call monster base da 9200 logic analyz nagle92 system allow us unobtrus count total instruct stall cycl comparison tracedriven simul use cache2000 memori simul mips88 driven pixiegener trace smith91 note pixi gener userlevel address trace singl task widespread use pixi make repres tracedriven simul environ tabl 3 tabl 4 summar workload use studi except spec92 benchmark xlisp espresso eqntott common characterist workload consist multipl task andor spend signific fraction time execut os servic 41 speed origin implement tapeworm miss handler written entir c requir 2000 cycl exe cute similar cycl count 2500 similar oper wisconsin wind tunnel simul lebeck94 optim handler rewrit entir assembl code bypass usual kernel entri exit code new code requir execut stack save minim number regist care code final optim handler requir 250 cycl handl simul miss directmap cach 4word line size see tabl 5 compon time higher degre associ slightli increas time twreplac longer cach line increas cost twsettrap twcleartrap simul differ cach size littl effect time although 250 cycl cost kernel trap greater averag cost gen tabl 3 workload summari benchmark compil ultrix mip c compil version 21 level 2 optim workload descript xlisp lisp interpret written c configur solv 8queen problem spec92 benchmark espresso boo l ean funct benchmark eqntott translat logic represent boolean equat truth tabl spec92 benchmark mpegplay mpegplay v20 berkeley plateau research group display 610 frame compress video file patel92 jpegplay xloadimag program written jim frost display four jpeg imag ousterhout john ousterhout benchmark suit oust erhout89 sdet multiprocess system perform benchmark includ program test cpu perform os perform io perfor manc spec sdm benchmark suit kenbu simul user activ researchori softwar develop environ spec sdm benchmark suit tabl 4 workload oper system summari monster monitor system use obtain instruct count fraction time spent differ task experi perform mach 30 kernel version mk77 userlevel bsd unix server version uk38 decstat x display server version 7 releas 5 run time total elaps time second user task count total number task creat includ x bsd server execut workload workload instr run time sec kernel bsd server server user task user task count espresso 534 2680 29 19 00 951 1 mpegplay 1423 9553 241 273 40 446 1 jpegplay 1793 8970 91 94 26 788 1 ousterhout 567 3789 480 314 00 206 15 sdet 823 4370 437 355 00 208 281 kenbu 176 2313 489 291 00 220 238 erat process trace address 40 60 cycl per address cache2000 pixi tapeworm trap occur miss tracedriven simul must consid address whether hit miss suggest rough breakeven ratio 4 hit 1 miss 1 tapeworm becom slower 1 breakeven point approxim amount process differ hit miss averag number cycl per address cache2000 vari depend ratio hit miss tabl 5 tapeworm miss handl time tabl show total number cycl requir handl tapeworm cach miss along compon handler number instruct time simul directmap cach 4word line size comparison also show averag number cycl per address hit miss cache2000 simu lation note averag includ time gener address onthefli pixieannot workload routin name instruct kernel trap return 53 cycl per miss tapeworm 246 cycl per address cache2000 53 cache2000 see bottom tabl 5 poorli perform cach exhibit miss ratio 020 higher tapeworm typic outperform tracedriven simul cache2000 moreov contrast tracedriven simul tapeworm work better larger cach thu smaller miss ratio best measur overal simul speed actual time requir perform simul interest comparison onthefli simul techniqu abl measur lengthi comput therefor defin slowdown ratio simul trap trace gener overhead run time uninstru workload overhead time ad workload run either tapeworm pixi cache2000 normal workload run time unmodifi run host machin decstat 5000200 figur show tapeworm slowdown vari cach size mpegplay workload comparison cache2000 simul slowdown decreas cach size increas differ reason tapeworm slowdown decreas nearli zero larger cach number trap tapeworm miss handler approach zero cache2000 slowdown decreas slightli less manipul data structur requir hit search miss search replac howev cache2000 slowdown never fall 20 even largest cach smallest size cach figur 2 comparison tracedriven tapeworm slowdown tapeworm slowdown compar cache2000 simul driven pixiegener instruct address trace simul mpegplay differ size directmap instruct cach 4word line 4 bytesword pixiecache2000 combin measur singletask workload tapeworm attribut set measur activ mpegplay task exclud x display server bsd unix server kernel refer howev slowdown case comput use total wallclock run time workload includ time x bsd server cach size miss cach 2000 slowdown tapeworm slowdown slow cach size kbyte slowdown tapewormoverhead normal workload runtim slowdown pixi cache2000overhead normal workload runtim 1 kbyte miss ratio 0118 tapeworm still outperform cache2000 factor 3 although simul cach higher associ larger cach line increas tapeworm miss handl time slightli structur typic experi fewer miss overal thu actual lead faster simul figur 3 show tapeworm slowdown broader rang cach configur slowdown report thu far simul without sampl figur 3 illustr speed benefit set sam pling give result smallest cach size note tapeworm slowdown larger cach suffici small avoid need sampl altogeth notic slowdown decreas direct proport fraction set sampl ever sampl increas measur varianc examin effect addit sourc variat perform measur next section 42 complet accuraci section examin issu simul accuraci begin illustr import includ multitask kernel refer compar rel contribut differ workload compon user server kernel 1 overal icach miss count isol compon way also abl partial valid result compar user compon singleusertask workload pixiedriven figur 3 tapeworm slowdown differ simul configur figur left show tapeworm slowdown cach vari degre associ line size figur top show benefit set sampl term reduc slowdown increas degre sampl notat 12 mean half cach set sampl figur 2 workload mpegplay g g g g g slowdown cach size kbyte g 4 word g g g g g slowdown cach size kbyte g 1way 4way 8way g g g g g slowdown cach size kbyte g 11 116 sampl cache2000 simul next studi problem measur variat due os effect set sampl use variou tapeworm featur isol measur effect remov individu contribut effect overal measur varianc final conclud comment measur bia due tapeworm presenc run system miss contribut workload compon tabl 6 show typic icach miss count miss ratio workload 4 kbyte cach tabl show number miss kernel bsd x server user task allow run dedic cach 2 activ column give result workload compon share singl cach due cach interf 1 user task mean sever task children shell workload initi lump task togeth simul use tapeworm inherit attribut server task x display server bsd server exist prior initi workload refer server task kernel system compon workload 2 cach share multipl user task case kenbu sdet ousterhout enc among individu workload compon sum individu miss column less activ column note first spec92 benchmark eqntott espresso exhibit low miss count overal consist previou observ mani spec92 benchmark requir small icach run well gee93 server kernel contribut major total miss even contribut total number miss neglig workload mpegplay jpegplay sdet ousterhoutexhibit predomin server kernel miss much higher overal miss ratio ousterhout exampl total miss ratio 10 mostli due system compon interfer effect simul consid usertask compon ousterhout would incorrectli estim icach miss ratio less 1 workload suit greater fraction miss come user task xlisp incident perform much better cach slightli larger tabl miss count miss ratio contribut differ workload compon tabl give number miss million miss ratio parenthes differ workload compon data collect run separ trial workload run dedic directmap cach 4 kbyte 4word line whenev possibl eg singletask workload trace give miss ratio predict tracedriven simul use pixiecache2000 activ give total miss count workload compon share cach note cach interfer effect valu column greater sum individu compon differ shown last column entitl interfer miss ratio rel total number instruct workload instruct given workload compon henc miss ratio individu compon plu interfer sum total miss ratio given activ workload trace user task server kernel activ interfer espresso 160 0003 180 0003 228 0004 196 0004 953 0018 349 0007 jpegplay 298 0002 314 0002 1458 0008 921 0005 3628 0020 935 0005 kenbu 750 0043 1189 0068 1278 0073 4570 0260 1353 0077 mpegplay 3763 0027 3791 0027 3392 0024 1927 0014 1125 0079 2139 0015 ousterhout 193 0003 1862 0033 2172 0038 6139 0108 1912 0034 sdet 2014 0024 2518 0031 1809 0022 1046 0127 4125 0050 xlisp 8577 0061 9002 0064 631 0004 298 0002 1358 0096 3655 0026 note compar tapeworm miss count user task compon workload pixiedriven cache2000 simul purpos valid wherev comparison possibl ie singleusertask work load tapeworm miss count user portion workload nearli ident report cache2000 shall see next section measur variat bia make valid tapeworm result workload compon eg server kernel inher difficult problem sourc measur variat tracedriven simul trace given workload typic use repeatedli obtain perform measur differ memori configur result tracedriven simul exhibit varianc simul given memori configur repeat howev precis sequenc trap drive tapeworm simul impossi tabl 7 variat measur memori system perform measur includ 16 trial apiec taken use 18 set sampl consid activ includ kernel server simul line directmap physicallyindex cach x mean number miss standard deviat trial set number parenthesi percent mean valu rang percent differ mean valu minimum maximum workload minimum maximum rang espresso 491 293 60 345 30 1372 180 1028 209 jpegplay mpegplay 5848 701 12 4734 19 6895 18 2161 37 ousterhout 3150 261 8 2709 14 3503 11 794 25 sdet 4128 877 21 3258 21 6348 54 3090 75 tabl 8 variat due set sampl tabl isol degre set sampl vari cach perform measur tapeworm remov sourc variat consid activ espresso process kernel server simul virtuallyindex cach 4word line directmap two set data point measur without sampl consist 16 trial error bar plot repres one standard deviat size kbyte sampl tabl 9 variat due page alloc tabl show page alloc alon vari cach perform tapeworm remov sourc variat consid activ mpegplay process kernel server sampl two set data point physic virtuallyindex cach 4word line directmap data point averag 4 trial error bar plot repres one standard deviat size kbyte physic index 128 292 460 15 virtual index number cach size kbyte address cach virtual address cach averag number cach size kbyte ble reproduc run run dynam system effect exampl distribut physic page frame alloc task chang run run affect sequenc address seen physicallyindex cach kessler92 sites88 turn caus variat cach miss ratio anoth sourc measur perform varianc caus tapeworm employ set sampl result tabl 7 measur extent effect workload suit report statist multipl experiment trial measur simul byte physicallyindex cach use 18th sampl cach set note standard deviat differ measur trial rather larg rang 10 high 70 mean valu case minimum maximum valu differ mean much factor two isol measur variat caus set sampl remov pagealloc effect simul virtual index rather physicallyindex cach new trial perform without sampl result shown tabl 8 exampl espresso expect result without sampl show zero varianc multipl trial experi notic result without sampl consist predict slightli higher miss count sampl measur bia discuss complet next section due increas time dilat effect increas slowdown nonsampl experi tabl 9 show degre page alloc vari cach perform remov sampl variat simul workload mpegplay exampl physi callyindex virtuallyindex cach virtual index cach simul exhibit zero variat sequenc refer cach independ distribut physic page frame assign os run run essenti assumpt made tracedriven cach simul notic 4 kbyte physicallyindex cach simul result vari page size machin 4 kbyte page alloc appear page overlap cach 4 kbyte smaller physicallyindex cach greatest degre variat percent mean appear cach size 32 k byte roughli size program text use mpegplay variat decreas larger smaller cach observ consist probabilist model cach page conflict publish kessler91 kessler model predict random page alloc probabl cach conflict peak size cach roughli equal address space size workload decreas larger smaller cach final notic variat due page alloc compar larger set sampl suggest error introduc sampl reason trade increas speed simul physicallyindex cach cours combin effect sourc varianc greater either isol forc larger number trial perform increas level confid mean valu addit page alloc observ sourc memori system perform variat due os effect exampl observ gradual substanti increas tlb miss due kernel server memori fragment longrun system import note tapeworm sensit sourc perform variat necessit multipl experiment trial liabil perform variat due page alloc memori fragment real system effect consid necessari howev tapeworm simul configur remov effect produc measur less variat like tradit tracedriven simul exampl shown tabl 10 sourc measur bia tapeworm presenc kernel workload oper rais question measur bia although tapeworm care avoid set trap code data never directli chang miss count indirect way tapeworm alter result first 256 kbyte physic memori alloc tapeworm boot time remov 64 page free memori pool result possibl increas page activ minim problem ad enough addit physic memori page avoid altogeth second sourc error caus tapeworm slowdown result system time dilat effect caus clock interrupt run workload lead increas cach conflict miss figur 4 plot magnitud error induc time dilat notic error grow steepli slowdown 0 2 level larger slowdown tapeworm slowdown 4 bia tend 10 amount slowdown vari workload tabl 10 measur variat remov measur made tabl 7 variat due sampl page alloc remov accomplish configur tapeworm simul virtuallyindex cach without set sampl workload minimum maximum rang espresso 426 006 1 421 1 430 1 009 2 jpegplay 2060 006 0 2056 0 2064 0 008 0 mpegplay 5316 006 0 5312 0 5320 0 008 0 ousterhout 3469 122 4 3383 2 3555 2 172 5 sdet 4123 000 0 4122 0 4123 0 000 0 workload time dilat remov simpl adjust clock interrupt frequenc done borg90 chen93b collect time dilat curv larger set workload determin shape magnitud figur 4 possibl adjust simul result factor away form systemat error final sourc bia relat mask certain tapeworm memori trap decstat 5000200 singlebit ecc error rais hardwar interrupt line caus kernel trap interrupt disabl kernel trap occur result reduct cach miss seen tapeworm kernel run interrupt mask limit affect kernel refer small fraction kernel code affect special code around region help tapeworm take cach effect account 43 portabl eas portabl tapeworm care partit hardwaredepend hardwareindepend section minim amount code actual run ker nel control system call interfac userlevel x figur 4 error due time dilat increas cach miss due time dilat measur mpegplay workload includ system activ kernel server run physicallyaddress 4 kbyte directmap icach 4word line time dilat vari chang degre sampl dilat increas 208 9570 57 442 9966 101 increas dilat slowdown applic see tabl 11 hardwaredepend code consist primarili modifi kernel entri code two routin twsettrapandtwcleartrap principl implement mani machin see tabl 12 practic unexpect interact compon memori system hinder attempt implement primit archi tectur exampl port tapeworm decstat 5000200 decstat 5000240 hinder due differ way dma implement two machin intent hardwar support primit could help avoid problem also reduc time set clear trap implement oper perform issu convolut sequenc control instruct mem orycontrol asic implement ecc logic piec togeth memori address ecc error ie address tapeworm cach miss also requir dozen load shift add mask instruct could support singl load believ cleaner interfac diagnost function memori asic could reduc total misshandl time 50 cycl increas tapeworm speed anoth factor 5 1 although expens direct support form trap bit memori locat could decreas cost set clear trap support would use applic debugg distribut share memori appel91 despit problem port tapeworm run osf1 mach 30 oper system decstat 3100 decstat 5000200 486base gateway pc 44 flexibl respect flexibl tapeworm troubl simul memori structur fit cach model exampl write buffer queue hold content short time simul tapeworm algo rithm limit restrict simul writeback write polici furthermor unlik tracedriven simul easili effici extend simul architectur structur instruct pipelin trapdriven approach seem limit simul memori system hierarchi compon problem flexibl inher trapdriven simul relat specif limit host hardwar exampl decstat 5000200 ecc bit check 4word cach line refil effect limit simul tapeworm cach line size multipl 4 word machin attempt implement data cach simul particular machin hinder allocateonwrit polici caus ecc trap clear without invok tapeworm miss handler machin use allocateonwrit polici data cach simul possibl reinhardt93 final although miss count provid 1 similar oper perform miss handler r3000 softwaremanag tlb requir 20 cycl tabl 11 tapeworm code distribut code line machinedepend kernel code 343 5 machineindepend kernel code 889 13 machineindepend user code 5652 82 tapeworm use metric right studi requir measur miss ratio miss per instruct mpi obtain instruct count use logic analyz much conveni method would onchip instruct counter case intent hardwar support trapdriven simul primit could overcom problem 5 summari futur work develop tapeworm demonstr onthefli cach tlb simul driven kernel trap greatli simplifi problem evalu memori structur workload includ multipl task oper system load moreov measur tapeworm perform show simul perform rather small degrad overal system perform open import new area consider fast simul creat possibl examin wider rang altern configur investig variabl result repeat run workload simul driven memori refer gener actual user session tapeworm slowdown made impercept user make possibl watch interest case identifi tradit batch simul use continu monitor simul open possibl use result perform realtim hardwar softwar tune futur gener simul monitor driven kernel trap would benefit better hardwar support gener trap read write particular memori locat better support result even faster flexibl simul continu develop add featur tapeworm simul current ad datacach simul capabl port tapeworm architectur includ dec alphabas workstat sparcbas machin 6 acknowledg thank joel emer bill grundmann essenti inform decstat 5000200 memorycontrol asic thank also go alessandro forin help mach tabl 12 privileg oper modern microprocessor entri tabl taken varieti sourc includ data book text book microprocessor report mreport92 mreport93 given entri may true everi implement given processor featur memoryparityerror trap actual systemimplement depend featur affirm entri mean found least one system given microprocessor implement featur blank entri mean insuffici data avail privileg oper mip r3000 mip r4000 sparc dec alpha tera intel intel pentium power memori pariti ecc trap ye ye ye ye ye ye instruct breakpoint invalid page trap variabl page size instruct counter 30 trap handler chihchieh lee implement 486 tapeworm port r cach perform oper system multiprogram workload atum new techniqu captur address trace use micro code translat buffer perform unix environ interact architectur oper system design virtual memori primit user program gener analysi long address trace softwar method system address trac ing impact oper system structur memori system perform cach perform vax11780 fast instructionset simul execut profil character alpha axp perform use tp spec work load techniqu effici inlin trace sharedmemori multiprocessor bach byu address collect hardwar cach perform spec92 benchmark suit techniqu cach memori simul use address refer trace introduct shade analysi multimegabyt secondari cpu cach memori page placement algorithm larg realindex cach abstract execut techniqu effici trace program effici program trace new abstract memori system simul design effici simul multiprocessor effect trace sampl perform debug tool evalu techniqu storag hierarchi effect context switch cach perform monster tool analyz interact oper system comput architectur design tradeoff softwaremanag tlb optim alloc onchip memori multipleapi oper system arent oper system get faster fast hardwar perform softwar mpeg video decod wisconsin wind tunnel virtual prototyp parallel comput er multiprocessor cach analysi atum cach memori trace pixi surpass tlb perform superpag less oper system support character cach synchron perform multiprocessor oper system design tradeoff softwaremanag tlb tr atum new techniqu captur address trace use microcod cach perform oper system multiprogram workload multiprocessor cach analysi use atum effici stack algorithm analysi writeback sector memori techniqu effici inlin trace sharedmemori multiprocessor effect context switch cach perform virtual memori primit user program interact architectur oper system design memspi analyz memori system bottleneck program page placement algorithm larg realindex cach character cach synchron perform multiprocessor oper system design tradeoff softwaremanag tlb wisconsin wind tunnel effect trace sampl perform debug tool impact oper system structur memori system perform shade fast instructionset simul execut profil kernelbas memori simul extend abstract design tradeoff softwaremanag tlb character alpha axp perform use tp spec workload optim alloc onchip memori multipleapi oper system surpass tlb perform superpag less oper system support cach memori cach perform vax11780 translat buffer perform unix enviro effici program trace cach perform spec92 benchmark suit design effici simul multiprocessor ctr shubhendu mukherje steven k reinhardt babak falsafi mike litzkow mark hill david wood steven husslederman jame r laru wisconsin wind tunnel ii fast portabl parallel architectur simul ieee concurr v8 n4 p1220 octob 2000 emmett witchel mendel rosenblum embra fast flexibl machin simul acm sigmetr perform evalu review v24 n1 p6879 may 1996 herv jamrozik michael j feeley geoffrey voelker jame evan ii anna r karlin henri levi mari k vernon reduc network latenc use subpag global memori environ acm sigplan notic v31 n9 p258267 sept 1996 alvin r lebeck david wood activ memori new abstract memorysystem simul acm sigmetr perform evalu review v23 n1 p220230 may 1995 fast dataloc profil nativ execut acm sigmetr perform evalu review v33 n1 june 2005 alvin r lebeck david wood activ memori new abstract memori system simul acm transact model comput simul tomac v7 n1 p4277 jan 1997 madhusudhan talluri mark hill surpass tlb perform superpag less oper system support acm sigplan notic v29 n11 p171182 nov 1994 babak falsafi david wood model costperform parallel comput simul acm transact model comput simul tomac v7 n1 p104130 jan 1997 richard uhlig david nagl trevor mudg stuart sechrest joel emer instruct fetch cope code bloat acm sigarch comput architectur news v23 n2 p345356 may 1995 richard uhlig trevor n mudg tracedriven memori simul survey acm comput survey csur v29 n2 p128170 june 1997