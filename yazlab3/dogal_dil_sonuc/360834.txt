diamond quorum consensu high capac effici replic databas system mani quorum consensu protocol propos manag replic data distribut environ advantag replic databas system nonrepl one includ high avail low respons time note multipl site act multipl agent time multipl request handl parallel featur lead desir consequ high workload capac paper defin new metric readcapac featur propos new protocol call diamond quorum consensu two major properti superior previou protocol major tree grid hierarch quorum consensu 1 highest readcapac 2 smallest optim read quorum size 2 show two featur achiev without jeopard avail small quorum size signific featur relat messag cost previou work quorum consensu discuss handl partit failur mani case depend quorum consensu protocol show use gener virtual partit protocol handl partit failur case diamond quorum consensu b introduct replic databas system built distribut environ multipl site copi data store multipl site main motiv replic databas improv reliabl perform store data multipl site databas system continu oper even site fail also multipl site make possibl support multipl concurr oper differ set site major problem replic data need ensur data consist spite concurr oper reliabl concurr control protocol necessari synchron user transact order maintain data valid exampl two write oper two differ user transact must allow simultan updat differ copi data object order achiev kind synchron among multipl copi addit commun process cost incur problem synchron way cost minim one wellstudi approach manag replic data use certain set replica call read write quorum read write oper respect write quorum least one copi common everi read quorum everi write quorum exampl write quorum could set contain major copi 18 better perform logic structur impos network quorum chosen consider structur logic structur includ tree 2 1 3 20 grid 4 11 structur geometr approach deal logic structur propos 12 number metric use evalu protocol includ follow 1 avail 2 quorum size best case worst case 3 algorithm fulli distribut 4 cost one node failur worst case 5 messag overhead 6 commun delay first metric avail studi extens signific decreas system tend reliabl protocol need high avail reason reliabl environ metric 2 list 10 quorum size also wellstudi issu relat messag cost 10 n algorithm 13 fulli distribut algorithm achiev smallest quorum size protocol 16 bigger quorum size remedi avail problem 13 third metric whether copi assum equal burden synchron exampl tree quorum fulli distribut node higher tree given share burden order achiev small quorum size howev shall argu metric problemat fourth metric impact singl node failur size quorum exampl n algorithm 13 one site chosen quorum fail worst case new quorum must form total differ set node averag messag overhead replica control protocol studi 17 commun delay studi 7 8 commun overhead quorum size commun protocol examin 9 avail metric tri ensur two import perform criteria databas system fast respons time high throughput even system heavi workload howev argu metric use suffici let us look second metric quorum size quorum size small request target set site site becom bottleneck system busi throughput respons time system becom poor third metric even workload distribut relev set yesno metric 10 even distribut workload may necessarili lead good perform heavi workload exampl major quorum consensu even workload distribut one time one oper proceed mean diamond quorum consensu 3 perform enhanc concurr oper therefor would need anoth metric perform heavi workload paper introduc metric shall call readcapac let us consid replic databas system distribut environ multipl site copi data kept differ site quorum consensu read write oper execut must obtain consensu read write quorum write quorum intersect write quorum read quorum therefor time one transact write logic data read quorum need intersect write quorum therefor long two read quorum intersect two read oper logic data execut concurr one may think read quorum two concurr read oper intersect measur throughput respons time must consid amount work involv read oper copi particular messag site quorum major overhead intersect read quorum creat bottleneck metric even workload distribut import two read quorum disjoint bottleneck respons time throughput view introduc metric measur maxim number read oper handl simultan effect maxim number disjoint read quorum form metric readcapac 14 15 19 metric call load roughli speak measur minim load busiest site similar flavor metric readcapac howev 15 consid collect quorum everi two intersect protocol high readcapac handl heavi workload without much deterior respons time system throughput howev high readcapac guarante competit perform light workload condit guarante high avail therefor good protocol simultan satisfi criteria high readcapac small best case quorum size high avail low cost one node failur paper present new protocol call diamond quorum consensu simpli diamond protocol manag replic data protocol site network logic organ twodimension diamond structur protocol view special version grid protocol 10 logic structur seen grid hole note 11 grid hole often produc higher avail solid grid show much stori diamond protocol also resembl crumbl wall protocol 15 howev 15 consid read write oper two main properti diamond quorum consensu make good choic replic data manag 1 compar major quorum tree quorum grid quorum without hole protocol diamond protocol result greatest number disjoint read quorum shall lead better throughput respons time 2 protocol achiev smallest optimum read quorum size second smallest write quorum size among protocol sinc quorum size good indic messag cost read oper usual higher proport write oper desir properti also show diamond quorum consensu high avail probabl site failur reason low low cost node failur partit failur problem replic databas system handl partit failur main motiv introduct quorum consensu earlier work howev recent work quorum consensu discuss partit failur handl mani case depend quorum consensu protocol shall examin use gener virtual partit protocol diamond protocol handl partit failur paper organ follow next section present diamond quorum consensu analysi protocol comparison protocol given section 3 handl partit failur discuss section 4 section 5 conclus 2 diamond quorum consensu protocol site network logic arrang twodimension diamond shape figur 1 often shall refer physic site network site refer node logic structur node distinct relev shall use term site node interchang figur 1 node repres circl top bottom row diamond shape contain two node diamond structur suppos number row odd label row top row middl row level top row level 0 second row level 1 etc similarli label row bottom row middl row level bottom row level 0 second row bottom level 1 etc number node row increas certain amount w everi level 0 top bottom row contain 2 node call result diamond structur regular diamond structur denot basic model w 2 therefor result structur 2 structur exampl figur 1 32 node 32 site network number node row 2 4 6 8 6 4 2 tabl figur 2 show relev figur diamond structur k integ greater 0 exampl diamond structur figur 1 maximum level 3 7 row 32 node total diamond protocol read write quorum form follow way diamond quorum consensu 5 figur 1 exampl read quorum write quorum max level configur row node figur 2 figur diamond structur 6 fu wong wong ffl write quorum form write quorum choos node one row plu arbitrari node remain row ffl read quorum form read quorum choos 1 entir row node 2 arbitrari node row figur 1 figur 3 show quorum form instanc obviou method ensur write quorum intersect write quorum read quorum shall refer protocol diamond quorum consensu simpli diamond protocol diamond protocol minimum read quorum size obtain choos whole top bottom row node minim write quorum size obtain choos whole top bottom row node plu node remain row therefor k maximum level diamond structur minim read quorum size 2 minim write quorum size 2k 2 gener case number row diamond structur even odd differ number node 2 adjac row diamond structur integ number node top bottom row 2 extrem case w level 0 contain one node diamond reduc singl column node shall readonewriteal protocol anoth gener diamond logic structur adjust accord number site particular network restrict number shown tabl 2 instanc 40 site network use structur 4 level 9 row 50 node 10 occupi physic site idea similar hollow grid structur 11 total number node network fit shape protocol also accommod chang shape addit delet number node row also addit delet row therefor follow definit gener diamond structur definit 1 gener diamond structur also call g structur stack n row node let us label row number 1 n say row anoth row b label less greater label b row r row contain node r consid row stack includ r row size greater equal size row consid row stack includ r row size greater equal size row figur 3 exampl read write quorum 21 properti diamond protocol structur top k row row level 1 w node row level w set constant sum node k row level 0 k gamma 1 given finit arithmet seri k 2 let oek number node structur maximum level k w shall emphas 2 structur give us good perform characterist k maximum level 2 number node given oek 2n number row 2 structur given number node longest row 2 structur given 2k 2n shall see properti 2 structur lead good perform next section howev 2 structur gener structur accommod number site therefor would like discov gener diamond structur preserv desir properti given follow theorem theorem 1 given integ n 5 one build gener diamond structur g structur contain n node number row g structur b c e f r figur 4 hypotenus even length even arrang l p 1 top bottom row size 2 maximum row size bound l p proof figur 4 node diamond structur repres alphabet node occupi one squar figur sinc dark grey area equal light grey area space occupi node equal space occupi squar abcd side length rightangl triangl abc acd hypotenus ac length figur 5 node repres alphabet x node occupi one squar figur let area squar 1 squar wxi z side length hypotenus length 7 sinc dark grey area equal light grey area space occupi node less space occupi squar wxi z amount equal black area given 05 easi see two figur extend valu h 3 relationship space occupi node space occupi diamond abcd wxi z chang arrang node even h follow top bottom row size 2 one row maximum length differ size adjac row 2 let us call even arrang arrang node odd h similar except two row maximum length differ size middl two row 0 let us call odd arrang pythagora theorem h given integ n 2 correspond n given site find smallest integ h n 2n l p h even odd diamond quorum consensu 9 b c e f z figur 5 hypotenus odd length odd arrang case shown figur 4 5 match n site even odd arrang match may node match site one see exist match row contain least 2 site see note n least node 05 chosen look smallest integ h specifi paragraph therefor h gamma 1 hole g structur node match site n 5 one need place one hole row top bottom row place one hole longest row result gener diamond g structur number row full 2 structur even odd arrang l p top bottom row size 2 row g structur size less equal correspond row 2 structur therefor longest row g structur contain l p node 3 perform analysi differ logic structur quorum form method result differ perform differ metric section first introduc metric readcapac examin perform diamond protocol differ metric includ readcapac quorum size avail compar protocol known protocol major quorum consensu grid protocol tree protocol hierarch quorum consensu grid protocol shall examin modifi grid protocol 11 sinc improv origin gird protocol shall examin case without hole grid 31 readcapac nonempti intersect properti read write write write quo rum one write quorum form instanc replic databas system henc capac analysi target read oper defin readcapac replic databas maxim number concurr read oper maxim number disjoint read quorum given network n node data fulli replic assum node network system handl one read oper time follow examin readcapac protocol ffl major quorum consensu handl one read oper intersect pair read quorum ffl hierarch quorum consensu consid case branch factor set 3 recommend 10 structur give minim quorum size case quorum disjoint quorum therefor handl one read oper time ffl tree quorum consensu major tree protocol node logic organ ternari treeie degre height h ie node children maximum height h read write quorum length l width w denot quorum dimens hl wi protocol tri construct quorum select root w children root select child w children depth l node inaccess depth h 0 root construct tree quorum node replac recurs w tree quorum height l gamma h 0 start children inaccess node detail found 2 suppos read quorum q r dimens hl r w r write quorum dimens q 2 quorum construct follow constraint fulfil nonempti intersect read write write write quorum hold diamond quorum consensu 11 protocol major tree quorum number node number read figur 6 comparison readcapac comparison use ternari tree model maxim number disjoint read quorum occur length read quorum 1 level tree give rise one disjoint read quorum henc handl log 3 n read oper simultan howev achiev accept avail overal perform quorum length set greater valu henc maximum number read oper tree quorum handl parallel actual smaller ffl grid protocol grid protocol read quorum size approxim n construct without intersect handl averag n read oper simultan ffl diamond quorum consensu maxim number disjoint read quorum obtain take read quorum row diamond structur proof theorem 1 l p row gener quorum structur properti state theorem henc diamond protocol handl l p simultan read oper diamond protocol handl maximum number simultan read oper among protocol achiev best readcapac among major tree quorum grid protocol comparison also shown figur 6 recal number node diamond structur maximum level k w given oek given valu k valu oek increas valu therefor obtain higher readcapac fix number node oek one tri obtain greater valu k impli smaller valu 1 howev must also consid factor quorum consensu therefor chosen valu 2 set properti diamond protocol also satisfactori 32 quorum size alreadi discuss import quorum size subsect examin optim quorum size well worst case quorum size number quorum consensu compar diamond quorum consensu method ffl major quorum consensu read write quorum size approxim upsilon ffl hierarch quorum consensu shown 10 minim quorum size given n 063 best case worst case ffl tree quorum consensu read quorum dimens hl wi tree quorum length l width w write quorum must dimens height degre tree read quorum size tree quorum protocol vari w l gamma 1 smaller size occur copi quorum upper level near root tree size write quorum vari theta ffl grid quorum consensu grid protocol assum grid structur approxim squar read quorum size approxim n write quorum size approxim 2 n ffl diamond quorum consensu optim read quorum size 2 independ total number site worst case longest row chosen node row chosen proof theorem 1 gener diamond structur satisfi condit theorem biggest quorum size bound l p l p therefor worst case read quorum size l p diamond quorum consensu 13 protocol major tree quorum number node optim read quorum size protocol major tree quorum number node read quorum sizeworst case figur 7 read quorum size smallest write quorum node row union either top bottom row henc optim write quorum size term n l p gamma11 l p worst case node row union longest row form biggest write quorum size bound l p l p equal 2 l p diamond protocol choos top bottom row read quorum provid function keep read quorum size 2 protocol comparison tree protocol attain compar optim read quorum size 1 choos root node howev case root node becom bottleneck correspond write quorum size quit big also 2 avail sever affect choic read quorum 2 figur 7 show best case worst case read quorum size tree quorum consensu major quorum consensu grid quorum consensu protocol tree protocol set chosen perform studi 2 set dimens read quorum hl r write quorum hl w 2 h2 2i dimens hl r w r lead smallest read quorum size maintain accept avail case studi 2 figur 8 show best case worst case write quorum size protocol case diamond protocol achiev quorum size second best close best tree quorum optim write quorum size worst case write quorum size larg grid quorum protocol smallest worst case quorum size optim read quorum size optim write quorum size second highest comparison lead us conclus 14 fu wong wong protocol major tree quorum number node optim quorum size protocol major tree quorum number node write quorum sizeworst case figur 8 write quorum size overal consider quorum size diamond protocol superior protocol 33 avail previou work avail algorithm defin probabl form quorum success algorithm follow denot probabl x p robx let p probabl site probabl site let number site n ffl major quorum consensu avail read write oper defin robmajor copi avail avail robal copi avail ffl tree quorum consensu tree quorum protocol avail calcul recurr relat read write avail let h l w avail oper tree quorum dimens hl wi tree height h degre see 2 definit dimens 2 avail tree height h formul h1 l w avail w subtre h l gamma diamond quorum consensu 15 p robroot theta avail w subtre h l w expans formula found 2 ffl diamond quorum consensu calcul read write avail diamond protocol similar grid protocol diamond structur treat hollow grid posit grid structur occupi node instanc structur shown figur 1 regard 8 theta 7 grid structur model corner node chop particular case 24 node 6 corner elimin structur read write avail model calcul similar way modifi grid protocol 11 row aliv least one site dead otherwis row good site bad otherwis suppos n column contain node read avail bad robal row bad aliv write avail aliv gammaprobal row bad aliv n k row contain k site diamond structur ffl grid protocol avail also given ra wa although shall examin solid grid row number node protocol examin 3 case one differ number site comparison avail 13 40 121 site figur 9 11 show read avail write avail figur 9 13 site network 3 theta 4 grid structur chosen modifi grid protocol gener diamond structur chosen row size 2g figur 10 40 site figur 10 5 theta 8 grid structur chosen gener diamond structur chosen row size f2 4 6 8 8 6 4 2g tree x major protocol probabl site read avail node x major protocol probabl site avail node figur 9 avail 13 site tree x major protocol probabl site read avail node x major protocol probabl site avail node figur 10 avail 40 site figur 11 121 site 10 theta 12 grid structur chosen gener diamond structur chosen row size f2 4 6 8 9 10 12 14 14 12 10 8 6 4 2g note diamond structur properti n number site number row given l p 1 top bottom row size 2 maximum row size bound l p specifi theorem 1 figur see site reliabl reason high diamond protocol perform well read write avail one would like achiev higher write avail diamond quorum consensu possibl exampl gener diamond structur diamond quorum consensu 17 x major protocol probabl site read avail node x major protocol probabl site avail node figur 11 avail 121 site tree x major protocol probabl site read avail node x major protocol probabl site avail node figur 12 improv avail 40 site chosen row size f 3 3 6 8 8 6 3 3g figur 12 show result avail 121 gener diamond structur chosen row size f 3 3 6 8 9 10 12 14 14 12 10 8 6 3 3g figur 13 show result compar figur 10 11 see big improv write avail site avail high case readcapac remain diamond structur modifi optim read quorum size increas one remain smaller protocol x major protocol probabl site read avail node x major protocol probabl site avail node figur 13 improv avail 121 site 4 gener virtual partit protocol handl partit failur use gener virtual partit protocol gvp present 6 gener virtual partit protocol vp 5 shall give brief descript vp point differ gvp vp present vp slightli gener form vp transact execut view view consid correspond reachabl part network seen site partit failur transact execut view control concurr control protocol within view follow data object x two posit integ r x aw x call read write access threshold respect satisfi r x nx denot total number copi x thu set copi x size aw x least one copi common set copi x size r x site maintain set site call view view total order accord uniqu viewid nonneg integ copi data object version number hv id ki indic last written view v viewid v id valu result kth updat view indic initi valu written viewupd transact see less larger relat defin among version number lexicograph order ie version number view v logic data object x assign possibl read write quorum size q r x v q w x v specifi respect mani copi x must access respect read write x view v access diamond quorum consensu 19 oper copi may return version number valu terminolog view readwrit quorum data object x view v set copi x access perform logic readwrit x view v denot set view read write quorum x let nx v number copi x resid site view v quorum size must satisfi follow condit x v ensur view write quorum x v least one copi common view read quorum x v equat 2 view least r x copi x equat 1 4 least r x copi x view v say x inherit v choic q w equat 4 case rqx v wqx v empti consid transact execut site view v viewid v id case say execut v read write copi anoth site 0 0 also view v viewid way relax restrict discuss 5 rqx v 6 oe logic read oper r x transact execut v viewid v id implement follow 1 access copi view read quorum rqx v site view v 2 determin ki maximum version number among access copi 3 v id 6 v idmax abort els read copi rqx v version number vnmax note 5 x read v unless x also inherit v relax requir allow read oper x v x initi v make possibl two concurr partit differ view perform read write oper logic data provid transact perform write without read data logic write oper execut v implement follow 1 access copi view write quorum wqx v site view v viewid v id 2 determin ki maximum version number among access copi 3 updat copi view write quorum wqx v chang version number hv id k1i v hv id 1i site may chang view time time exampl site may want chang view notic differ current view site actual commun whenev site chang view new view must execut viewupd transact updat data object copi store site site may decid member new view v base inform case call initi v may also decid use view v initi anoth site case adopt view v site chang view automat follow detail see 5 initi new view v first assign v uniqu viewid new view id larger viewid encount uniqu viewid achiev use initi uniqu site id identif number least signific digit viewid site execut viewupd transact updat local copi data object inherit v data object x viewupd transact read copi x site v copi x largest version number among set r x copi version number x set hnew view id 0i viewid 0 x larger new view id valu x copi 0 x otherwis viewupd transact abort repeat inherit data object x new view instal site 0 access viewupd transact viewid less new view id 0 immedi adopt new view id site access viewupd transact viewid greater new view id viewupd transact abort case site immedi adopt greater viewid initi viewupd transact viewid comment order case x inherit v sinc unlik 5 may still allow read x v v instal site user transact execut v copi x site version number hv 0 id ki v 0 id v id time user transact allow read x howev x written first write x v initi x v chang version number updat copi hv id li thereaft x read v describ gener partit protocol gvp major differ gvp vp definit quorum term set copi rather size quorum give us greater flexibl defin quorum shall give full descript protocol instead shall list main featur depend quorum consensu method explain incorpor protocol case diamond quorum consensu vp gvp transact execut view subset set replic site view uniqu viewid v id copi data object version number hv id ki indic last written view v viewid v id valu result th updat view transact execut view control concurr control protocol within view follow major featur diamond quorum consensu 21 figur 14 exampl global read view read view write quorum 1 global read quorum data object x global read quorum set rqx defin x inherit view v v contain global read quorum belong rqx 2 view quorum data object x view v view read quorum set rqx v view write quorum set wqx v defin view write quorum wqx v intersect quorum rqx view read quorum rqx v oe x said writabl readabl v 3 read write logic write x user transact execut view v viewid v id requir updat initi copi view write quorum wqx v copi version number contain viewid v id give new version number hv id ki larger previou version number logic read x user transact allow view v least one copi x access read initi v logic read x read view read quorum site view take valu copi highest version number protocol gvp adopt follow view v fs chosen follow choos set fr 1 subset set row diamond structur call r row rqx rqx set set follow 22 fu wong wong v contain quorum q rqx 1 set whole row site v 2 set node one row v plu ii arbitrari node complet row v row q ffl rqx v v must intersect view write quorum view v ffl wqx v contain whole row v must intersect view write quorum v addit wqx v contain one node row q wqx v must intersect quorum rqx ffl quorum rqx intersect exampl possibl set global read quorum view read quorum view write quorum shown figur 14 black node unreach site nonblack node may consid partit set nonblack node form view function site exampl show intersect properti among quorum diamond structur maximum level k may choos second kth 2k gamma 2th row row rqx second 2k gamma 2th minim cost rqx v kth row row contain largest number node within one row choos row provid high toler abil partit failur 5 conclus summar major find tabl figur 15 tabl n number site quorum size best case refer smallest read write quorum size quorum size worst case refer greatest read write quorum size note although minim quorum size tree protocol 1 result protocol problem readcapac write quorum size also avail cost one node failur refer effect singl node failur consensu smallest quorum suppos decid smallest quorum one node quorum fail need form anoth quorum cost refer number addit number node one need access therefor diamond protocol cost one node failur number node second smallest quorum 2 diamond quorum consensu 23 protocol read quorum size quorum size cost one node capac best case worst case failur worst case alg 1 tree log 3 n 1 n 1 grid diamond l p l p figur 15 properti quorum consensu protocol tabl previou discuss shown diamond quorum consensu good choic high throughput effici replic data manag two main contribut paper first defin new metric readcapac show captur characterist workloadcapac measur well system maintain high throughput low respons time heavi workload secondli propos new protocol diamond protocol achiev high readcapac low quorum size desir featur replic data manag also show new protocol easili merg gener virtual partit failur protocol one open problem investig quorum select strategi suggest use random select sinc requir overhead believ abl distribut workload quit well busi period select method propos protocol chanc node workload busi period would small henc throughput high averag respons time low anoth possibl strategi busi period site pick quorum round robin fashion exampl k quorum previou quorum chosen site q next quorum use q mod k1 way ensur quorum similar chanc chosen henc workload also distribut quit evenli tri confirm expect detail analysi experi acknowledg author would like thank anonym refere thorough review help comment enhanc paper significantli research support rgc hong kong research grant council grant ugc refcuhk 49595e note 1 note top row size 1 0 readonewriteal protocol maxim readcapac n howev protocol problem poor write avail 2 main reason set upper lower row diamond size one r effici faulttoler solut distribut mutual exclus gener tree quorum protocol effici approach manag replic data perform character tree quorum algorithm grid protocol high perform scheme maintain replic data maintain avail partit replic databas enhanc concurr avail databas system delay optim quorum consensu distribut system hypercub quorum consensu mutual exclus replic data manag hierarch quorum consensu new algorithm manag replic data perform studi gener grid structur replic data geometr approach consruct coteri kcoteri p n algorithm mutual exclus decentr system load crumbl wall class practic effici quorum system faulttoler algorithm replic data manag analysi averag messag overhead replica control protocol major consensu approach concurr control multipl copi databas quorum system distribut control protocol messag complex tree quorum algorithm tr maintain avail partit replic databas effici faulttoler solut distribut mutual exclus hierarch quorum consensu enhanc concurr avail databas system gener tree quorum protocol perform character tree quorum algorithm inlineequ f radrcdnrcdradf inlineequ algorithm mutual exclus decentr system faulttoler algorithm replic data manag crumbl wall analysi averag messag overhead replica control protocol geometr approach construct coteri kcoteri delayoptim quorum consensu distribut system major consensu approach concurr control multipl copi databas messag complex tree quorum algorithm grid protocol quorumori multicast protocol data replic