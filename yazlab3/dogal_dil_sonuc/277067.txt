incorpor specul execut schedul controlflow intens behavior descript specul execut refer execut part comput execut condit oper decid whether need execut shown promis techniqu elimin perform bottleneck impos control flow hardwar softwar implement alik paper present techniqu incorpor specul execut finegrain manner schedul controlflow intens behavior descript demonstr fail take account inform resourc constraint branch probabl lead significantli suboptim perform also demonstr may necessari specul simultan along multipl path subject resourc constraint order minim delay overhead incur predict error occur experiment result sever benchmark show specul schedul algorithm result signific upto sevenfold improv perform measur term averag number clock cycl compar schedul without specul execut also best worst case execut time specul perform schedul better correspond valu schedul obtain without specul execut b introduct specul execut refer execut part comput known control path belong execut exampl execut code branch statement branch condit evalu use overcom extent schedul bottleneck impos controlflow previou work specul execut area highlevel synthesi 1 2 3 well highperform compil 4 5 previou work 1 2 3 highlevel synthesi attempt locat singl multipl path specul prior schedul ing paper present techniqu integr specul execut schedul highlevel synthesi controlflow intens design context demonstr use inform resourc constraint branch probabil work support part nsf grant 9319269 part altern system concept inc sbir contract air forc rome laboratori permiss make digitalhard copi part work person classroom use grant without fee provid copi made distribut profit commerci advantag copyright notic titl public date appear notic given copi permiss acm inc copi otherwis republish post server redistribut list requir prior specif permiss andor fee dac 98 san francisco california iti decid specul lead significantli suboptim perform also demonstr necessari perform specul execut along multipl path finegrain level cours schedul order obtain maxim benefit addit present techniqu automat manag addit specul result gener specul execut oper show incorpor specul execut gener schedul methodolog particular present result integr effici schedul wavesch 6 experiment result variou benchmark exampl present indic upto sevenfold improv perform averag number clock cycl requir perform comput background motiv schedul tool typic work use one intermedi represent behavior descript data flow graph dfg control flow graph cfg controldata flow graph cdfg paper use cdfg intermedi represent behavior descript state transit graph stg repres schedul behavior descript explain later section addit behavior descript schedul also accept follow inform ffl constraint number resourc type avail resourc alloc constraint ffl target clock period implement constraint limit extent data control chain allow ffl profil inform indic branch probabl variou condit construct present behavior descript present motiv exampl illustr use specul execut schedul consid part behavior descript correspond cdfg fragment shown figur 1 contain loop cdfg contain vertic correspond oper behavior descript solid line indic data depend dot line indic control depend control edg cdfg annot variabl repres result condit oper gener ex ampl control edg fed oper 1 mark c figur 1 initi valu variabl 4 use loop bodi indic parenthes besid correspond cdfg data edg let us consid task schedul cdfg shown figur 1 suppos follow constraint use schedul k t4 c c figur 1 cdfg illustr specul execut s5 s5 15 m14 12 13 21 22 10 22 23 11 m20 23 24 12 m21 m11c1 10 b figur 2 nonspecul schedul cdfg figur 1 b schedul incorpor specul execut ffl target clock period allow execut memori access oper one clock cycl oper requir two clock cycl addit assum oper implement use 2stage pipelin multipli chain allow sinc lead violat target clock period constraint gener howev algorithm handl chain ffl aim optim perform design much possibl henc resourc constraint specifi purpos illustr exampl limit schedul algorithm handl resourc constraint describ later section schedul cdfg incorpor specul execut shown figur 2a schedul obtain appli either loopdirect schedul 7 techniqu wavesch 6 techniqu cdfg vertic stg repres schedul state directli correspond state control rtl implement state annot name cdfg oper perform state includ suffix repres symbol iter index cdfg loop oper belong exampl consid oper 1 cdfg 1 encount first time schedul assign subscript 0 result oper stg figur 2a gener multipl copi oper may gener schedul correspond differ condit path differ iter loop ex ampl oper 1 1 stg figur 2a correspond execut first unrol instanc cdfg oper 1 edg stg repres control state transit annot condit activ transit iter loop schedul cdfg requir eight clock cycl exampl data depend among oper within loop requir perform serial addit control depend comparison oper togeth interiter data depend 1 1 1 prevent parallel comput multipl loop iter even loop unrol employ schedul cdfg figur 1 incorpor specul execut shown stg figur 2b schedul deriv techniqu present later section specul execut oper annot condit oper whose result depend upon use follow tion opcond repres oper op execut assum specul condit cond evalu rue specul condit cond could gener express conjunct result variou condit oper stg exampl consid oper 1 1c 1 state s1 figur 2b specul execut oper correspond second instanc cdfg oper schedul assum result condit oper 1 1 execut state s7 go true state s7 s8 repres steadi state schedul note steadi state new iter initi everi cycl oppos eight cycl follow exampl illustr impact branch probabl resourc constraint perform specul deriv schedul make case integr specul schedul process consid exampl cdfg shown figur 3 select oper sel1 select data operand l r port valu port 1 0 figur 4 show three differ schedul use specul execut gener use differ resourc constraint branch probabl stg figur 4a gener assum follow inform avail resourc consist one increment one adder intraiter data control depend oper correspond iter loop interiter depend oper differ eg consecut iter refer intraiter data control depend simpli data control depend 1c e l r figur 3 cdfg demonstr effect resourc constraint branch probabl specul execut b c figur 4 three specul schedul deriv use differ resourc constraint branch probabl one compar one shifter one multipli requir one cycl also probabl comparison 1 evalu f als higher evalu true sinc result 1 evalu f als often schedul figur 4a give prefer execut oper correspond control path eg 2 result 2 schedul perform sole adder state s0 oppos 1 even though data operand oper avail averag number clock cycl cc requir stg figur 4a calcul follow equat pc1 repres probabl result comparison 1 evalu true stg figur 4b deriv inform except assum comparison 1 evalu true often evalu f als henc oper 1 given prefer oper 2 schedul s0 averag number clock cycl cc b requir stg figur 4b given follow express suppos resourc constraint relax allow two adder specul schedul result shown figur 4c averag number clock cycl cc c requir stg figur 4c given follow express expect number cycl cc figur 5 comparison specul schedul valu cc cc b cc c variou valu p rang 0 1 plot figur 5 expect schedul figur 4a outperform schedul figur 4b pc1 05 schedul figur 4b perform better 05 moreov schedul figur 4c deriv use one extra adder outperform two schedul valu pc1 thu conclud branch probabl resourc constraint influenc tradeoff involv decid condit path specul upon make case integr specul execut schedul step inform avail follow exampl illustr necessari perform specul execut along multipl path finegrain man ner order obtain maxim perform improv schedul shown figur 4 gener s5 figur specul along singl path specul execut oper condit path cdfg finegrain manner allow resourc constraint purpos comparison schedul cdfg shown figur 3 assum schedul inform assum deriv schedul figur 4b howev case restrict schedul allow specul execut along one path result schedul shown figur 6 averag number clock cycl cc requir stg figur 6 given follow express compar express cc express cc b previou exampl indic cc cc b feasibl valu pc1 thu exampl simultan specul along multipl path accord resourc avail result schedul provabl better one deriv specul along probabl path schedul algorithm automat decid best path specul upon given resourc constraint branch probabl 3 algorithm section present chang need made gener schedul algorithm support specul execut 31 gener schedul algorithm figur 7 show pseudocod gener schedul algo rithm input schedul cdfg g sched gener schedul cdfg g alloc constraint k modul select info inf clock period clk f set unschedul oper set schedul oper junschedul operationsj schedul oper schedul oper k inf clk select oper schedul select oper must honor alloc clock cycl constraint unschedul operationsremov operationop 5 schedul operationsremov operationop 6 set schedul successor comput schedul successorsopfind set oper op fanout becom schedul op schedul 7 schedul operationsappendschedul successor augment schedul oper addit oper schedul successor gg figur 7 pseudocod gener schedul algorithm ule target clock period design alloc constraint specifi number type function unit avail modul select inform give type function unit oper map output schedul stg describ schedul point gener schedul maintain set unschedul oper whose data control depend satisfi therefor schedul schedul oper b set oper unschedul unschedul oper schedul process proce follow oper schedul oper select schedul given state statement 2 select honor alloc clock cycl constraint manner select done vari one schedul algorithm anoth select oper op schedul state sinc op longer belong either schedul oper unschedul oper remov set statement 4 5 also schedul op might render oper fanout schedu labl routin comput schedul successor statement identifi oper oper subsequ includ set schedul oper statement 7 32 incorpor specul execut gener schedul overview provid overview chang need made incorpor specul execut framework gener schedul shown figur 7 support specul execut gener schedul shown figur 7 need modifi follow detail step provid section 33 1 oper schedul one need recogn schedul successor includ one r figur 8 cdfg fragment illustr specul execut specul schedul addit specul execut oper successor need special mark clearli procedur comput schedul successor need augment consid case note stage everi specul schedul oper ad list schedul oper howev actual schedul oper worth specul ignor eventu remov list schedul oper use procedur describ later section exampl 4 consid cdfg fragment shown figur 8 assum oper op0 schedul oper op2 schedul oper op1 op3 sel1 op4 unschedul output routin comput schedul successorsop2 must includ oper op4 specul execut ie operand assum result oper op2 op0 2 oper schedul control data depend specul execut oper resolv would potenti valid invalid specul perform oper oper valid consid normal ie need special mark longer oper unschedul oper schedul oper invalid need longer consid schedul therefor remov set gener resolut control data depend specul perform oper creat two separ thread execut correspond success failur specul exampl 5 consid cdfg fragment shown figur 8 suppos oper op0 op2 op4 schedul oper op3 unschedul oper op4 use operand result oper op2 op0 assum oper op1 schedul op1 evalu true execut op4 consid fruit operand chosen comput correct therefor op4 schedul schedul successor need consid condit result op1 anymor data structur modifi reflect fact howev op1 evalu fals op4 use operand result oper op3 op0 thu invalid result specul fore schedul oper whose comput influenc result comput op4 invalid remov set schedul oper 3 set schedul oper oper select schedul contain oper whose execut specul ie whose result alway use ful select procedur repres routin select schedul oper statement 2 need modifi account fact exampl oper whose execut extrem improb would make poor select candid resourc consum might better util oper whose execut proba ble also oper fall critic path would better candid select offcrit path 33 incorpor specul execut gener schedul closer look section fill detail chang outlin section 32 preced formal treatment concept relat specul execut schedul support specul execut work condit oper atom schedul unit normal schedul use oper therefor faninfanout relationship oper captur cdfg need defin condit oper sinc specul perform oper condit event adject specul perform appli oper impli condit event combin event mention section 32 oper schedul schedul successor need comput r l r figur 9 illustr schedul successor specul perform oper consid cdfg fragment shown figur 9 assum oper op5 op6 schedul oper op1 op3 op4 unschedul op2 sched ule possibl schedul two version oper op7 first version op7 0 use op2 op5 operand second op7 00 use op2 op6 op7 0 condit cop1 cop4 op7 00 condit cop1 cop4 follow analysi present structur mean identifi relationship present result help deriv faninfanout relationship among specul perform oper lemma 1 consid oper op whose fanin op1 op2 opn fanin op specul schedul op particular ith fanin opi condit c op would condit v n present detail step 1 2 3 outlin section 32 step 1 step address issu deriv schedul successor schedul oper op0 result lemma 1 use procedur schedul op erat satisfi follow condit sourc schedul oper condit exit oper fanout cdfg whose fanin reachabl output oper path consist exclus select opera tion path connect output oper opj input fanout denot pj oper pj note aj equal repres condit path pj select ie result oper op j propag path pj appropri input fanout oper fanout condit v repres express opk condit observ 1 use infer schedul successor oper procedur comput schedul successor call statement 6 pseudocodeshown figur 7 appropri augment far describ techniqu use identifi schedul successor oper accomplish tag oper condit result would valid note procedur allow us specul possibl outcom branch arbitrarili deepli nest branch integr schedul support loop unrol specul could also cross loop boundari present techniqu use valid invalid specul perform oper whose depend resolv step 2 suppos oper op resolv condit c schedul resolut c result creation two differ thread execut true ii fals follow procedur carri everi oper belong either set schedul oper set schedul oper let op condit true fals branch c evalu assum valu 1 0 c result express new express op condit step 3 describ procedur employ schedul select oper schedul pool schedul oper ation schedul oper schedul oper contain oper condit differ set event ie choos differ path specul upon need decid best candid map given resourc best mean oper whose map given resourc would minim expect number cycl schedul formal problem state follow given partial schedul ii function unit fu iii set oper may specul execut function unit iv typic input trace select oper map fu would minim expect number cycl problem proven npcomplet even condit loopfre behavior descript 8 therefor use follow heurist whose guid principl success employ sever schedul algorithm 9 heurist base follow premis oper cdfg feed primari output long path critic oper feed primari output short path therefor need schedul earlier rational behind heurist oper belong short path mobil long path ie total schedul length less sensit variat schedul length path measur sum delay constitu oper datadomin descript loop condit oper longest path pair oper fix controlflow intens descript path could input depend therefor longest path pair oper must defin respect given input exampl cdfg shown figur 3 longest path connect primari input c output depend upon valu taken oper 1 sinc schedul algorithm gear toward minim averag execut time use expect length longest path oper primari output metric rank differ oper use notat lop denot quantiti oper op specul add new dimens problem result comput oper guarante use tabl 1 expect number cycl number state best worstcas number cycl result circuit enc state bc wc ws sp ws sp ws sp ws sp barcod gcd 95 findmin 522 265 4 tabl 2 alloc constraint exampl tabl 2 circuit add1 sub1 mult1 comp1 eqc1 inc1 findmin oper op account effect multipli probabl oper output util lop deriv metric oper critic express mean follow equat criticalityop measur desir schedul op product probabl event op condit lop defin 4 experiment result techniqu describ paper implement program call waveschedspec written c evalu program use produc schedul sever commonli avail benchmark schedul compar produc schedul algorithm wavesch 6 without use specul execut respect follow metric expect number cycl b number state stg produc c smallest number cycl taken execut behavior descript largest number cycl taken execut behavior descript gener find largest number cycl taken execut behavior descript hard problem howev exampl consid paper static analysi descript suffici find number tabl 1 summar result obtain column label state bc wc repres respect expect number cycl number state stg produc smallest number cycl taken execut stg largest number cycl taken execut stg minor column ws produc wavesch wavesch spec respect use librari function unit consist adder add1 b subtract sub1 c mul tiplier mult1 lessthan compar comp1 e equal compar eqc1 f increment inc1 unlimit number singleinput logic gate assum avail function unit except mult1 execut two cycl take one cycl execut alloc constraint exampl found look entri correspond exampl tabl 2 exampl alloc constraint gcd two sub1 one comp1 two eqc1 expect number cycl final design measur simul vhdl descript schedul use synopsysvss simul input trace use simul obtain zeromean gaussian sequenc exampl barcod gcd tlc findmin borrow literatur test1 exampl shown figur 1 barcod repres barcod reader gcd comput greatest common divisor input tlc repres traffic light con troller findmin return index minimum element array result obtain indic waveschedspec produc averag expect schedul length speedup 28 schedul obtain use wavesch note wavesch 6 report achiev averag speedup 2 schedul produc exist schedul algorithm pathbas schedul 10 loopdirect schedul 7 get idea area overhead techniqu obtain 16bit rtl implement gcd exampl use inhous highlevel synthesi system schedul produc waveschedspec wavesch rtl circuit technologymap use msu librari area gatelevel circuit obtain area overhead circuit produc waveschedspec found 31 also note waveschedspec number cycl shortest longest path smaller equal correspond number wavesch conclus paper present techniqu incorpor specul execut schedul controlflow intens design demonstr order fulli exploit power specul execut one need integr schedul introduc nodetag scheme identif oper specul schedul given state heurist select best oper schedul techniqu fulli integr exist schedul algorithm support implicit unrol loop function pipelin controlflow intens behavior parallel execut independ loop whose bodi share resourc experiment result demonstr present techniqu improv perform gener schedul significantli schedul produc use specul execut averag 28 time faster schedul produc without benefit r experi lowlevel specul comput base multipl branch predict global schedul independ control dependenciesbas condit vector combin mbpspecul comput loop pipelin highlevel synthesi trace schedul techniqu global microcod compact sentinel schedul model compilercontrol specul execut wavesch novel schedul techniqu controlflow intens behavior de scription perform analysi optim schedul condit loopintens specifica tion comput intract empir evalu highlevel synthesi schedul heurist pathbas schedul synthesi tr global schedul independ control depend base condit vector empir evalu highlevel synthesi schedul heurist sentinel schedul perform analysi optim schedul condit loopintens specif italicwaveschedital comput intract combin mbpspecul comput loop pipelin highlevel synthesi ctr sumit gupta nick savoiu sunwoo kim nikil dutt rajesh gupta alex nicolau specul techniqu high level synthesi control intens design proceed 38th confer design autom p269272 june 2001 la vega nevada unit state sumit gupta nikil dutt rajesh gupta alex nicolau dynam condit branch balanc highlevel synthesi controlintens design proceed confer design autom test europ p10270 march 0307 sumit gupta nick savoiu nikil dutt rajesh gupta alex nicolau timothi kam michael kishinevski shai rotem coordin transform highlevel synthesi high perform microprocessor block proceed 39th confer design autom june 1014 2002 new orlean louisiana usa satish pillai margarida f jacom compilerdirect ilp extract cluster vliwep machin predic specul modulo schedul proceed confer design autom test europ p10422 march 0307 sumit gupta nick savoiu nikil dutt rajesh gupta alex nicolau condit specul effect perform area highlevel snthesi proceed 14th intern symposium system synthesi septemb 30octob 03 2001 montral pq canada soha hassoun fine grain increment reschedul via architectur retim proceed 11th intern symposium system synthesi p158163 decemb 0204 1998 hsinchu taiwan china luiz c v do santo jochen g jess exploit state equival fli appli code motion specul proceed confer design autom test europ p120e januari 1999 munich germani darko kirovski miodrag potkonjak engin chang methodolog applic behavior system synthesi proceed 36th acmiee confer design autom p604609 june 2125 1999 new orlean louisiana unit state srivath ravi ganesh lakshminarayana niraj k jha remov memori access bottleneck schedul controlflow intens behavior descript proceed 1998 ieeeacm intern confer computeraid design p577584 novemb 0812 1998 san jose california unit state sumit gupta nikil dutt rajesh gupta alexandru nicolau loop shift compact highlevel synthesi design complex control flow proceed confer design autom test europ p10114 februari 1620 2004