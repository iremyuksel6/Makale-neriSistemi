modul via concept analysi abstractw describ gener techniqu identifi modul legaci code method base concept analysisa branch lattic theori use identifi similar among set object base attribut discuss concept analysi identifi potenti modul use posit neg inform present algorithm framework construct lattic concept program concept repres potenti modul defin notion concept partit present algorithm discov concept partit given concept lattic prove algorithm correct b introduct mani exist softwar system develop use program languag paradigm incorpor objectori featur design principl system often monolith style make mainten enhanc arduou task softwar engin job would less difficult tool could transform code make explicit use modul function equival objectori code make use modul class given tool partial autom transform legaci system could modern make easier maintain modular program offer ad benefit increas opportun code reus major difficulti softwar modular accur identif potenti modul class paper describ techniqu known concept analysi help autom modular main contribut paper ffl show appli concept analysi modular problem ffl previou work modular problem made use posit inform modul identifi base properti function f use variabl x f argument type sometim case modul identifi valu type depend upon exampl function f use field struct queue field struct stack concept analysi allow posit neg inform incorpor modular criterion see section 32 ffl unlik sever previous propos techniqu conceptanalysi approach offer abil stay within system oppos appli ad hoc method first suggest modular judg inadequ propos modular fine scale user move partit lattic see section 4 propos modular coars user add addit attribut identifi concept see section 3 ffl implement prototyp tool use concept analysi propos modular c program implement test sever small mediums exampl largest exampl consist 28000 line sourc code see section 5 exampl consid c implement stack queue shown figur 1 queue repres two stack one front one back inform shift front stack back stack back stack empti queue function make use stack field indirectli call stack function although stack queue function written interleav order would like abl teas two compon apart make separ class one client c code given figur 2 paper discuss techniqu modul case c class identifi code delin explicitli result inform suppli suitabl transform tool map c code c code aforement exampl although modular algorithm abl identifi decomposit 2 14 unabl handl variant exampl stack queue tightli intertwin see section 32 section 32 show concept analysi abl group code latter exampl separ queue stack modul section 2 introduc context concept analysi algorithm build concept lattic context section 3 discuss process identifi modul c program base concept analysi section 4 defin notion concept partit present algorithm find partit concept lattic section 5 discuss implement result section 6 concern relat work defin struct stack f int base int sp int size struct queue f struct stack front struct stack back struct stack initstackint sz f struct stack struct stackmallocsizeofstruct stack return g struct queue initq f struct queue struct queuemallocsizeofstruct queue return q g int isemptystackstruct stack f return ssp sbase g int isemptyqstruct queue q f return isemptystackqfront isemptystackqback g void pushstruct stack int overflow check void enqstruct queue q int f pushqfront g int popstruct stack f isemptystack return 1 return ssp g int deqstruct queue q f isemptyqq return 1 isemptystackqback pushqback popqfront return popqback g figur 1 c code implement queue use two stack defin class stack f privat int base int public stackint new int isempti f return sp base g int pop f isempti return 1 return sp void pushint f overflow check class queue f privat stack front back public new stackqueu size back new stackqueu size g int isempti f return frontisempti backisempti g int deq f isempti return 1 backisempti return backpop void enqint f frontpushi g figur 2 queue stack class c concept analysi provid way identifi sensibl group object common attribut illustr concept analysi consid exampl crude classif group mammal cat chimpanze dog dolphin human whale suppos consid five tribut fourleg haircov intellig marin thumb tabl 1 show anim consid attribut attribut fourleg haircov intellig marin thumb cat chimpanze object dog dolphin human whale tabl 1 crude character mammal order understand basic concept analysi definit requir follow present 11 context tripl finit set object attribut respect r binari relat mammal exampl object differ kind mammal attribut characterist fourleg haircov etc binari relat r given tabl 1 exampl tupl whale marin r cat intellig map attribut x common object form galoi connect map satisfi map antimonoton extens mammal exampl oefcat fhaircoveredg concept pair set set object extent set attribut intent concept maxim collect object share common attribut exampl fcat dogsg ffourleg haircoveredg concept wherea fcat chimpanzeesg fhaircoveredg concept concept x 0 subconcept concept x 1 equival 1 instanc fdolphin whalesg fintellig marineg subconcept fchimpanze dolphin human whalesg fintelligentg subconcept relat form complet partial order concept lattic set concept concept lattic mammal exampl shown figur 3 top fcat chimpanze dog dolphin human whalesg fchimpanze dolphin human whalesg fintelligentg fcat chimpanze dogsg fhaircoveredg fchimpanze humansg fintellig thumbedg fdolphin whalesg fintellig marineg fcat dogsg fhaircov fourleggedg bot ffourleg haircov intellig marin thumbedg figur 3 concept lattic accompani key mammal exampl fundament theorem concept lattic 12 relat subconcept superconcept follow g i2i oe i2i i2i signific theorem least common superconcept set concept comput intersect intent take union extent find common object set common attribut result union exampl applic fundament theorem follow comput correspond fact c 1 c lattic shown figur 3 sever algorithm comput concept lattic given context 11 describ simpl bottomup algorithm import fact concept context use algorithm given set object x smallest concept extent contain x oex oex thu bottom element concept lattic oe oe concept consist object attribut often empti set exampl initi step algorithm comput bottom concept lattic next step comput atom concept smallest concept extent contain object treat singleton set atom concept correspond node concept lattic reachabl bottom node one step comput atom concept mammal exampl shown algorithm close set atom concept join initi worklist form contain pair atom concept c c 6 c 0 c 0 6 c worklist empti remov element worklist c 0 use fundament theorem concept analysi c 00 concept yet discov add pair concept c c 6 c 00 c 00 6 c worklist process repeat worklist empti iter step conceptbuild algorithm illustr 3 use concept analysi identifi potenti modul main idea paper appli concept analysi problem identifi potenti modul within monolith code outlin process follow 1 build context object function defin input program attribut properti function attribut could sever properti relat function data structur attribut discuss detail 2 construct concept lattic context describ section 2 3 partit collect concept whose extent partit set ob ject concept partit correspond possibl modular input program concept partit discuss section 4 31 appli concept analysi stack queue exampl consid stack queue exampl introduct section demonstr concept analysi use identifi modul partit indic c code figur page 4 first defin context let object 0 attribut ff 0 ff correspond function properti function indic tabl return type struct stack return type struct initq argument type struct stack argument type struct queue use field struct stack use field struct queue context relat stack queue exampl next step build concept lattic context describ section 2 concept lattic stack queue exampl togeth key identifi latticenod label correspond concept shown bot fff 0 g empti concept one advantag use concept analysi multipl possibl modular offer addit relationship among concept concept lattic also offer insight structur within propos modul exampl atom level initi function concept c 0 c 2 distinct concept function concept c 1 c 3 former two concept correspond constructor latter two member function concept correspond stack modul c 5 correspond queue modul subconcept relationship indic stack concept consist constructor concept memberfunct concept 32 ad complementari attribut untangl code stack queue exampl consid thu far demonstr full power concept analysi bring modular problem rel straightforward separ code shown figur 1 two modul techniqu describ 2 14 also creat group essenc concept analysi describ emul techniqu show concept analysi encompass previous defin method modular show concept analysi offer possibl go beyond previous defin method offer abil teas apart code sens tangl illustr mean tangl code consid slightli modifi stack queue exampl suppos function isemptyq enq written modifi stack field directli see figur 4 rather call isemptystack push may effici make code difficult maintain simpl chang stack implement may requir chang queue code furthermor complic process identifi separ modul appli concept analysi use set attribut attribut ff 4 use field struct stack appli isemptyq enq tabl 2 show context relat tangl stack queue code origin set object attribut result concept lattic shown figur 5 observ concept c 5 still identifi queue modul none concept coincid stack modul particular even though extent c 0 finitstackg extent c 2 fisemptystack push popg concept stack concept c 7 consist initstack isemptystack isemptyq push enq pop mix stack oper queue oper int isemptyqstruct queue q f return qfrontsp qfrontbas qbacksp qbackbas void enqstruct queue q int f figur 4 queue stack exampl revisit tangl c code tabl 2 context relat tangl stack queue exampl top f 0 c 7 g queue concept c 6 bot fff figur 5 concept lattic correspond key tangl stack queue exampl use attribut list page 8 problem attribut list page 8 reflect posit inform distinguish characterist stack oper depend field struct stack field struct queue untangl compon need augment set attribut neg inform case complement use field struct queue ie use field struct queue revis set attribut correspond context relat shown return type struct stack return type struct initq argument type struct stack ff 3 argument type struct queue use field struct stack use field struct queue ff 6 use field struct queue ff 6 result concept lattic correspond key top f 0 c 7 g queue concept stack concept c 6 g initstack bot fff 0 g empti concept concept lattic contain concept concept lattic figur 5 well addit concept c 4 correspond stack modul modular identifi isemptyq enq part queue modul separ stack modul even though two oper make direct use stack field rais issu subsequ ctoc codetransform phase although one might abl devis transform remov depend queue oper privat member stack class eg introduc appropri call member function stack class straightforward ctoc transform would simpli use c friend mechan shown figur 6 33 choic attribut concept maxim collect object common properti cohes modul collect function perhap along data structur common properti therefor employ concept analysi modular problem reason object defin class queue class stack f friend class queue privat int base int public stackint new int isempti f return sp base g int pop f isempti return 1 return sp void pushint f overflow check class queue f privat stack front back public new stackqueu size back new stackqueu size g int return frontsp frontbas backsp backbas void enqint f int deq f isempti return 1 backisempti return backpop figur queue stack class c friend correspond function howev flexibl come attribut wide varieti attribut might choos effort identifi concept modul program exampl use attribut reflect way struct data type use instanc may use use attribut captur properti possibl attribut includ follow ffl variableusag inform relat function sometim identifi use common global variabl attribut captur inform might form use global variabl x ffl dataflow slice inform use identifi modul attribut captur inform might form may use valu flow statement part slice respect statement ffl inform obtain type inferenc type infer use uncov distinct seemingli ident type 10 9 exampl f function declar type int theta int bool type infer might discov f gener type form ff theta fi bool reveal type f first argument distinct type second argument even though declar type attribut might form argument type ff rather simpli argument type int would prevent function group togeth mere superfici similar declar type argument ffl disjunct attribut user may awar certain properti input program perhap similar two data structur disjunct attribut allow user specifi properti form 1 2 exampl use field stack use field queue attribut could use togeth one context highlight one advantag conceptanalysi approach modular repres singl algorithm modular rather provid framework obtain collect differ modular algorithm 4 concept modul partit thu far discuss concept lattic built program way concept repres potenti modul howev overlap concept everi group concept repres potenti modular feasibl modular partit collect modul disjoint includ function input code limit number choic softwar engin would present help identifi partit formal notion concept partit present algorithm identifi partit concept lattic 41 concept partit given context ar concept partit set concept whose extent form partit partit extent concept cover object set ie pairwis disjoint x term modular program concept partit correspond collect modul everi function program associ exactli one modul simpl exampl consid concept lattic shown page 11 concept partit context list ftopg atom partit p 2 p 3 combin atom concept larger concept p 4 consist one stack modul one queue modul p 5 trivial partit function place one modul look concept partit softwar engin elimin nonsens possibl preced exampl c 7 appear partit modul ie nonoverlap concept would deq belong atom partit concept lattic concept partit consist exactli atom concept recal atom concept concept smallest extent contain object treat singleton set instanc see atom concept mammal exampl page 7 concept lattic need atom partit exampl lattic figur 3 page atom partit atom concept c 0 c 3 howev c 1 c 3 overlap object chimpanze extent concept atom partit concept lattic often good start point choos modular program order develop tool work concept partit use abl guarante exist atom partit achiev augment context neg inform similar section 32 given context ar complement attribut 2 attribut rg attribut exactli object properti exampl attribut tabl page 11 ff 5 ff 6 complement given context complement extens c context c ag r rg complement extens context origin context attribut set augment addit complement everi origin attribut straightforward see everi context complement extens concept lattic complement extens atom partit use fact present algorithm find partit concept lattic 42 find partit concept lattic given concept lattic defin follow relat element set immedi suprema concept x denot supsx set lattic element x element z x z set ancestor x denot ancsx set lattic element x 6 x 1 sup atom partit 4 w 6 remov p w 6 c 2 p c 0 2 supsc disjoint 14 endif 15 endif 16 endfor 17 endfor 18 endwhil figur 7 algorithm find partit concept lattic algorithm build collect partit concept lattic let p collect partit form let w worklist partit begin atom partit set immedi suprema bottom element concept lattic p w initi singleton set contain atom partit algorithm work consid partit worklist w w empti partit remov w new partit form possibl select concept partit choos supremum concept ad partit remov overlap concept algorithm given figur 7 worst case number partit exponenti number concept case case number partit larg possibl adapt algorithm work interact new partit discov algorithm would paus user consid partit fine scale user would allow algorithm iter find coarsergrain partit 5 implement result implement prototyp tool employ concept analysi propos modular c program written standard ml new jersey version 10924 run sun solari 251 prototyp take c program input default object set set function defin input program default attribut set consist one attribut form use field struct userdefin struct type equival typedef input program user option includ attribut form paramet return type type context form form fulli complement form userdefin struct type attribut formdo use field struct paramet return type type includ attribut set context context fed concept analyz build concept bottom describ section 2 user view concept lattic feed lattic parti tioner comput depend user choic possibl partit one partit time exampl paper analyz implement preliminari result larger exampl appear promis particular use prototyp tool spec 95 benchmark go mani face go program consist roughli 28000 line c code 372 function 8 userdefin data type concept lattic fulli complement context associ function data type consist thirtyfour concept construct second user time sparcstat 10 64mb ram partition identifi possibl partit lattic roughli amount time 51 case studi chullc chullc program taken computationalgeometri librari comput convex hull set vertic plane program consist roughli one thousand line c code twentysix function three userdefin struct data type tvertex tedg tface repres vertic edg face respect context fed concept analyz consist twentysix function object set six attribut use field tvertex use field tvertex etc binari relat indic whether function f use field one struct type concept analyz built twentyeight concept correspond lattic roughli one second user time lattic appear figur 8 partition comput 153 possibl partit concept lattic roughli two second figur 8 concept lattic deriv chullc atom partit group function eight concept list tabl 3 partit indic code cleanli break three modul eg one struct type howev assum goal transform chullc equival c program eight concept suggest possibl modular base three type concept 2 3 4 would correspond three class vertex edg face respect concept 1 would correspond driver modul function concept 5 8 would form four friend modul function would declar friend appropri class concept number userdefin struct type function makevertex readvertic collinear constructhul printvertic 3 tedg makeedg 4 tface cleanfac makefac 5 tvertex tedg cleanvertic printedg 6 tvertex tface volume6 volum convex printfac 7 tedg tface makeccw cleanedg consist 8 tvertex tedg tface print tetrahedron addon makestruct check tabl 3 atom partit concept lattic deriv chullc 6 relat work although grow bodi literatur concern modul abstractdatatyp recoveri nonmodular code eg 13 6 unawar previou work problem involv use concept analysi modular reflect design decis inher subject unlik modular process ever fulli autom given user interact requir conceptanalysi approach offer certain advantag previous propos techniqu name abil stay within system oppos appli ad hoc method user judg modular system suggest unsatisfactori propos modular fine scale user move partit lattic see section 4 propos modular coars user add addit attribut gener concept see section 3 furthermor concept analysi realli provid famili modular algorithm rather offer one fix techniqu differ attribut chosen differ condit work close relat liu wild 8 make use tabl much like objectattribut relat context howev wherea work use concept analysi analyz tabl liu wild propos less power analysi also propos user interven ad hoc adjust result modular unsatisfactori explain conceptanalysi approach natur gener varieti possibl decomposit ie differ collect concept partit set object conceptanalysi approach gener canfora et al 2 identifi abstract data type analyz graph link function argument type return type inform captur use context object function attribut possibl argument return type exampl attribut attribut tabl page 8 ad attribut indic whether field compound data type use function done exampl use paper conceptanalysi becom power tool identifi potenti modul techniqu describ 2 work describ 3 4 expand abstractdatatyp identif techniqu describ 2 call domin inform use introduc hierarch nest structur modul may possibl combin techniqu 3 4 conceptanalysi approach present paper conceptanalysi approach also gener techniqu use obad tool 14 design identifi abstract data type c program obad analyz graph consist node repres function struct type edg repres use intern field struct type function recov similar inform concept analysi attribut exactli indic use field struct type exampl ff 5 tabl 31 page 8 howev obad stumbl tangl code like exampl discuss section 32 addit discriminatori power conceptanalysi approach due fact abl exploit posit neg inform contrast approach identifi object describ 1 techniqu aim analyz relationship among function type identifi class 1 aim identifi object link function specif variabl similar effect achiev via concept analysi introduc one attribut actual paramet certain amount work involv use cluster analysi identifi potenti modul eg 5 1 7 work implicitli explicitli involv identif potenti modul determin similar measur among pair function current investig link concept analysi cluster analysi concept analysi previous appli softwareengin tool albeit problem much differ modular norarec tool use concept analysi identifi conflict softwareconfigur inform 11 acknowledg work support part nation scienc foundat grant ccr9625667 defens advanc research project agenc arpa order 8856 monitor offic naval research contract n0001492j1937 comment manuvir da work report paper greatli appreci r greedi approach object identif imper code experi identifi reusabl abstract data type program code program comprehens identif abstract data type system structur analysi cluster data bind evalu process cluster support automat program understand object convent procedur languag exampl data design recoveri practic program understand type infer program gener softwar reus c c reengin configur base mathemat concept analysi restructur lattic theori approach base hierarchi concept second work confer revers engin recov abstract data type object instanc convent procedur languag tr ctr peter wendorff formal approach assess improv terminolog model use inform system engin acm sigsoft softwar engin note v26 n5 sept 2001 fuhgwo chen tingwei hou instructionco translat approach restructur directli thread interpret low cohes acm sigplan notic v41 n8 august 2006 kamran sartipi kosta kontogianni userassist approach compon cluster journal softwar mainten research practic v15 n4 p265295 juli andrew sutton jonathan malet recov uml class model c detail explan inform softwar technolog v49 n3 p212229 march 2007 di penta netel g antoniol e merlo languageindepend softwar renov framework journal system softwar v77 n3 p225240 septemb 2005 andrea christl rainer koschk margaretann storey autom cluster support reflexion method inform softwar technolog v49 n3 p255274 march 2007 rainer koschk gerardo canfora jrg czeranski revisit ic approach compon recoveri scienc comput program v60 n2 p171188 april 2006 gerardo canforaharman massimiliano di penta new frontier revers engin 2007 futur softwar engin p326341 may 2325 2007