power analysi lowpow schedul techniqu embed dsp softwar abstract paper describ applic measur base power analysi techniqu embed dsp processor instructionlevel power model processor develop use techniqu signific point differ observ model one develop earlier generalpurpos commerci microprocessor particular effect circuit state power cost instruct stream mark case dsp processor addit dsp processor special architectur featur allow instruct pack pair energi reduct possibl use featur studi onchip booth multipli processor major sourc energi consumpt dsp program microarchitectur power model multipli develop analyz energi minim schedul algorithm incorpor new techniqu propos reduc energi consum dsp softwar energi reduct vari 11 56 observ sever exampl program energi save real verifi physic measur b introduct embed comput system character presenc applic specif softwar run special processor processor may shelf digit signal processor dsp applic specif instructionset processor asip larg fraction applic power critic howev littl avail form design tool help embed system design evalu design term power metric recent instructionlevel power model develop two generalpurpos commerci microprocessor 1 2 base base cost overhead cost instruct obtain physic current measur base cost given instruct defin averag current drawn processor repeat execut struction overhead cost need account effect circuit state chang instruct sequenc consist differ instruct ever impact effect overal power cost program found limit larg generalpurpos microprocessor aim studi analyz issu relat softwar power consumpt context smaller special processor fujitsu embed dsp processor refer target processor use studi processor use sever fujitsu embed applic repres larg class dsp processor analysi result use paper develop instructionlevel power model make possibl evalu power cost program run target dsp processor observ effect circuit state mark processor suggest chang instruct order appropri schedul instruct lead reduct power cost program issu explor limit extent earlier work 3 4 3 studi show faster program consum less energi optim softwar perform instruct schedul minim energi consumpt 4 power consum control processor target minim power cost differ instruct schedul estim count transit rtl level model controlpath well recogn estim method rough measur actual power cost fur thermor increas energi cost due longer schedul consid schedul approach propos overcom limit sinc base actual energi cost obtain physic measur dsp processor special architectur featur allow instruct pack pair energi reduct possibl use featur studi well furthermor sinc onchip booth multipli major sourc energi consumpt dsp program microarchitectur power model onchip booth multipli develop analyz power minim base microarchitectur model effect techniqu local code modif operand swap propos reduc power consumpt lowpow code schedul method present automat appli techniqu given piec code experiment result sever exampl dsp program show energi reduct rang 11 56 energi save verifi physic measur also note energi reduct essenti come free obtain softwar modif thu entail hardwar overhead addit loss perform sinc run time modifi program either improv remain unchang target embed dsp processor use studi fujitsu 33v 05um 40mhz cmo proce sor special architectur featur relev rest paper 1 4 24bit data regist b c 2 fast mac multiplyandaccumul unit use booth multipli 3 latch operand booth multipli reduc unnecessari switch 4 two onchip ram bank simultan read two regist 5 instruct pack 3 current measur applic target dsp processor run limit energi avail batteri thu energi consumpt focu attent sinc v dd suppli voltag cycl period known fix energi proport product averag current n number cycl given n program need measur averag current calcul e product n measur use compar energi cost program paper target processor part person comput evalu board program monitor program run person comput use monitor dsp instruct download offchip instruct memori input data store onchip ram dsp processor current drawn dsp processor measur standard offtheshel dualslop integr digit ammet way discuss detail 1 instruct pack low power special architectur featur target dsp processor capabl pack alutyp instruct data transfer instruct singl instruct codeword simultan execut featur call instruct pack found use pack instruct alway lead reduct energi reason averag current pack instruct slightli averag current sequenc two unpack instruct thu reduct one execut cycl offset slight current increas lead larg overal energi reduct graphic illustr figur 1 certain set operand area solid dot graph proport energi consumpt pack unpack instruct respec tive seen averag current drawn pack instruct margin higher unpack instruct howev sinc unpack instruct complet twice number pack unpack figur 1 comparison energi consum pack unpack instruct tabl 1 exampl sequenc four instruct overhead cost 1 3 ignor number instruct base cycl cycl pack instruct total energi consum unpack instruct much larger twice much pack instruct explan observ may lie fact certain underli current cost associ execut pack unpack instruct independ function instruct cost associ fetch instruct pipelin control clock etc cost get share two instruct pack addit circuitst overhead current two adjac unpack instruct lab mspc elimin sinc minim total energi consumpt object instruct pack pack rule much possibl 5 effect circuit state overhead primari compon model develop 1 2 base cost instruct overhead cost adjac instruct base current instruct measur put sever instanc target instruct infinit loop pair differ instruct say j put infinit loop measur current alway larger averag base cost j differ call overhead cost j consid measur chang circuit state instruct j viceversa total energi consum program sum total base cost total overhead cost instruct execut howev overhead cost processor consid circuit state chang caus adjac instruct case target dsp processor underestim current especi multipli instruct tabl 1 give exampl program consist sequenc multipli instruct mullab follow nop associ base cost number execut cycl also shown overhead cost instruct pair 12 184 23 184 13 139 sum measur current four instruct 2040 equal n sequenc sum base cost 372 overhead cost adjac instruct 184 underestim actual cost 136 differ 278 two estim actual come circuit state overhead nonadjac instruct 13 due special design input multipli latch input operand put multipli operand bu retain old valu next multipli instruct execut therefor state chang input latch account overhead adjac instruct 12 23 given overhead instruct 13 2 time overhead 13 2139ma compens differ lead accur estim 1 result new power model need includ overhead caus nonadjac multipli instruc tion overhead depend previou current valu input latch multipli oper valu typic unknown runtim purpos program energi evalu state input latch consid unknown averag overhead current penalti ad base cost multipli instruct averag valu determin 125ma mul mac instruct way effect handl use enhanc form base cost multipli instruct enhanc base cost base cost defin earlier plu averag overhead penalti instruct instruct set show effect instruct involv alu datapath 6 power analysi dsp processor instructionlevel power model techniqu describ section 5 suggest accur current estim program obtain tabl give base cost instruct tabl give overhead cost instruct pair deriv tabl empir construct appropri experi use measur base power analysi techniqu ever practic issu consid regard first power cost instruct vari depend operand valu extens experiment lead develop accur model variat practic approxim case use averag cost instruct averag cost tabu late issu one tabl size processor rich instruct set assign power cost instruct instruct pair lead larg tabl creation tabl may requir lot work howev observ instruct arrang class instruct given class similar power cost instruct similar function tend fall class assign averag cost instruct class lead compact tabl thu greater detail resolut tabl lead four instruct put infinit loop measur overhead occur twice 1 3 well 3 1 tabl 2 six instruct class class address im reg load immedi data regist transfer memori data regist b move data one regist anoth mem reg reg mem move data memori regist regist memori asl reg specifi implicitli addsub shift logic oper alu mac reg specifi implicitli multipli accumul alu tabl 3 averag base cost unpack instruct ldi lab mov1 rang averag base 194 365 198 mov2 asl mac rang 176 192 158 172 170 174 averag base 184 165 172 accur cost estim practic pur pose use compact tabl suffic target dsp processor instruct commonli use dsp applic categor class six class use unpack struction shown tabl 2 princip pack instruct similarli classifi extens current measur experi conduct verifi class characterist current con sumption furthermor effect differ operand valu variat current consumpt studi class averag base overhead cost also assign analysi result discuss detail remaind sec tion pack unpack instruct discuss separ schedul algorithm develop use inform energi reduct describ section 7 61 unpack instruct tabl 3 give unpack instruct class rang base cost differ operand valu exact operand valu often unknown runtim thu averag valu use program energi evalu also shown tabl 3 sinc rang variat base cost class reason small less 10 class ldi except inaccuraci result use averag limit overhead cost instruct belong differ class shown tabl 4 entri row column j give overhead cost instruct belong class j occur instruct belong class instruct belong class occur instruct belong class j tabl symmetr sinc method use calcul overhead cost assum cost two case variat tabl 4 averag overhead cost unpack instruct ldi lab mov1 mov2 asl mac ldi 36 137 155 63 108 60 lab 25 19 122 209 150 mov1 40 183 105 38 mov2 256 267 222 asl 36 80 tabl 5 averag base cost pack instruct instruct asllab aslmov1 aslmov2 rang 345 387 157 174 187 204 averag base 366 166 196 instruct maclab macmov1 macmov2 rang averag base 369 174 201 valu entri differ operand choic instruct class variat limit reason use averag valu entri tabl 4 repres determin averag valu valu mac mac entri repres overhead occur even two instruct nonadjac describ section 5 altern way look case use enhanc base cost section 5 base cost mac tabl 3 increas 125 mac mac entri tabl 4 chang import observ tabl 4 signific variat across variou entri tabl suggest choos appropri order instruct lead energi reduct algorithm describ section 7 62 pack instruct tabl 5 show pack instruct class rang base cost variat caus possibl operand valu variat reason small less 10 class averag valu assign base cost also shown tabl 5 overhead cost experi show except instruct pack mac pack instruct small rang variat averag valu assign overhead cost pack instruct result present greater detail 5 overhead cost mac instruct mac pack data transfer instruct especi lab chang data valu regist b use mac input significantli wide variat overhead cost observ 14 330ma wide variat mainli due complex booth multipli implement mac unit typic dsp applic maclab instruct usual appli sequenc data filter oper ideal pairwis overhead cost use arrang data order total overhead cost sum regist product regist recod logic regist shiftadd array figur 2 microarchitectur model booth multipli individu pairwis overhead cost minim problem x usual avail execut time henc estim purpos averag valu 172ma use overhead cost maclab instruct due unavail executiontim operand howev purpos minim singl overhead cost valu guid search procedur better schedul sequenc maclab instruct case filter applic instruct schedul exist code may best altern reason arriv order operand x determin environ embed processor control schedul thu overal design system algorithm may chang produc favor signal statist may alway possibl therefor environment constraint order still reduc energi consumpt due mac effect techniqu local code modif propos section 63 base exploit architectur booth multipli 63 operand swap booth multipli booth multipli implement mac unit take data regist b operand fast multipl fundament idea behind booth multipl recod b socal skip 1s techniqu 6 instanc 7digit valu 0011110 would need four addit shift recod 1 simplic requir one addit one subtract howev worst case may altern 1s 0s bit b select shift version add subtract order determin mani addit subtract need booth multipli defin weight b valu number nonzero digit recod represent instanc weight 0011110 4 weight 01000 10 2 simpl model microarchitectur booth multipli depict figur 2 booth multipli treat b symmetr weight recod b determin number time ad subtract gener prod uct weight smaller b reduc number addit subtract swap operand regist b potenti result current reduct tabl 6 give three experi swap operand booth multipli reduc current significantli observ point ef tabl variat measur current swap operand op1 op2 regist b maclab instruct operand measur current save 7fffff aaaaaa 589 469 204 7fffff aaaaaa 657 491 253 fectiv way reduc current mac instruct swap operand b simpl power consumpt model base microarchitectur model booth multipli figur empir deriv valid extens current measur experi power model switch activ multipli character mainli content regist b sinc circuit state signific factor multipli pair consecut valu regist consid regist bit switch consecut valu consid determin complet switch activ regist part activ shiftadd array regist b two factor consid first bit switch consecut valu second weight booth recod valu determin number addit subtract shiftadd array tabl 7 show averag current drawn maclab differ characterist pair consecut valu b index 1 10 shown squar parenthes assign entri identifi data characterist b entri repres exampl entri 8 repres case high switch pair consecut valu lot switch valu b addit valu b high booth recod weight tabl 6 first pair data exampl characterist seen tabl 7 averag current entri b high recod weight consist higher correspond entri moreov see entri 9 incur highest averag current case b switch significantli b high recod weight second pair data tabl 6 exampl case swap two set operand b characterist chang one new possibl still high switch b take valu origin store high switch low booth recod possibl swap valu operand fall case repres entri 7 tabl 7 thu current drawn may sharpli reduc filter oper valu constant c usual known time instruct schedul schedul calcul weight booth recod c decid load c regist recod weight high regist b recod weight low tabl 8 current reduct swap b chang operand characterist one entri anoth tabl 7 swap save save decis placement operand made base knowledg valu one operand thu sometim wrong decis may made howev averag determin placement operand base knowledg even one operand lead current reduct systemat investig conduct determin possibl improv result shown tabl 8 known operand initi assum regist b recod weight valu b high operand swap mean case initi data characterist fall entri last 3 column tabl 7 operand swap tabl 8 give averag current reduct swap chang operand characterist one entri anoth column head show entri tabl 7 result operand swap column show new case aris operand b regist swap averag percentag reduct current operand swap shown column label save case either current reduct minor increas great major case see operand swap significantli reduc current thu averag current drawn maclab instruct reduc even though one operand instanc c known schedul time operand swap easili achiev local modifi given instruct eg mspclab x01x11 mspclab x11x01 ad dition perform code size penalti associ 7 lowpow instruct schedul base power analysi discuss previou section lowpow schedul algorithm develop algorithm describ greater detail 5 algorithm schedul one basic block dsp program time look overhead cost tabl tabl 7 swap operand given regist alloc basic block data flow graph dfg obtain block greedi soonasposs pack procedur appli pack instruct data depend pack rule al low alutyp instruct pack data transfer instruct soon operand instruct readi dfg updat well accord instruct pack tabl 7 averag current drawn maclab differ characterist consecut valu b lowlow weight highhigh weight highlow weight low high low high high switch switch switch switch switch low switch 409 1 581 4 561 5 high switch 446 6 644 10 tabl 9 comparison n 5 dsp program differ schedul techniqu benchmark un p p po po goal reduc number execut cycl therefor total energi exact execut order pack unpack instruct determin follow schedul step effect overhead cost consid instruct pack schedul attempt construct execut order instruct obey data depen denci minim total overhead cost implement step base popular list schedul algorithm 7 overhead cost object function minim pipelin stall condit due resourc constraint data hazard also handl list schedul avoid penalti due extra cycl final code contain multipli oper least one operand known eg filter oper like avail schedul swap operand base tabl 7 reduc current 8 experiment result tabl 9 show experiment result five dsp program demonstr energi reduct possibl schedul method column 1 list name benchmark program remain column show energi comparison appli differ schedul techniqu p origin unpack code p pack alon po pack overhead cost reduct po combin applic pack overhead cost reduct operand swap first two program fjex1 fjex2 real fujitsu applic vector preprocess mac instruct use operand swap applic third program lp f ir60 length60 linear phase fir filter fourth program iir4 fourthord direct form iir filter fifth program fft2 radix2 decimalintim fft butterfli last three program taken embed dsp exampl 8 translat nativ code target processor benchmark program product n proport energi given valu parenthes rel valu product column un p normal 1 result show 3 47 energi reduct achiev instruct pack alon reason fft2 3 reduct due certain data depend impos unpack code prevent mov2 instruct pack preced asl instruct asl instruct gener new regist valu mov2 transfer next cycl pack list schedul algorithm base overhead cost reduct reduc energi 4 14 pack code case iir4 fft 2 operand swap applic addit 7 4 energi still save respect overal energi reduct seen 11 56 sourc code origin unpack 8 17 origin pack acknowledg author would like thank fu miyasu hiros hirohisa gamb hirokazu fukui fujitsu ltd assist experi setup technic discuss r power analysi embed softwar first step toward softwar power minim power analysi 32bit embed microcontrol compil techniqu low energi overview save power control path embed processor power analysi lowpow schedul techniqu embed dsp softwar comput arithmet principl superscalar microprocessor design digit signal process applic theori tr power analysi embed softwar power analysi 32bit embed microcontrol comput arithmet save power control path embed processor ctr sbastien lafond johan liliu energi consumpt analysi two embed java virtual machin journal system architectur euromicro journal v53 n56 p328337 may 2007 naehyuck chang kwanho kim hyung gyu lee cycleaccur energi consumpt measur analysi case studi arm7tdmi proceed 2000 intern symposium low power electron design p185190 juli 2527 2000 rapallo itali huzefa mehta robert michael owen mari jane irwin rita chen debashre ghosh techniqu low energi softwar proceed 1997 intern symposium low power electron design p7275 august 1820 1997 monterey california unit state naehyuck chang kwanho kim hyung gyu lee cycleaccur energi measur character case studi arm7tdmi ieee transact larg scale integr vlsi system v10 n2 p146154 april 2002